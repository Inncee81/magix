/*!3.8.13 MIT kooboy_li@163.com*/KISSY.add("magix",(e,t,r,n)=>{let i=e.all,o=e.isObject,l=e.isArray,a=0,f="",s=[],d=",",$=null,h=window,u=void 0,c=document,p=c.documentElement.getAttribute,m=(e,t)=>p.call(e,t),g=i(c),b=h.setTimeout,v="changed",y="change",w="pageunload",x="value",k="mxs",V="#";function I(){}let T,S=JSON.stringify,C="\x1e",j="object",q="prototype",A="params",U="path",E="mx-view",N=/[#?].*$/,O=/([^=&?\/#]+)=?([^&#?]*)/g,H=/(?!^)=|&/,M=e=>(e||"mx_")+a++,P=M(),_={rootId:M(),defaultView:P,error(e){throw e}},L=e=>typeof e==j?e:c.getElementById(e),R=e=>!e||typeof e!=j,Z=(e,t,r,n)=>{let i,o,l,a=0;for(l in e)i=e[l],o=t[l],R(i)&&o===i||Y(n,l)||(r[l]=1,a=1),t[l]=i;return a},B=(e,t,r)=>{if(e=L(e),t=L(t),e&&t&&!(r=e==t))try{r=16==(16&t.compareDocumentPosition(e))}catch(e){}return r},{assign:D,keys:z,hasOwnProperty:F}=Object,J=i("head"),K=(e,t)=>{t&&!K[e]&&(K[e]=1,J.append(`<style>${t}`))},Q=e=>m(e,"id")||(e.$a=1,e.id=M()),X=(e,t,r,n,i)=>{t=t||s,l(e)||(e=[e]),l(t)||(t=[t]);for(i of e)try{n=i&&i.apply(r,t)}catch(e){_.error(e)}return n},Y=(e,t)=>e&&F.call(e,t),G=(e,t)=>{let r,n;if(R(t))(r=t+f)[0]==C&&Y(e,r)&&(t=e[r]);else for(r in t)n=t[r],n=G(e,n),t[r]=n;return t},W=(e,t)=>t.f-e.f||t.t-e.t;function ee(e,t,r,n){(n=this).c=[],n.b=t||5,n.x=n.b+(e||20),n.r=r}D(ee[q],{get(e){let t=this.c[C+e];return t&&(t.f++,t.t=a++,t=t.v),t},each(e,t,r,n,i){n=(r=this).c;for(i of n)e(i.v,t,r)},set(e,t){let r=this,n=r.c,i=C+e,o=n[i],l=r.b;if(!o){if(n.length>=r.x)for(n.sort(W);l--;)(o=n.pop()).f>0&&r.del(o.o);o={o:e},n.push(o),n[i]=o}o.v=t,o.f=1,o.t=a++},del(e){e=C+e;let t=this.c,r=t[e],n=this.r;r&&(r.f=-1,r.v=f,delete t[e],n&&X(n,r.o))},has(e){return Y(this.c,C+e)}});let te=(t,r)=>{e.use(t&&t+f,(e,...t)=>{r&&r.apply(e,t)})},re=e.extend,ne=r.test;function ie(e,t){t=this,e.eventTarget=t.e,X(t.f,e,t.v)}let oe=(e,r,n,i,o)=>{o?t[`${i?"un":f}delegate`](e,r,n,o):t[i?"detach":"on"](e,r,n,o)},le=e=>e;let ae,fe=new ee,se=0,de=(e,t,r)=>{try{r=decodeURIComponent(r)}catch(e){}ae[t]=r},$e=e=>{let t,r=fe.get(e);return r||(ae={},e==(t=e.replace(N,f))&&H.test(t)&&(t=f),e.replace(t,f).replace(O,de),fe.set(e,r={a:t,b:ae})),{path:r.a,params:{...r.b}}},he=(e,t,r)=>{let n,i,o,l=[];for(i in t)n=t[i]+f,(!r||n||Y(r,i))&&(n=encodeURIComponent(n),l.push(o=i+"="+n));return o&&(e+=(e&&(~e.indexOf("?")?"&":"?"))+l.join("&")),e},ue=(e,t)=>{let r,n={};if(e)for(r of e)n[t&&r?r[t]:r]=t?r:1+(0|n[r]);return n},ce=new ee,pe=(e,t,r)=>(ce.has(e)?r=ce.get(e):(r=X(Function(`return ${e}`)),e.indexOf(C)>-1?G(t,r):ce.set(e,r)),r),me={config:(e,t)=>(t=_,e&&(t=o(e)?D(t,e):t[e]),t),boot(e){D(_,e),te(_.ini,t=>{D(_,t,e),te(_.exts,()=>{ze.on(v,Xe),Ve.on(v,Xe),se=1,Re()})})},toMap:ue,toTry:X,toUrl:he,parseUrl:$e,mix:D,has:Y,keys:z,inside:B,node:L,applyStyle:K,guid:M,use:te,Cache:ee,nodeId:Q,guard:le},ge={fire(e,t,r,n){let i,o,l,a,s=this,d=s[C+e];if(t||(t={}),t.type=e,d)for(o=(i=d.length)-1;i--;)(a=d[l=n?i:o-i]).f?(a.x=1,X(a.f,t,s),a.x=f):a.x||(d.splice(l,1),o--);return(d=s[`on${e}`])&&X(d,t,s),r&&s.off(e),s},on(e,t){let r=C+e;return(this[r]||(this[r]=[])).push({f:t}),this},off(e,t){let r,n=C+e,i=this,o=i[n];if(t){if(o)for(r of o)if(r.f==t){r.f=f;break}}else delete i[n],delete i[`on${e}`];return i}};me.Event=ge;let be={},ve={},ye={},we=0,xe=e=>{e=(e+f).split(",");for(let t of e)Y(ve,t)?ve[t]++:ve[t]=1;return e},ke=e=>{let t,r;for(t of e)Y(ve,t)&&((r=--ve[t])||(delete ve[t],delete be[t]))};let Ve={get(e){let t=e?be[e]:be;return t},set(e,t){return we=Z(e,be,ye,t)||we,this},digest(e,t){e&&Ve.set(e,t),we&&(we=0,this.fire(v,{keys:ye}),ye={})},diff:()=>ye,clean:e=>({ctor(){e=xe(e),this.on("destroy",()=>ke(e))}}),...ge};me.State=Ve;let Ie,Te="view",Se=new ee,Ce=new ee,je=h.location,qe=0,Ae={query:{},params:{},href:f},Ue=/(?:^.*\/\/[^\/]+|#.*$)/gi,Ee=/^[^#]*#?!?/;function Ne(e,t){return this[A][e]||t!==u&&t||f}let Oe,He,Me,Pe,_e,Le=(e,t)=>{e="#!"+e,t?je.replace(e):je.hash=e},Re=()=>{let e,t,r=Be().srcHash;oe(h,"hashchange",(n,i,o)=>{t||(i=Be(),(e=i.srcHash)!=r&&(o=(()=>{n.p=1,r=e,t=f,Le(e),De()}),n={reject(){n.p=1,t=f,Le(r)},resolve:o,prevent(){t=1}},ze.fire(y,n),t||n.p||o()))}),oe(h,"beforeunload",(e,t,r)=>{if(e=e||h.event,t={},ze.fire(w,t),r=t.msg)return e&&(e.returnValue=r),r}),De()},Ze=c.title,Be=e=>{e=e||je.href;let t,r,n,i,l,a=Se.get(e);return a||(a={get:Ne,href:e,srcQuery:t=e.replace(Ue,f),srcHash:r=e.replace(Ee,f),query:n=$e(t),hash:i=$e(r),params:l={...n[A],...i[A]}},se&&(((e,t)=>{if(Oe||(Oe=_.routes||{},He=_.unmatchView,Me=_.defaultView,Pe=_.defaultPath||"/",_e=_.rewrite),!e[Te]){let r=e.hash[U]||Pe;_e&&(r=_e(r,e[A],Oe)),t=Oe[r]||He||Me,e[U]=r,e[Te]=t,o(t)&&D(e,t)}})(a),Se.set(e,a))),a},De=()=>{let e=Be(),t=((e,t)=>{let r=e.href,n=t.href,i=r+C+n,o=Ce.get(i);if(!o){let n,l;o={params:l={},force:!r};let a,f=e[A],s=t[A],d=z(f).concat(z(s)),$=e=>{let t=f[e],r=s[e];t!=r&&(l[e]={from:t,to:r},n=1)};for(a of d)$(a);f=e,s=t,l=o,$(U),$(Te),Ce.set(i,o={a:n,b:o})}return o})(Ae,Ae=e);return!qe&&t.a&&((Ie=t.b)[U]&&(c.title=e.title||Ze),ze.fire(v,Ie)),qe=0,Ie},ze={parse:Be,diff:De,to(e,t,r,n){!t&&o(e)&&(t=e,e=f);let i=$e(e),l=i[A],a=i[U],s=Ae[U],d=Ae[A],$=Ae.query[A];if(D(l,t),a)for(s in $)Y(l,s)||(l[s]=f);else d&&(a=s,l={...d,...l});var h,u,c,p;u=Ae,c=r,p=n,(h=he(h=a,l,$))!=u.srcHash&&(qe=p,Le(h,c))},...ge};me.Router=ze;let Fe,Je,Ke=0,Qe=(e,t,r,n,i,o)=>{if(e&&e.$a!=Ke&&(r=e.$v)&&r.$a>1){(t?((e,t,r)=>{let n,i=e.$os;if(i)for(n of i)if(r=Y(t,n))break;return r})(r,t):Yt(r))&&r.$b(),i=e.children();for(o of i)Qe(Ye[o],t)}},Xe=(e,t,r)=>{t=tt(),(r=e[Te])?t.mountView(r.to):(Ke=a++,Qe(t,e.keys))},Ye={},Ge=e=>{if(!e.$b&&!e.$d&&e.$cc==e.$rc){e.$cr||(e.$cr=1,e.$ca=0,e.fire("created"));let{id:t,pId:r}=e,n=Ye[r];n&&!Y(n.$e,t)&&(n.$e[t]=1,n.$rc++,Ge(n))}},We=(e,t)=>{if(!e.$ca&&e.$cr){e.$cr=0,e.$ca=1,e.fire("alter",t);let{id:r,pId:n}=e,i=Ye[n];i&&Y(i.$e,r)&&(i.$rc--,delete i.$e[r],We(i,t))}},et=(e,t,r,n)=>(n=(n=(n=Ye[e])&&n.$v)?n.$d.$a:{},t.indexOf(C)>0&&G(n,r),n),tt=e=>(Fe||(T=c.body,e=_.rootId,L(e)||(T.id=e),Fe=new ot(e)),Fe),rt=(e,t)=>{Y(Ye,e)||(Ye[e]=t,ot.fire("add",{vframe:t}),(e=L(e))&&(e.vframe=t))},nt=(e,t,r)=>{for(t=e.$f;t.length;)(r=t.shift()).r||e.invoke(r.n,r.a),delete t[r.k]},it=[];function ot(e,t,r){(r=this).id=e,r.$c={},r.$cc=0,r.$rc=0,r.$g=r.$g||1,r.$e={},r.$f=[],r.pId=t,rt(e,r)}D(ot,{all:()=>Ye,get:e=>Ye[e]},ge),D(ot[q],ge,{mountView(e,t){let r,n,i,o,l,a=this,s=a.id,d=L(s),$=a.pId;!a.$h&&d&&(a.$h=1,a.$i=d.innerHTML),a.unmountView(),a.$b=0,r=$e(e||f),i=r[U],d&&i&&(a[U]=e,o=r[A],et($,e,o),a.$j=r[U],D(o,t),n=a.$g,te(i,e=>{if(n==a.$g){if(!e)return _.error(Error(`id:${s} cannot load:${i}`));l=Xt(e),i=new e(s,a,o,d,l),a.$v=i,a.$a=Ke,Ft(i),(o=X(i.init,[o,{node:d,deep:!i.tmpl}],i))||(o={then:e=>e()}),n=++a.$g,o.then(()=>{n==a.$g&&(i.$b(),i.tmpl||(a.$h=0,i.$e||i.endUpdate()))})}}))},unmountView(){let e,t,r=this,{$v:n,id:o}=r;r.$f=[],n&&(Je||(t=1,Je={id:o}),r.$b=1,r.unmountZone(0,1),We(r,Je),r.$v=0,n.$a>0&&(n.$a=0,delete dt[o],delete $t[o],n.fire("destroy",0,1,1),Bt(n,1),Ft(n,1),n.owner=0),n.$a--,(e=L(o))&&r.$h&&i(e).html(r.$i),t&&(Je=0)),r.$g++},mountVframe(e,t,r){let n,i=this,o=i.id,l=i.$c;return We(i,{id:e}),(n=Ye[e])||(Y(l,e)||(i.$n=0,i.$cc++),l[e]=e,(n=it.pop())?ot.call(n,e,o):n=new ot(e,o)),n.mountView(t,r),n},mountZone(e,t){let r,n,o=this,l=[];e=e||o.id;let a=i(`#${e} [${E}]`);o.$d=1;for(r of a)r.$b||(n=Q(r),r.$b=1,l.push([n,m(r,E)]));for([n,r]of l)o.mountVframe(n,r);o.$d=0,t||Ge(o)},unmountVframe(e,t){let r;if(e=e?this.$c[e]:this.id,r=Ye[e]){let{$cr:l,pId:a}=r;r.unmountView(),i=l,(o=Ye[n=e])&&(delete Ye[n],ot.fire("remove",{vframe:o,fcc:i}),(n=L(n))&&(n.$b=0,n.vframe=0,n.$a=0)),r.id=r.pId=r.$c=r.$e=0,r.$h=0,r.off("alter"),r.off("created"),it.push(r),(r=Ye[a])&&Y(r.$c,e)&&(delete r.$c[e],r.$n=0,r.$cc--,t||Ge(r))}var n,i,o},unmountZone(e,t){let r,n=this;for(r in n.$c)(!e||r!=e&&B(r,e))&&n.unmountVframe(r,1);t||Ge(n)},parent(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=Ye[t.pId];return t},children(e){return(e=this).$n||(e.$n=z(e.$c))},invoke(e,t){let r,n,i,o,l,a=this.$f;return(n=this.$v)&&n.$e?r=(i=n[e])&&X(i,t,n):((o=a[l=C+e])&&(o.r=t===o.a),o={n:e,a:t,k:l},a.push(o),a[l]=o),r}}),me.Vframe=ot,n[q].invokeView=function(e,t){let r,n,i=[];for(r of this)n=r.vframe,i.push(n&&n.invoke(e,t));return i};let lt=new ee(30,10),at=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,ft={},st={},dt={},$t={},ht=0,ut=(e,t)=>{let r,n,i,o,l,a,f=[],d=e,$=m(e,`mx-${t}`),h=[],u=V,c=0;if($&&((l=lt.get($))||(l={v:(l=$.match(at)||s)[1],n:l[2],i:l[3]},lt.set($,l)),l={...l,r:$}),l&&!l.v||st[t]){if((i=$t[n=d.$d])&&1==i[d.$e]&&(a=1,u=n),!a){for(h.push(d);d!=T&&(d=d.parentNode);){if(Ye[n=d.id]||(i=$t[n=d.$d])&&1==i[d.$e]){u=n;break}h.push(d)}for($ of h)(n=$t[u])||(n=$t[u]={}),n[i=$.$e||($.$e=++ht)]=1,$.$d=u}d=e.id,Ye[d]&&(c=u=d);do{if((r=Ye[u])&&(a=r.$v)){if(o=(i=a.$so)[t])for(d=o.length;d--;)i={r:n=o[d],v:u,n:n},n?!c&&ne(e,n)&&f.push(i):c&&f.unshift(i);if(a.tmpl&&!c){l&&!l.v&&(l.v=u);break}c=0}}while(r&&(u=r.pId))}return l&&f.push(l),f},ct=e=>{let t,r,n,i,o,l,a,f,{target:s,type:d}=e,$=[];for(;s!=T;){if((t=ut(s,d)).length){$=[];for(let{v:r,r:$,n:h,i:u}of t){if(a!=r){if(a&&e.isPropagationStopped())break;a=r}(i=(n=Ye[r])&&n.$v)?(l=i[o=h+C+d])&&(e.eventTarget=s,f=u?pe(u,i.$d.$a):{},e[A]=f,X(l,e,i)):e.stopPropagation()}}if((r=dt[l=s.$d])&&(r=r[s.$e])&&r[d]||e.isPropagationStopped()){$.length&&$.push(l);break}a=s.id,Ye[a]&&$.push(a),$.push(s),s=s.parentNode||T}if(l=$.length)for(r=V;l--;)(i=$[l]).nodeType?((t=dt[r])||(t=dt[r]={}),(f=t[a=i.$e||(i.$e=++ht)])||(f=t[a]={}),f[d]=1):r=i},pt=(e,t,r)=>{let n=0|ft[e],i=r?-1:1;n&&r!==n||oe(T,e,ct,r),ft[e]=n+i,t&&(st[e]=(0|st[e])+i)},mt="http://www.w3.org/2000/svg",gt="http://www.w3.org/1998/Math/MathML",bt={option:[1,"<select multiple>"],thead:[1,"<table>"],col:[2,"<table><colgroup>"],tr:[2,"<table><tbody>"],td:[3,"<table><tbody><tr>"],area:[1,"<map>"],param:[1,"<object>"],g:[1,`<svg xmlns="${mt}">`],m:[1,`<math xmlns="${gt}">`],_:[0,""]},vt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;bt.optgroup=bt.option,bt.tbody=bt.tfoot=bt.colgroup=bt.caption=bt.thead,bt.th=bt.td;let yt=c.implementation.createHTMLDocument(f),wt=yt.createElement("base");wt.href=c.location.href,yt.head.appendChild(wt);let xt=(e,t)=>{if(1==t.nodeType){let r=Q(t);e.$c[r]?e.unmountVframe(r,1):e.unmountZone(r,1)}},kt={INPUT:[x,"checked"],TEXTAREA:[x],OPTION:["selected"]},Vt=(e,t)=>(1==e.nodeType&&(e.$f?t=e.$g:((t=e.$a?f:m(e,"id"))||(t=m(e,k)),t||(t=m(e,E))&&(t=$e(t)[U]),e.$f=1,e.$g=t)),t),It=(e,t,r,n,i)=>{let o,l,a,f,s,d=e.lastChild,$=t.firstChild,h=0,u={},c={};for(;d;)h++,(a=Vt(d))&&(a=u[a]||(u[a]=[])).push(d),d=d.previousSibling;for(;$;)(a=Vt($))&&(c[a]=(c[a]||0)+1),$=$.nextSibling;for($=t.firstChild,d=e.firstChild;$;)if(h--,o=$,$=$.nextSibling,(f=u[a=Vt(o)])&&(f=f.pop())){for(;f!=d;)s=d.nextSibling,e.appendChild(d),d=s;d=f.nextSibling,c[a]&&c[a]--,Tt(f,o,e,r,n,i)}else d?(a=Vt(l=d))&&u[a]&&c[a]?(h++,r.c=1,r.n.push([8,e,o,l])):(d=d.nextSibling,Tt(l,o,e,r,n,i)):(r.c=1,r.n.push([1,e,o]));for(l=e.lastChild;h-- >0;)xt(n,l),r.n.push([2,e,l]),l=l.previousSibling,r.c=1},Tt=(e,t,r,n,i,o)=>{if(((e,t)=>{let r,n=e.nodeName,i=kt[n],o=0;if(i)for(r of i)e[r]!=t[r]&&(o=1,e[r]=t[r]);return o})(e,t)||1==e.nodeType&&e.hasAttribute("mxv")||!e.isEqualNode||!e.isEqualNode(t))if(e.nodeName===t.nodeName)if(1===e.nodeType){let r=m(t,k);if(r&&r==m(e,k))return;let l,a,s,$,h,u,c,p=m(t,E),g=t.innerHTML,b=m(t,"mxa"),v=!b||b!=m(e,"mxa"),y=Ye[m(e,"id")],w=p&&$e(p);if(p&&y&&(!m(t,"id")||m(t,"id")==m(e,"id"))&&y.$j==w[U]&&($=y.$v)){if(u=g!=y.$i,c=p!=y[U],s=m(e,"mxv"),!u&&!c&&s){h=s.split(d);for(s of h)if(s==V||Y(o,s)){c=1;break}}(c||u)&&((s=$.$e&&$.$f)?(h=w[A],et(y.pId,p,h),y.$i=g,y[U]=p,w={node:t,deep:!$.tmpl,attr:v,inner:u,query:c,keys:o},X(s,[h,w],$)&&n.v.push($),l=w.deep):(a=1,l=1))}else l=1,a=y;a&&(n.c=1,y.unmountVframe(0,1)),v&&((e,t,r,n)=>{let i,o,l,a;delete e.$f;let s=e.attributes,d=t.attributes;for(o=s.length;o--;)i=s[o].name,t.hasAttribute(i)||("id"==i?n||r.d.push([e,f]):(r.c=1,e.removeAttribute(i)));for(o=d.length;o--;)l=(i=d[o]).name,a=i[x],m(e,l)!=a&&("id"==l?r.d.push([e,a]):(r.c=1,e.setAttribute(l,a)))})(e,t,n,y&&p),l&&It(e,t,n,i,o)}else e.nodeValue!==t.nodeValue&&(n.c=1,e.nodeValue=t.nodeValue);else xt(i,e),n.c=1,n.n.push([4,r,t,e])},St={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},Ct=/[&<>"'\`]/g,jt=e=>""+(null==e?"":e),qt=e=>`&${St[e]};`,At=e=>jt(e).replace(Ct,qt),Ut=(e,t,r,n)=>{for(n=e[C];--n;)if(e[r=C+n]===t)return r;return e[r=C+e[C]++]=t,r},Et={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},Nt=e=>Et[e],Ot=/[!')(*]/g,Ht=e=>encodeURIComponent(jt(e)).replace(Ot,Nt),Mt=/[\\'"]/g,Pt=e=>jt(e).replace(Mt,"\\$&"),_t=(e,t)=>{let r,n,i=e.$k,o=e.$c,l=e.$b,a=Ye[l],f=a&&a.$v,s={d:[],v:[],n:[]},d=L(l),$=e.$d,h=e.$a,u=r=>{t.i<t.length?_t(e,t):(s=t.slice(),t.i=t.length=0,r&&f.fire("domready"),X(s))};if(t.i=t.length,e.$c=0,e.$k={},o&&f&&f.$a>0&&(r=f.tmpl)&&f.$d==e){f.fire("dompatch"),delete dt[l],delete $t[l],n=((e,t)=>{let r,n=yt.createElement("div"),i=t.namespaceURI;r=i==mt?"g":i==gt?"m":(vt.exec(e)||[0,""])[1];let o=bt[r]||bt._;n.innerHTML=o[1]+e;let l=o[0];for(;l--;)n=n.lastChild;return n})(r($,l,h,At,jt,Ht,Ut,Pt),d),It(d,n,s,a,i);for(n of s.d)n[0].id=n[1];for(n of s.n)1==n[0]?n[1].appendChild(n[2]):2==n[0]?n[1].removeChild(n[2]):4==n[0]?n[1].replaceChild(n[2],n[3]):n[1].insertBefore(n[2],n[3]);a.$d=r=s.c||!f.$e;for(n of s.v)n.$b();r&&f.endUpdate(l),s.c&&g.fire("htmlchanged",{vId:l}),u(1)}else u()};function Lt(e){let t=this;t.$b=e,t.$c=1,t.$d={vId:e},t.$a={[C]:1},t.$e=[],t.$k={}}D(Lt[q],{get(e,t){return t=this.$d,e&&(t=t[e]),t},set(e,t){let r=this;return r.$c=Z(e,r.$d,r.$k,t)||r.$c,r},digest(e,t,r){let n=this.set(e,t),i=n.$e;r&&i.push(r),i.i||_t(n,i)},snapshot(){return this.$f=S(this.$d),this},altered(){let e=this;if(e.$f)return e.$f!=S(e.$d)},translate(e){return G(this.$d,e)},parse(e){return pe(e,this.$a)}});let Rt=/^(\$?)([^<]*)<([^>]+)>(?:&(.+))?$/,Zt=(e,t,r)=>(e.a?r=e:((r=function(e){X(r.a,e,this)}).a=[e],r.b=1),r.a=r.a.concat(t.a||t),r),Bt=(e,t)=>{let r,n,i=e.$r;for(r in i)n=i[r],(t||n.x)&&Dt(i,r,1)},Dt=(e,t,r,n)=>{let i,o,l=e[t];return l&&l!=n&&((i=(o=l.e).destroy)&&r&&X(i,s,o),delete e[t]),o},zt=(e,t,r,n,i)=>{n=e[t],e[t]=e[r]=function(...e){(i=this).$a>0&&(i.$a++,i.fire("rendercall"),Bt(i),X(n,e,i))}},Ft=(e,t)=>{let r,{$eo:n,$so:i,$el:o,id:l}=e;for(r in n)pt(r,i[r],t);for(r of o)oe(r.e,r.n,ie,t,{i:l,v:e,f:r.f,m:r.m,e:r.e})},Jt={win:h,doc:c},Kt=(e,t,r)=>{let n,i,o,l,a={};for(i of e)for(n in i)o=i[n],l=a[n],"ctor"!=n?(Rt.test(n)&&(l?o=Zt(l,o):o.b=1),a[n]=o):r.push(o);for(n in a)Y(t,n)||(t[n]=a[n])};function Qt(...e){let t=this._||(this._=[]);return Kt(e,this[q],t),this}let Xt=e=>{if(!e[C]){e[C]=[];let t,r,n,i,o,l,a,f,s,$,h,u=e[q],c={},p=[],m={};(r=u.mixins)&&Kt(r,u,e[C]);for(a in u)if(t=u[a],r=a.match(Rt)){if([,l,n,i,h]=r,$={},h){h=h.split(d);for(f of h)$[f]=!0}i=i.split(d);for(f of i){if(o=Jt[n],s=1,l){if(o){p.push({f:t,e:o,n:f,m:$});continue}s=2,(o=m[f])||(o=m[f]=[]),o[n]||(o[n]=1,o.push(n))}c[f]=c[f]|s,(o=u[f=n+C+f])?o.b&&(t.b?u[f]=Zt(t,o):Y(u,a)&&(u[f]=t)):u[f]=t}}zt(u,"render","$b"),u.$eo=c,u.$el=p,u.$so=m,u.$f=u.assign}return e[C]},Yt=e=>{let t,r,n,i=e.$l;if(i.f&&(i.p&&(t=Ie[U]),!t&&i.k)){n=Ie[A];for(r of i.k)if(t=Y(n,r))break}return t};function Gt(e,t,r,n,i){(i=this).owner=t,i.id=e,i.$l={k:[]},i.$r={},i.$a=1,i.updater=i.$d=new Lt(i.id),(e=Gt._)&&X(e,[r,{node:n,deep:!i.tmpl}],i)}D(Gt,{merge:Qt,extend:function e(t,r){let n=this,i=(t=t||{}).ctor,o=[];function l(e,t,r,i,a,f,s,d,$){n.call(s=this,e,t,r,i,a),f=l._,d=[r,{node:i,deep:!s.tmpl}],f&&X(f,d,s),($=o.concat(a)).length&&X($,d,s)}return i&&o.push(i),l.merge=Qt,l.extend=e,re(l,n,t,r)}}),D(Gt[q],ge,{init:I,beginUpdate(e,t){(t=this).$a>0&&t.$e&&t.owner.unmountZone(e,1)},endUpdate(e,t,r,n,i){(r=this).$a>0&&(e=e||r.id,t?i=t:(i=r.$e,r.$e=1),(n=r.owner).mountZone(e,t),i||b(r.wrapAsync(nt),0,n))},wrapAsync(e,t){let r=this,n=r.$a;return(...i)=>{if(n>0&&n==r.$a)return e.apply(t||r,i)}},observeLocation(e,t){let r;(r=this.$l).f=1,o(e)&&(t=e[U],e=e[A]),r.p=t,e&&(r.k=(e+f).split(d))},observeState(e){this.$os=(e+f).split(d)},capture(e,t,r,n){return n=this.$r,t?(Dt(n,e,1,t),n[e]={e:t,x:r}):t=(n=n[e])&&n.e,t},release(e,t){return Dt(this.$r,e,t)},leaveTip(e,t){let r=this,n=i=>{let o="a",l="b";i.type!=y&&(o="b",l="a"),n[o]?(i.prevent(),i.reject()):t()&&(i.prevent(),n[l]=1,r.leaveConfirm(()=>{n[l]=0,i.resolve()},()=>{n[l]=0,i.reject()},e))},i=r=>{t()&&(r.msg=e)};ze.on(y,n),ze.on(w,i),r.on("unload",n),r.on("destroy",()=>{ze.off(y,n),ze.off(w,i)})},render:I}),me.View=Gt;let Wt=e.type,er=e.now;function tr(){this.id=M("b"),this.$={}}D(tr[q],{get(e,t){let r,n=this.$;if(e){let t,r=l(e)?e.slice():(e+f).split(".");for(;(t=r.shift())&&n;)n=n[t];t&&(n=u)}return t!==u&&(r=Wt(t))!=Wt(n)&&(n=t),n},set(e,t){o(e)||(e={[e]:t}),D(this.$,e)}});function rr(e,t,r){(r=this[e])&&(delete this[e],X(r,t,r.e))}let nr=(e,t,r,n,i,o)=>{let l=[],a=$,f=0;return function(s,d){f++;let h,u,c=this,p=c.$b,m=p.k;if(l[s+1]=c,d?(a=d,h=1):o.has(m)||(m&&o.set(m,c),p.t=er(),(u=p.a)&&X(u,c,c),(u=p.x)&&t.clear(u),h=1),!r.$d){let t=f==n;t&&(r.$e=0,2==i&&(l[0]=a,X(e,l,r))),1==i&&X(e,[d||$,c,t,s],r)}h&&t.fire("end",{bag:c,error:d})}},ir=(e,t,r,n,i)=>{if(e.$d)return e;if(e.$e)return e.enqueue(ir.bind(e,e,t,r,n,i));e.$e=1,l(t)||(t=[t]);let o=e.constructor,a=0,f=o.$f,s=nr(r,o,e,t.length,n,o.$c);for(let e of t)if(e){let t,r=o.get(e,i),n=r.e,l=n.$b.k,d=s.bind(n,a++);l&&f[l]?f[l].push(d):r.u?(l&&((t=[d]).e=n,f[l]=t,d=rr.bind(f,l)),o.$s(n,d)):d()}return e};function or(){let e=this;e.id=M("s"),e.$g=[]}D(or[q],{all(e,t){return ir(this,e,t,2)},save(e,t){return ir(this,e,t,2,1)},one(e,t){return ir(this,e,t,1)},enqueue(e){let t=this;return t.$d||(t.$g.push(e),t.dequeue(t.$h)),t},dequeue(...e){let t,r=this;r.$e||r.$d||(r.$e=1,b(()=>{r.$e=0,r.$d||(t=r.$g.shift())&&X(t,r.$h=e)},0))},destroy(e){(e=this).$d=1,e.$g=0}});let lr=(e,t)=>[S(t),S(e)].join(C),ar=(e,t,r,n)=>{(n=e&&e.$b)&&t[n.n]&&r.del(n.k)},fr={add(e){let t,r=this.$b;l(e)||(e=[e]);for(t of e)if(t){let{name:e,cache:n}=t;t.cache=0|n,r[e]=t}},create(e){let t=this.meta(e),r=0|e.cache||t.cache,n=new tr;n.set(t),n.$b={n:t.name,a:t.after,x:t.cleans,k:r&&lr(t,e)},o(e)&&n.set(e);let i=t.before;return i&&X(i,n,n),this.fire("begin",{bag:n}),n},meta(e){return this.$b[e.name||e]||e},get(e,t){let r,n,i=this;return t||(r=i.cached(e)),r||(r=i.create(e),n=1),{e:r,u:n}},clear(e){this.$c.each(ar,ue((e+f).split(d)))},cached(e){let t,r,n=this,i=n.$c,o=n.meta(e),l=0|e.cache||o.cache;if(l&&(r=lr(o,e)),r){let e=n.$f[r];e?t=e.e:(t=i.get(r))&&er()-t.$b.t>l&&(i.del(r),t=0)}return t},...ge};return or.extend=((e,t,r)=>{function n(){or.call(this)}return n.$s=e,n.$c=new ee(t,r),n.$f={},n.$b={},re(n,or,$,fr)}),me.Service=or,D(I[q],ge),I.extend=function e(t,r){let n=this,i=t&&t.ctor;function o(...e){n.apply(this,e),i&&i.apply(this,e)}return o.extend=e,re(o,n,t,r)},me.Base=I,e.add(P,()=>Gt.extend()),me},{requires:["event","dom","node"]});