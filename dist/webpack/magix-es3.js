/*!3.8.12 MIT kooboy_li@163.com*/module.exports=function(){var d=require("$"),l=d.isPlainObject,I=d.isArray,f=0,x="",p=[],A=",",T=null,u=window,o=void 0,n=document,w=d(n),a=u.setTimeout,r="changed",c="change",s="pageunload",k="value",V="mxs",C="#";function t(){}var g,i=JSON.stringify,S="\x1e",e="object",q="prototype",U="params",j="path",N="mx-view",h=/[#?].*$/,v=/([^=&?\/#]+)=?([^&#?]*)/g,$=/(?!^)=|&/,m=function(t){return(t||"mx_")+f++},b=m(),y={rootId:m(),defaultView:b,error:function(t){throw t}},E=function(t){return typeof t==e?t:n.getElementById(t)},P=function(t){return!t||typeof t!=e},H=function(t,e,n,r){var i,o,f,u=0;for(f in t)i=t[f],o=e[f],P(i)&&o===i||z(r,f)||(u=n[f]=1),e[f]=i;return u},M=function(t,e,n){if(t=E(t),e=E(e),t&&e&&!(n=t==e))try{n=16==(16&e.compareDocumentPosition(t))}catch(t){}return n};function O(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])z(e,i)&&(t[i]=e[i]);return t}var _=function(t,e,n){for(n in e=[],t)z(t,n)&&e.push(n);return e},L=y.hasOwnProperty,R=d("head"),Z=function(t,e){e&&!Z[t]&&(Z[t]=1,R.append("<style>"+e))},B=function(t){return t.id||(t.$a=1,t.id=m())},D=function(t,e,n,r,i){e=e||p,I(t)||(t=[t]),I(e)||(e=[e]);for(var o=0,f=t;o<f.length;o++){i=f[o];try{r=i&&i.apply(n,e)}catch(t){y.error(t)}}return r},z=function(t,e){return t&&L.call(t,e)},F=function(t,e){var n,r;if(P(e))(n=e+x)[0]==S&&z(t,n)&&(e=t[n]);else for(n in e)r=e[n],r=F(t,r),e[n]=r;return e},J=function(t,e){return e.f-t.f||e.t-t.t};function Q(t,e,n,r){(r=this).c=[],r.b=e||5,r.x=r.b+(t||20),r.r=n}O(Q[q],{get:function(t){var e=this.c[S+t];return e&&(e.f++,e.t=f++,e=e.v),e},each:function(t,e,n){for(var r=0,i=(n=this).c;r<i.length;r++)t(i[r].v,e,n)},set:function(t,e){var n=this.c,r=S+t,i=n[r],o=this.b;if(!i){if(n.length>=this.x)for(n.sort(J);o--;)0<(i=n.pop()).f&&this.del(i.o);i={o:t},n.push(i),n[r]=i}i.v=e,i.f=1,i.t=f++},del:function(t){t=S+t;var e=this.c,n=e[t],r=this.r;n&&(n.f=-1,n.v=x,delete e[t],r&&D(r,n.o))},has:function(t){return z(this.c,S+t)}});var X,G=d.isFunction,K=y.views={},W=function(t,e){if(K[b]||(K[b]=X),!t)return e();I(t)||(t=[t]);for(var n,r=[],i=0,o=function(){i||e.apply($t,r)},f=function(t,e,n){(t=t(n=function(t){r[e]||(i--,r[e]=t,o())})).then&&t.then(n)},u=0;u<t.length;u++)n=K[t[u]],G(n)&&!n.extend?(i++,f(n,u)):r[u]=K[t[u]];o()};function Y(){}var tt,et=function(t,e,n,r,i){return Y[q]=e[q],O(i=new Y,n),O(t,r),(i.constructor=t)[q]=i,t},nt=d.find||d.zepto,rt=nt.matchesSelector||nt.matches,it=function(t,e){e=t.data,t.eventTarget=e.e,D(e.f,t,e.v)},ot=function(t,e,n,r,i){i&&(e+="."+i.i),r?d(t).off(e,n):d(t).on(e,i,n)},ft=function(t){return t},ut=new Q,at=0,ct=function(t,e,n){try{n=decodeURIComponent(n)}catch(t){}tt[e]=n},st=function(t){var e,n=ut.get(t);return n||(tt={},t==(e=t.replace(h,x))&&$.test(e)&&(e=x),t.replace(e,x).replace(v,ct),ut.set(t,n={a:e,b:tt})),{path:n.a,params:O({},n.b)}},ht=function(t,e,n){var r,i,o,f=[];for(i in e)r=e[i]+x,(!n||r||z(n,i))&&(r=encodeURIComponent(r),f.push(o=i+"="+r));return o&&(t+=(t&&(~t.indexOf("?")?"&":"?"))+f.join("&")),t},dt=function(t,e){var n,r={};if(t)for(var i=0,o=t;i<o.length;i++)n=o[i],r[e&&n?n[e]:n]=e?n:1+(0|r[n]);return r},vt=new Q,lt=function(t,e,n){return vt.has(t)?n=vt.get(t):(n=D(Function("return "+t)),-1<t.indexOf(S)?F(e,n):vt.set(t,n)),n},$t={config:function(t,e){return e=y,t&&(e=l(t)?O(e,t):e[t]),e},boot:function(e){O(y,e),W(y.ini,function(t){O(y,t,e),W(y.exts,function(){Dt.on(r,Xt),kt.on(r,Xt),at=1,Lt()})})},toMap:dt,toTry:D,toUrl:ht,parseUrl:st,mix:O,has:z,keys:_,inside:M,node:E,applyStyle:Z,guid:m,use:W,Cache:Q,nodeId:B,guard:ft},pt={fire:function(t,e,n,r){var i,o,f,u,a=this,c=a[S+t];if(e||(e={}),e.type=t,c)for(o=(i=c.length)-1;i--;)(u=c[f=r?i:o-i]).f?(u.x=1,D(u.f,e,a),u.x=x):u.x||(c.splice(f,1),o--);return(c=a["on"+t])&&D(c,e,a),n&&a.off(t),a},on:function(t,e){var n=S+t;return(this[n]||(this[n]=[])).push({f:e}),this},off:function(t,e){var n,r=S+t,i=this[r];if(e){if(i)for(var o=0,f=i;o<f.length;o++)if((n=f[o]).f==e){n.f=x;break}}else delete this[r],delete this["on"+t];return this}};$t.Event=pt;var gt={},mt={},bt={},wt=0,yt=function(t){for(var e=0,n=t=(t+x).split(",");e<n.length;e++){var r=n[e];z(mt,r)?mt[r]++:mt[r]=1}return t},xt=function(t){for(var e,n=0,r=t;n<r.length;n++)e=r[n],z(mt,e)&&(--mt[e]||(delete mt[e],delete gt[e]))};var kt=O({get:function(t){var e=t?gt[t]:gt;return e},set:function(t,e){return wt=H(t,gt,bt,e)||wt,this},digest:function(t,e){(t&&kt.set(t,e),wt)&&(wt=0,this.fire(r,{keys:bt}),bt={})},diff:function(){return bt},clean:function(t){return{ctor:function(){t=yt(t),this.on("destroy",function(){return xt(t)})}}}},pt);$t.State=kt;var Vt,At="view",It=new Q,Tt=new Q,Ct=u.location,St=0,qt={query:{},params:{},href:x},Ut=/(?:^.*\/\/[^\/]+|#.*$)/gi,jt=/^[^#]*#?!?/;function Nt(t,e){return this[U][t]||e!==o&&e||x}var Et,Pt,Ht,Mt,Ot,_t=function(t,e){t="#!"+t,e?Ct.replace(t):Ct.hash=t},Lt=function(){var r,i,o=Zt().srcHash;ot(u,"hashchange",function(t,e,n){i||(e=Zt(),(r=e.srcHash)!=o&&(n=function(){t.p=1,i=x,_t(o=r),Bt()},t={reject:function(){t.p=1,i=x,_t(o)},resolve:n,prevent:function(){i=1}},Dt.fire(c,t),i||t.p||n()))}),ot(u,"beforeunload",function(t,e,n){if(t=t||u.event,e={},Dt.fire(s,e),n=e.msg)return t&&(t.returnValue=n),n}),Bt()},Rt=n.title,Zt=function(t){t=t||Ct.href;var e,n,r,i,o=It.get(t);return o||(o={get:Nt,href:t,srcQuery:e=t.replace(Ut,x),srcHash:n=t.replace(jt,x),query:r=st(e),hash:i=st(n),params:O({},r[U],i[U])},at&&(!function(t,e){if(Et||(Et=y.routes||{},Pt=y.unmatchView,Ht=y.defaultView,Mt=y.defaultPath||"/",Ot=y.rewrite),!t[At]){var n=t.hash[j]||Mt;Ot&&(n=Ot(n,t[U],Et)),e=Et[n]||Pt||Ht,t[j]=n,t[At]=e,l(e)&&O(t,e)}}(o),It.set(t,o))),o},Bt=function(){var t=Zt(),e=function(t,e){var n=t.href,r=e.href,i=n+S+r,o=Tt.get(i);if(!o){var f,u;o={params:u={},force:!n};for(var a=t[U],c=e[U],s=function(t){var e=a[t],n=c[t];e!=n&&(u[t]={from:e,to:n},f=1)},h=0,d=_(a).concat(_(c));h<d.length;h++)s(d[h]);a=t,c=e,u=o,s(j),s(At),Tt.set(i,o={a:f,b:o})}return o}(qt,qt=t);return!St&&e.a&&((Vt=e.b)[j]&&(n.title=t.title||Rt),Dt.fire(r,Vt)),St=0,Vt},Dt=O({parse:Zt,diff:Bt,to:function(t,e,n,r){!e&&l(t)&&(e=t,t=x);var i,o,f,u,a=st(t),c=a[U],s=a[j],h=qt[j],d=qt[U],v=qt.query[U];if(O(c,e),s)for(h in v)z(c,h)||(c[h]=x);else d&&(s=h,c=O({},d,c));o=qt,f=n,u=r,(i=ht(i=s,c,v))!=o.srcHash&&(St=u,_t(i,f))}},pt);$t.Router=Dt;var zt,Ft,Jt=0,Qt=function(t,e,n,r,i,o){if(t&&t.$a!=Jt&&(n=t.$v)&&1<n.$a){(e?function(t,e,n){var r,i=t.$os;if(i)for(var o=0,f=i;o<f.length&&(r=f[o],!(n=z(e,r)));o++);return n}(n,e):Je(n))&&n.$b();for(var f=0,u=t.children();f<u.length;f++)o=u[f],Qt(Gt[o],e)}},Xt=function(t,e,n){e=te(),(n=t[At])?e.mountView(n.to):(Jt=f++,Qt(e,t.keys))},Gt={},Kt=function(t){if(!t.$b&&!t.$d&&t.$cc==t.$rc){t.$cr||(t.$cr=1,t.$ca=0,t.fire("created"));var e=t.id,n=t.pId,r=Gt[n];r&&!z(r.$e,e)&&(r.$e[e]=1,r.$rc++,Kt(r))}},Wt=function(t,e){if(!t.$ca&&t.$cr){t.$cr=0,t.$ca=1,t.fire("alter",e);var n=t.id,r=t.pId,i=Gt[r];i&&z(i.$e,n)&&(i.$rc--,delete i.$e[n],Wt(i,e))}},Yt=function(t,e,n,r){return r=(r=(r=Gt[t])&&r.$v)?r.$d.$a:{},0<e.indexOf(S)&&F(r,n),r},te=function(t){return zt||(g=n.body,t=y.rootId,E(t)||(g.id=t),zt=new re(t)),zt},ee=function(t,e){z(Gt,t)||(Gt[t]=e,re.fire("add",{vframe:e}),(t=E(t))&&(t.vframe=e))},ne=[];function re(t,e,n){(n=this).id=t,n.$c={},n.$cc=0,n.$rc=0,n.$g=n.$g||1,n.$e={},n.$f=[],n.pId=e,ee(t,n)}O(re,{all:function(){return Gt},get:function(t){return Gt[t]}},pt),O(re[q],pt,{mountView:function(t,e){var n,r,i,o,f,u=this,a=u.id,c=E(a),s=u.pId;!u.$h&&c&&(u.$h=1,u.$i=c.innerHTML),u.unmountView(),u.$b=0,n=st(t||x),i=n[j],c&&i&&(u[j]=t,o=n[U],Yt(s,t,o),u.$j=n[j],O(o,e),r=u.$g,W(i,function(t){if(r==u.$g){if(!t)return y.error(Error("id:"+a+" cannot load:"+i));f=Fe(t),i=new t(a,u,o,c,f),u.$v=i,u.$a=Jt,Ze(i),(o=D(i.init,[o,{node:c,deep:!i.tmpl}],i))||(o={then:function(t){return t()}}),r=++u.$g,o.then(function(){r==u.$g&&(i.$b(),i.tmpl||(u.$h=0,i.$e||i.endUpdate()))})}}))},unmountView:function(){var t,e,n=this,r=n.$v,i=n.id;n.$f=[],r&&(Ft||(e=1,Ft={id:i}),n.$b=1,n.unmountZone(0,1),Wt(n,Ft),(n.$v=0)<r.$a&&(r.$a=0,delete ae[i],delete ce[i],r.fire("destroy",0,1,1),Le(r,1),Ze(r,1),r.owner=0),r.$a--,(t=E(i))&&n.$h&&d(t).html(n.$i),e&&(Ft=0)),n.$g++},mountVframe:function(t,e,n){var r,i=this,o=i.id,f=i.$c;return Wt(i,{id:t}),(r=Gt[t])||(z(f,t)||(i.$n=0,i.$cc++),f[t]=t,(r=ne.pop())?re.call(r,t,o):r=new re(t,o)),r.mountView(e,n),r},mountZone:function(t,e){var n,r,i=this,o=[];t=t||i.id;var f,u=d("#"+t+" ["+N+"]");i.$d=1;for(var a=0,c=u;a<c.length;a++)(n=c[a]).$b||(r=B(n),n.$b=1,o.push([r,n.getAttribute(N)]));for(var s=0,h=o;s<h.length;s++)r=(f=h[s])[0],n=f[1],i.mountVframe(r,n);i.$d=0,e||Kt(i)},unmountVframe:function(t,e){var n,r,i,o;if(t=t?this.$c[t]:this.id,n=Gt[t]){var f=n.$cr,u=n.pId;n.unmountView(),i=f,(o=Gt[r=t])&&(delete Gt[r],re.fire("remove",{vframe:o,fcc:i}),(r=E(r))&&(r.$b=0,r.vframe=0,r.$a=0)),n.id=n.pId=n.$c=n.$e=0,n.$h=0,n.off("alter"),n.off("created"),ne.push(n),(n=Gt[u])&&z(n.$c,t)&&(delete n.$c[t],n.$n=0,n.$cc--,e||Kt(n))}},unmountZone:function(t,e){var n;for(n in this.$c)(!t||n!=t&&M(n,t))&&this.unmountVframe(n,1);e||Kt(this)},parent:function(t,e){for(e=this,t=t>>>0||1;e&&t--;)e=Gt[e.pId];return e},children:function(t){return(t=this).$n||(t.$n=_(t.$c))},invoke:function(t,e){var n,r,i,o,f,u=this.$f;return(r=this.$v)&&r.$e?n=(i=r[t])&&D(i,e,r):((o=u[f=S+t])&&(o.r=e===o.a),o={n:t,a:e,k:f},u.push(o),u[f]=o),n}}),$t.Vframe=re,d.fn.invokeView=function(t,e){for(var n,r=[],i=0;i<this.length;i++)n=this[i].vframe,r.push(n&&n.invoke(t,e));return r};var ie=new Q(30,10),oe=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,fe={},ue={},ae={},ce={},se=0,he=function(t,e){var n,r,i,o,f,u,a=[],c=t,s=t.getAttribute("mx-"+e),h=[],d=C,v=0;if(s&&((f=ie.get(s))||(f={v:(f=s.match(oe)||p)[1],n:f[2],i:f[3]},ie.set(s,f)),f=O({},f,{r:s})),f&&!f.v||ue[e]){if((i=ce[r=c.$d])&&1==i[c.$e]&&(u=1,d=r),!u){for(h.push(c);c!=g&&(c=c.parentNode);){if(Gt[r=c.id]||(i=ce[r=c.$d])&&1==i[c.$e]){d=r;break}h.push(c)}for(var l=0,$=h;l<$.length;l++)s=$[l],(r=ce[d])||(r=ce[d]={}),r[i=s.$e||(s.$e=++se)]=1,s.$d=d}c=t.id,Gt[c]&&(v=d=c);do{if((n=Gt[d])&&(u=n.$v)){if(o=(i=u.$so)[e])for(c=o.length;c--;)i={r:r=o[c],v:d,n:r},r?!v&&rt(t,r)&&a.push(i):v&&a.unshift(i);if(u.tmpl&&!v){f&&!f.v&&(f.v=d);break}v=0}}while(n&&(d=n.pId))}return f&&a.push(f),a},de=function(t){for(var e,n,r,i,o,f,u,a=t.target,c=t.type,s=[];a!=g;){if((e=he(a,c)).length){s=[];for(var h=0,d=e;h<d.length;h++){var v=d[h],l=v.v,$=(v.r,v.n),p=v.i;if(f!=l){if(f&&t.isPropagationStopped())break;f=l}(i=(r=Gt[l])&&r.$v)?(o=i[$+S+c])&&(t.eventTarget=a,u=p?lt(p,i.$d.$a):{},t[U]=u,D(o,t,i)):t.stopPropagation()}}if((n=ae[o=a.$d])&&(n=n[a.$e])&&n[c]||t.isPropagationStopped()){s.length&&s.push(o);break}f=a.id,Gt[f]&&s.push(f),s.push(a),a=a.parentNode||g}if(o=s.length)for(n=C;o--;)(i=s[o]).nodeType?((e=ae[n])||(e=ae[n]={}),(u=e[f=i.$e||(i.$e=++se)])||(u=e[f]={}),u[c]=1):n=i},ve="http://www.w3.org/2000/svg",le="http://www.w3.org/1998/Math/MathML",$e={option:[1,"<select multiple>"],thead:[1,"<table>"],col:[2,"<table><colgroup>"],tr:[2,"<table><tbody>"],td:[3,"<table><tbody><tr>"],area:[1,"<map>"],param:[1,"<object>"],g:[1,'<svg xmlns="'+ve+'">'],m:[1,'<math xmlns="'+le+'">'],_:[0,""]},pe=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;$e.optgroup=$e.option,$e.tbody=$e.tfoot=$e.colgroup=$e.caption=$e.thead,$e.th=$e.td;var ge=n.implementation.createHTMLDocument(x),me=ge.createElement("base");me.href=n.location.href,ge.head.appendChild(me);var be=function(t,e){var n=B(e);t.$c[n]?t.unmountVframe(n,1):t.unmountZone(n,1)},we={INPUT:[k,"checked"],TEXTAREA:[k],OPTION:["selected"]},ye=function(t,e){return 1==t.nodeType&&(t.$f?e=t.$g:((e=t.$a?x:t.id)||(e=t.getAttribute(V)),e||(e=t.getAttribute(N))&&(e=st(e)[j]),t.$f=1,t.$g=e)),e},xe=function(t,e,n,r,i){for(var o,f,u,a,c,s=t.lastChild,h=e.firstChild,d=0,v={},l={};s;)d++,(u=ye(s))&&(u=v[u]||(v[u]=[])).push(s),s=s.previousSibling;for(;h;)(u=ye(h))&&(l[u]=(l[u]||0)+1),h=h.nextSibling;for(h=e.firstChild,s=t.firstChild;h;)if(d--,h=(o=h).nextSibling,(a=v[u=ye(o)])&&(a=a.pop())){for(;a!=s;)c=s.nextSibling,t.appendChild(s),s=c;s=a.nextSibling,l[u]&&l[u]--,ke(a,o,t,n,r,i)}else s?(u=ye(f=s))&&v[u]&&l[u]?(d++,n.c=1,n.n.push([8,t,o,f])):(s=s.nextSibling,ke(f,o,t,n,r,i)):(n.c=1,n.n.push([1,t,o]));for(f=t.lastChild;0<d--;)be(r,f),n.n.push([2,t,f]),f=f.previousSibling,n.c=1},ke=function(t,e,n,r,i,o){if(function(t,e){var n,r=t.nodeName,i=we[r],o=0;if(i)for(var f=0,u=i;f<u.length;f++)t[n=u[f]]!=e[n]&&(o=1,t[n]=e[n]);return o}(t,e)||1==t.nodeType&&t.hasAttribute("mxv")||!t.isEqualNode||!t.isEqualNode(e))if(t.nodeName===e.nodeName)if(1===t.nodeType){var f=e.getAttribute(V);if(f&&f==t.getAttribute(V))return;var u=e.getAttribute(N),a=e.innerHTML,c=e.getAttribute("mxa"),s=!c||c!=t.getAttribute("mxa"),h=void 0,d=void 0,v=Gt[t.id],l=void 0,$=void 0,p=u&&st(u),g=void 0,m=void 0,b=void 0;if(u&&v&&(!e.id||e.id==t.id)&&v.$j==p[j]&&($=v.$v)){if(m=a!=v.$i,b=u!=v[j],l=t.getAttribute("mxv"),!m&&!b&&l)for(var w=0,y=g=l.split(A);w<y.length;w++)if((l=y[w])==C||z(o,l)){b=1;break}(b||m)&&((l=$.$e&&$.$f)?(g=p[U],Yt(v.pId,u,g),v.$i=a,v[j]=u,p={node:e,deep:!$.tmpl,attr:s,inner:m,query:b,keys:o},D(l,[g,p],$)&&r.v.push($),h=p.deep):h=d=1)}else h=1,d=v;d&&(r.c=1,v.unmountVframe(0,1)),s&&function(t,e,n,r){var i,o,f,u;delete t.$f;var a=t.attributes,c=e.attributes;for(o=a.length;o--;)i=a[o].name,e.hasAttribute(i)||("id"==i?r||n.d.push([t,x]):(n.c=1,t.removeAttribute(i)));for(o=c.length;o--;)f=(i=c[o]).name,u=i[k],t.getAttribute(f)!=u&&("id"==f?n.d.push([t,u]):(n.c=1,t.setAttribute(f,u)))}(t,e,r,v&&u),h&&xe(t,e,r,i,o)}else t.nodeValue!==e.nodeValue&&(r.c=1,t.nodeValue=e.nodeValue);else be(i,t),r.c=1,r.n.push([4,n,e,t])},Ve={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},Ae=/[&<>"'\`]/g,Ie=function(t){return""+(null==t?"":t)},Te=function(t){return"&"+Ve[t]+";"},Ce=function(t){return Ie(t).replace(Ae,Te)},Se=function(t,e,n,r){for(r=t[S];--r;)if(t[n=S+r]===e)return n;return t[n=S+t[S]++]=e,n},qe={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},Ue=function(t){return qe[t]},je=/[!')(*]/g,Ne=function(t){return encodeURIComponent(Ie(t)).replace(je,Ue)},Ee=/[\\'"]/g,Pe=function(t){return Ie(t).replace(Ee,"\\$&")},He=function(e,n){var t,r,i=e.$k,o=e.$c,f=e.$b,u=Gt[f],a=u&&u.$v,c={d:[],v:[],n:[]},s=E(f),h=e.$d,d=e.$a,v=function(t){n.i<n.length?He(e,n):(c=n.slice(),n.i=n.length=0,t&&a.fire("domready"),D(c))};if(n.i=n.length,e.$c=0,e.$k={},o&&a&&0<a.$a&&(t=a.tmpl)&&a.$d==e){a.fire("dompatch"),delete ae[f],delete ce[f],r=function(t,e){var n,r=ge.createElement("div"),i=e.namespaceURI;n=i==ve?"g":i==le?"m":(pe.exec(t)||[0,""])[1];var o=$e[n]||$e._;r.innerHTML=o[1]+t;for(var f=o[0];f--;)r=r.lastChild;return r}(t(h,f,d,Ce,Ie,Ne,Se,Pe),s),xe(s,r,c,u,i);for(var l=0,$=c.d;l<$.length;l++)(r=$[l])[0].id=r[1];for(var p=0,g=c.n;p<g.length;p++)1==(r=g[p])[0]?r[1].appendChild(r[2]):2==r[0]?r[1].removeChild(r[2]):4==r[0]?r[1].replaceChild(r[2],r[3]):r[1].insertBefore(r[2],r[3]);u.$d=t=c.c||!a.$e;for(var m=0,b=c.v;m<b.length;m++)(r=b[m]).$b();t&&a.endUpdate(f),c.c&&w.trigger({type:"htmlchanged",vId:f}),v(1)}else v()};function Me(t){var e,n=this;n.$b=t,n.$c=1,n.$d={vId:t},n.$a=((e={})[S]=1,e),n.$e=[],n.$k={}}O(Me[q],{get:function(t,e){return e=this.$d,t&&(e=e[t]),e},set:function(t,e){var n=this;return n.$c=H(t,n.$d,n.$k,e)||n.$c,n},digest:function(t,e,n){var r=this.set(t,e),i=r.$e;n&&i.push(n),i.i||He(r,i)},snapshot:function(){return this.$f=i(this.$d),this},altered:function(){if(this.$f)return this.$f!=i(this.$d)},translate:function(t){return F(this.$d,t)},parse:function(t){return lt(t,this.$a)}});var Oe=/^(\$?)([^<]*)<([^>]+)>(?:&(.+))?$/,_e=function(t,e,n){return t.a?n=t:((n=function(t){D(n.a,t,this)}).a=[t],n.b=1),n.a=n.a.concat(e.a||e),n},Le=function(t,e){var n,r,i=t.$r;for(n in i)r=i[n],(e||r.x)&&Re(i,n,1)},Re=function(t,e,n,r){var i,o,f=t[e];return f&&f!=r&&((i=(o=f.e).destroy)&&n&&D(i,p,o),delete t[e]),o},Ze=function(t,e){var n,r,i,o,f,u,a=t.$eo,c=t.$so,s=t.$el,h=t.id;for(n in a)i=c[r=n],o=e,void 0,f=0|fe[r],u=o?-1:1,f&&o!==f||ot(g,r,de,o),fe[r]=f+u,i&&(ue[r]=(0|ue[r])+u);for(var d=0,v=s;d<v.length;d++)n=v[d],ot(n.e,n.n,it,e,{i:h,v:t,f:n.f,m:n.m,e:n.e})},Be={win:u,doc:n},De=function(t,e,n){for(var r,i,o,f,u={},a=0,c=t;a<c.length;a++)for(r in i=c[a])o=i[r],f=u[r],"ctor"!=r?(Oe.test(r)&&(f?o=_e(f,o):o.b=1),u[r]=o):n.push(o);for(r in u)z(e,r)||(e[r]=u[r])};function ze(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._||(this._=[]);return De(t,this[q],n),this}var Fe=function(t){if(!t[S]){t[S]=[];var e=t[q],n=void 0,r=void 0,i=void 0,o=void 0,f={},u=[],a={},c=void 0,s=void 0,h=void 0,d=void 0,v=void 0,l=void 0,$=void 0;for(h in(r=e.mixins)&&De(r,e,t[S]),e)if(n=e[h],r=h.match(Oe)){if(s=r[1],i=r[2],o=r[3],l={},$=r[4])for(var p=0,g=$=$.split(A);p<g.length;p++)l[d=g[p]]=!0;for(var m=0,b=o=o.split(A);m<b.length;m++){if(d=b[m],c=Be[i],v=1,s){if(c){u.push({f:n,e:c,n:d,m:l});continue}v=2,(c=a[d])||(c=a[d]=[]),c[i]||(c[i]=1,c.push(i))}f[d]=f[d]|v,(c=e[d=i+S+d])?c.b&&(n.b?e[d]=_e(n,c):z(e,h)&&(e[d]=n)):e[d]=n}}x="$b",k=(w=e)[y="render"],w[y]=w[x]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];0<(V=this).$a&&(V.$a++,V.fire("rendercall"),Le(V),D(k,t,V))},e.$eo=f,e.$el=u,e.$so=a,e.$f=e.assign}var w,y,x,k,V;return t[S]},Je=function(t){var e,n,r,i=t.$l;if(i.f&&(i.p&&(e=Vt[j]),!e&&i.k)){r=Vt[U];for(var o=0,f=i.k;o<f.length&&(n=f[o],!(e=z(r,n)));o++);}return e};function Qe(t,e,n,r,i){(i=this).owner=e,i.id=t,i.$l={k:[]},i.$r={},i.$a=1,i.updater=i.$d=new Me(i.id),(t=Qe._)&&D(t,[n,{node:r,deep:!i.tmpl}],i)}O(Qe,{merge:ze,extend:function t(e,n){var c=this,r=(e=e||{}).ctor,s=[];function h(t,e,n,r,i,o,f,u,a){c.call(f=this,t,e,n,r,i),o=h._,u=[n,{node:r,deep:!f.tmpl}],o&&D(o,u,f),(a=s.concat(i)).length&&D(a,u,f)}return r&&s.push(r),h.merge=ze,h.extend=t,et(h,c,e,n)}}),O(Qe[q],pt,{init:t,beginUpdate:function(t,e){0<(e=this).$a&&e.$e&&e.owner.unmountZone(t,1)},endUpdate:function(t,e,n,r,i){0<(n=this).$a&&(t=t||n.id,e?i=e:(i=n.$e,n.$e=1),(r=n.owner).mountZone(t,e),i||a(n.wrapAsync(function(){!function(t,e,n){for(e=t.$f;e.length;)(n=e.shift()).r||t.invoke(n.n,n.a),delete e[n.k]}(r)}),0))},wrapAsync:function(n,r){var i=this,o=i.$a;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0<o&&o==i.$a)return n.apply(r||i,t)}},observeLocation:function(t,e){var n;(n=this.$l).f=1,l(t)&&(e=t[j],t=t[U]),n.p=e,t&&(n.k=(t+x).split(A))},observeState:function(t){this.$os=(t+x).split(A)},capture:function(t,e,n,r){return r=this.$r,e?(Re(r,t,1,e),r[t]={e:e,x:n}):e=(r=r[t])&&r.e,e},release:function(t,e){return Re(this.$r,t,e)},leaveTip:function(r,i){var o=this,f=function(t){var e="a",n="b";t.type!=c&&(e="b",n="a"),f[e]?(t.prevent(),t.reject()):i()&&(t.prevent(),f[n]=1,o.leaveConfirm(function(){f[n]=0,t.resolve()},function(){f[n]=0,t.reject()},r))},t=function(t){i()&&(t.msg=r)};Dt.on(c,f),Dt.on(s,t),o.on("unload",f),o.on("destroy",function(){Dt.off(c,f),Dt.off(s,t)})},render:t}),$t.View=Qe;var Xe=d.type,Ge=Date.now;function Ke(){this.id=m("b"),this.$={}}O(Ke[q],{get:function(t,e){var n=this.$;if(t){for(var r=I(t)?t.slice():(t+x).split("."),i=void 0;(i=r.shift())&&n;)n=n[i];i&&(n=o)}return e!==o&&Xe(e)!=Xe(n)&&(n=e),n},set:function(t,e){var n;l(t)||((n={})[t]=e,t=n),O(this.$,t)}});function We(t,e,n){(n=this[t])&&(delete this[t],D(n,e,n.e))}var Ye=function(t,e,n,r,i){if(t.$d)return t;if(t.$e)return t.enqueue(Ye.bind(t,t,e,n,r,i));t.$e=1,I(e)||(e=[e]);for(var a,c,s,h,d,v,l,$,p,o=t.constructor,f=0,u=o.$f,g=(a=n,c=o,s=t,h=e.length,d=r,v=o.$c,l=[],$=T,p=0,function(t,e){p++;var n,r,i=this,o=i.$b,f=o.k;if(l[t+1]=i,e?($=e,n=1):v.has(f)||(f&&v.set(f,i),o.t=Ge(),(r=o.a)&&D(r,i,i),(r=o.x)&&c.clear(r),n=1),!s.$d){var u=p==h;u&&(s.$e=0,2==d&&(l[0]=$,D(a,l,s))),1==d&&D(a,[e||T,i,u,t],s)}n&&c.fire("end",{bag:i,error:e})}),m=0,b=e;m<b.length;m++){var w=b[m];if(w){var y=o.get(w,i),x=y.e,k=x.$b.k,V=g.bind(x,f++),A=void 0;k&&u[k]?u[k].push(V):y.u?(k&&((A=[V]).e=x,u[k]=A,V=We.bind(u,k)),o.$s(x,V)):V()}}return t};function tn(){var t=this;t.id=m("s"),t.$g=[]}O(tn[q],{all:function(t,e){return Ye(this,t,e,2)},save:function(t,e){return Ye(this,t,e,2,1)},one:function(t,e){return Ye(this,t,e,1)},enqueue:function(t){var e=this;return e.$d||(e.$g.push(t),e.dequeue(e.$h)),e},dequeue:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r=this;r.$e||r.$d||(r.$e=1,a(function(){r.$e=0,r.$d||(n=r.$g.shift())&&D(n,r.$h=t)},0))},destroy:function(t){(t=this).$d=1,t.$g=0}});var en=function(t,e){return[i(e),i(t)].join(S)},nn=function(t,e,n,r){(r=t&&t.$b)&&e[r.n]&&n.del(r.k)},rn=O({add:function(t){var e,n=this.$b;I(t)||(t=[t]);for(var r=0,i=t;r<i.length;r++)if(e=i[r]){var o=e.name,f=e.cache;e.cache=0|f,n[o]=e}},create:function(t){var e=this.meta(t),n=0|t.cache||e.cache,r=new Ke;r.set(e),r.$b={n:e.name,a:e.after,x:e.cleans,k:n&&en(e,t)},l(t)&&r.set(t);var i=e.before;return i&&D(i,r,r),this.fire("begin",{bag:r}),r},meta:function(t){return this.$b[t.name||t]||t},get:function(t,e){var n,r;return e||(n=this.cached(t)),n||(n=this.create(t),r=1),{e:n,u:r}},clear:function(t){this.$c.each(nn,dt((t+x).split(A)))},cached:function(t){var e,n,r=this.$c,i=this.meta(t),o=0|t.cache||i.cache;if(o&&(n=en(i,t)),n){var f=this.$f[n];f?e=f.e:(e=r.get(n))&&Ge()-e.$b.t>o&&(r.del(n),e=0)}return e}},pt);return tn.extend=function(t,e,n){function r(){tn.call(this)}return r.$s=t,r.$c=new Q(e,n),r.$f={},r.$b={},et(r,tn,T,rn)},$t.Service=tn,O(t[q],pt),t.extend=function t(e,n){var r=this,i=e&&e.ctor;function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.apply(this,t),i&&i.apply(this,t)}return o.extend=t,et(o,r,e,n)},$t.Base=t,X=Qe.extend(),$t.addView=function(t,e){K[t]=e},$t}();