/*!3.8.10 MIT kooboy_li@163.com*/module.exports=function(){var d=require("$"),$=d.isPlainObject,I=d.isArray,a=0,k="",l=[],V=",",S=null,f=window,o=void 0,n=document,g=d(n),u=f.setTimeout,r="changed",c="change",s="pageunload",A="value",T="mxs",m="#";function h(){}var b,i=JSON.stringify,w="\x1e",e="object",y="prototype",C="params",q="path",N="mx-view",v=/[#?].*$/,p=/([^=&?\/#]+)=?([^&#?]*)/g,x=/(?!^)=|&/,j=function(t){return(t||"mx_")+a++},U=j(),E={rootId:j(),defaultView:U,error:function(t){u(function(){throw t})}},P=function(t){return typeof t==e?t:n.getElementById(t)},H=function(t){return!t||typeof t!=e},O=function(t,e,n){var r,i,o,a=0;for(o in t)r=t[o],i=e[o],H(r)&&i===r||(a=n[o]=1),e[o]=r;return a},L=function(t,e,n){if(t=P(t),e=P(e),t&&e&&!(n=t==e))try{n=16==(16&e.compareDocumentPosition(t))}catch(t){}return n};function Z(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])J(e,i)&&(t[i]=e[i]);return t}var M=function(t,e,n){for(n in e=[],t)J(t,n)&&e.push(n);return e},R=E.hasOwnProperty,B=d("head"),D=function(t,e){e&&!D[t]&&(D[t]=1,B.append("<style>"+e))},z=function(t){return t.id||(t.$a=1,t.id=j())},F=function(t,e,n,r,i){e=e||l,I(t)||(t=[t]),I(e)||(e=[e]);for(var o=0,a=t;o<a.length;o++){i=a[o];try{r=i&&i.apply(n,e)}catch(t){E.error(t)}}return r},J=function(t,e){return t&&R.call(t,e)},Q=function(t,e,n){var r,i;if(!n&&H(e))(r=e+k)[0]==w&&(e=t[r]);else for(r in e)i=e[r],n&&!H(i)&&Q(t,i,n),r[0]==w&&(delete e[r],r=t[r]),e[r]=(i+k)[0]==w?t[i]:i;return e},X=function(t,e){return e.f-t.f||e.t-t.t};function _(t,e,n,r){(r=this).c=[],r.b=e||5,r.x=r.b+(t||20),r.r=n}Z(_[y],{get:function(t){var e=this.c[w+t];return e&&(e.f++,e.t=a++,e=e.v),e},each:function(t,e,n){for(var r=0,i=(n=this).c;r<i.length;r++)t(i[r].v,e,n)},set:function(t,e){var n=this.c,r=w+t,i=n[r],o=this.b;if(!i){if(n.length>=this.x)for(n.sort(X);o--;)0<(i=n.pop()).f&&this.del(i.o);i={o:t},n.push(i),n[r]=i}i.v=e,i.f=1,i.t=a++},del:function(t){t=w+t;var e=this.c,n=e[t],r=this.r;n&&(n.f=-1,n.v=k,delete e[t],r&&F(r,n.o))},has:function(t){return J(this.c,w+t)}});var G,K=d.isFunction,W=function(t,e){var n=E.views||h;if(n[U]||(n[U]=G),!t)return e();I(t)||(t=[t]);for(var r,i=[],o=0,a=function(){o||e.apply(vt,i)},f=function(t,e,n){(t=t(n=function(t){i[e]||(o--,i[e]=t,a())})).then&&t.then(n)},u=0;u<t.length;u++)r=n[t[u]],K(r)&&!r.extend?(o++,f(r,u)):i[u]=n[t[u]];a()};function Y(){}var tt,et=function(t,e,n,r,i){return Y[y]=e[y],Z(i=new Y,n),Z(t,r),(i.constructor=t)[y]=i,t},t=d.find||d.zepto,nt=t.matchesSelector||t.matches,rt=function(t,e){e=t.data,t.eventTarget=e.e,F(e.f,t,e.v)},it=function(t,e,n,r,i){i&&(e+="."+i.i),r?d(t).off(e,n):d(t).on(e,i,n)},ot=new _,at=0,ft=function(t,e,n){try{n=decodeURIComponent(n)}catch(t){}tt[e]=n},ut=function(t){var e,n=ot.get(t);return n||(tt={},t==(e=t.replace(v,k))&&x.test(e)&&(e=k),t.replace(e,k).replace(p,ft),ot.set(t,n={a:e,b:tt})),{path:n.a,params:Z({},n.b)}},ct=function(t,e,n){var r,i,o,a=[];for(i in e)r=e[i]+k,(!n||r||J(n,i))&&(r=encodeURIComponent(r),a.push(o=i+"="+r));return o&&(t+=(t&&(~t.indexOf("?")?"&":"?"))+a.join("&")),t},st=function(t,e){var n,r={};if(t)for(var i=0,o=t;i<o.length;i++)n=o[i],r[e&&n?n[e]:n]=e?n:1+(0|r[n]);return r},ht=new _,dt=function(t,e,n){return ht.has(t)?n=ht.get(t):(n=F(Function("return "+t)),-1<t.indexOf(w)?Q(e,n,1):ht.set(t,n)),n},vt={config:function(t,e){return e=E,t&&(e=$(t)?Z(e,t):e[t]),e},boot:function(e){Z(E,e),W(E.ini,function(t){Z(E,t,e),W(E.exts,function(){Bt.on(r,Qt),yt.on(r,Qt),at=1,Lt()})})},toMap:st,toTry:F,toUrl:ct,parseUrl:ut,mix:Z,has:J,keys:M,inside:L,node:P,applyStyle:D,guid:j,use:W,Cache:_,nodeId:z},$t={fire:function(t,e,n,r){var i,o,a,f,u=this,c=u[w+t];if(e||(e={}),e.type||(e.type=t),c)for(o=(i=c.length)-1;i--;)(f=c[a=r?i:o-i]).f?(f.x=1,F(f.f,e,u),f.x=k):f.x||(c.splice(a,1),o--);(c=u["on"+t])&&F(c,e,u),n&&u.off(t)},on:function(t,e){var n=w+t;(this[n]||(this[n]=[])).push({f:e})},off:function(t,e){var n,r=w+t,i=this[r];if(e){if(i)for(var o=0,a=i;o<a.length;o++)if((n=a[o]).f==e){n.f=k;break}}else delete this[r],delete this["on"+t]}};vt.Event=$t;var lt={},pt={},gt={},mt=0,bt=function(t){for(var e=0,n=t=(t+k).split(",");e<n.length;e++){var r=n[e];J(pt,r)?pt[r]++:pt[r]=1}return t},wt=function(t){for(var e,n=0,r=t;n<r.length;n++)e=r[n],J(pt,e)&&(--pt[e]||(delete pt[e],delete lt[e]))};var yt=Z({get:function(t){var e=t?lt[t]:lt;return e},set:function(t){return mt=O(t,lt,gt)||mt,this},digest:function(t){t&&yt.set(t),mt&&(mt=0,this.fire(r,{keys:gt}),gt={})},diff:function(){return gt},clean:function(t){return{ctor:function(){t=bt(t),this.on("destroy",function(){return wt(t)})}}}},$t);vt.State=yt;var xt,kt="view",Vt=new _,At=new _,It=f.location,St=0,Tt={query:{},params:{},href:k},Ct=/(?:^.*\/\/[^\/]+|#.*$)/gi,qt=/^[^#]*#?!?/;function Nt(t,e){return this[C][t]||e!==o&&e||k}var jt,Ut,Et,Pt,Ht,Ot=function(t,e){t="#!"+t,e?It.replace(t):It.hash=t},Lt=function(){var r,i,o=Mt().srcHash;it(f,"hashchange",function(t,e,n){i||(e=Mt(),(r=e.srcHash)!=o&&(n=function(){t.p=1,i=k,Ot(o=r),Rt()},t={reject:function(){t.p=1,i=k,Ot(o)},resolve:n,prevent:function(){i=1}},Bt.fire(c,t),i||t.p||n()))}),it(f,"beforeunload",function(t,e,n){if(t=t||f.event,e={},Bt.fire(s,e),n=e.msg)return t&&(t.returnValue=n),n}),Rt()},Zt=n.title,Mt=function(t){t=t||It.href;var e,n,r,i,o=Vt.get(t);return o||(o={get:Nt,href:t,srcQuery:e=t.replace(Ct,k),srcHash:n=t.replace(qt,k),query:r=ut(e),hash:i=ut(n),params:Z({},r[C],i[C])},at&&(!function(t,e){if(jt||(jt=E.routes||{},Ut=E.unmatchView,Et=E.defaultView,Pt=E.defaultPath||"/",Ht=E.rewrite),!t[kt]){var n=t.hash[q]||Pt;Ht&&(n=Ht(n,t[C],jt)),e=jt[n]||Ut||Et,t[q]=n,t[kt]=e,$(e)&&Z(t,e)}}(o),Vt.set(t,o))),o},Rt=function(){var t=Mt(),e=function(t,e){var n=t.href,r=e.href,i=n+w+r,o=At.get(i);if(!o){var a,f;o={params:f={},force:!n};for(var u=t[C],c=e[C],s=function(t){var e=u[t],n=c[t];e!=n&&(f[t]={from:e,to:n},a=1)},h=0,d=M(u).concat(M(c));h<d.length;h++)s(d[h]);u=t,c=e,f=o,s(q),s(kt),At.set(i,o={a:a,b:o})}return o}(Tt,Tt=t);return!St&&e.a&&((xt=e.b)[q]&&(n.title=t.title||Zt),Bt.fire(r,xt)),St=0,xt},Bt=Z({parse:Mt,diff:Rt,to:function(t,e,n,r){!e&&$(t)&&(e=t,t=k);var i,o,a,f,u=ut(t),c=u[C],s=u[q],h=Tt[q],d=Tt[C],v=Tt.query[C];if(Z(c,e),s)for(h in v)J(c,h)||(c[h]=k);else d&&(s=h,c=Z({},d,c));o=Tt,a=n,f=r,(i=ct(i=s,c,v))!=o.srcHash&&(St=f,Ot(i,a))}},$t);vt.Router=Bt;var Dt,zt,Ft=0,Jt=function(t,e,n,r,i,o){if(t&&t.$a!=Ft&&(n=t.$v)&&1<n.$a){(e?function(t,e,n){var r,i=t.$os;if(i)for(var o=0,a=i;o<a.length&&(r=a[o],!(n=J(e,r)));o++);return n}(n,e):je(n))&&n.$b();for(var a=0,f=t.children();a<f.length;a++)o=f[a],Jt(Xt[o],e)}},Qt=function(t,e,n){e=Wt(),(n=t[kt])?e.mountView(n.to):(Ft=a++,Jt(e,t.keys))},Xt={},_t=function(t){if(!t.$b&&!t.$d&&t.$cc==t.$rc){t.$cr||(t.$cr=1,t.$ca=0,t.fire("created"));var e=t.id,n=t.pId,r=Xt[n];r&&!J(r.$e,e)&&(r.$e[e]=1,r.$rc++,_t(r))}},Gt=function(t,e){if(!t.$ca&&t.$cr){t.$cr=0,t.$ca=1,t.fire("alter",e);var n=t.id,r=t.pId,i=Xt[r];i&&J(i.$e,n)&&(i.$rc--,delete i.$e[n],Gt(i,e))}},Kt=function(t,e,n,r){return r=(r=(r=Xt[t])&&r.$v)?r.$d.$a:{},0<e.indexOf(w)&&Q(r,n),r},Wt=function(t){return Dt||(b=n.body,t=E.rootId,P(t)||(b.id=t),Dt=new ee(t)),Dt},Yt=function(t,e){J(Xt,t)||(Xt[t]=e,ee.fire("add",{vframe:e}),(t=P(t))&&(t.vframe=e))},te=[];function ee(t,e,n){(n=this).id=t,n.$c={},n.$cc=0,n.$rc=0,n.$g=n.$g||1,n.$e={},n.$f=[],n.pId=e,Yt(t,n)}Z(ee,{all:function(){return Xt},get:function(t){return Xt[t]}},$t),Z(ee[y],$t,{mountView:function(t,e){var n,r,i,o,a,f=this,u=f.id,c=f.pId,s=f.$g,h=P(u);!f.$h&&h&&(f.$h=1,f.$i=h.innerHTML),f.unmountView(),f.$b=0,n=ut(t),i=n[q],h&&i&&(f[q]=t,r=++s,o=n[C],Kt(c,t,o),f.$j=n[q],Z(o,e),W(i,function(t){if(r==f.$g){if(!t)return E.error(Error("id:"+u+" cannot load:"+i));a=Ne(t),i=new t(u,f,o,a),f.$v=i,f.$a=Ft,Se(i),F(i.init,o,i),i.$b(),i.$e||(f.$h=0,i.$f||i.endUpdate())}}))},unmountView:function(){var t,e,n=this,r=n.$v,i=n.id;n.$f=[],r&&(zt||(e=1,zt={id:i}),n.$b=1,n.unmountZone(0,1),Gt(n,zt),(n.$v=0)<r.$a&&(r.$a=0,delete ae[i],delete fe[i],r.fire("destroy",0,1,1),Ae(r,1),Se(r,1),r.owner=0),r.$a--,(t=P(i))&&n.$h&&d(t).html(n.$i),e&&(zt=0)),n.$g++},mountVframe:function(t,e,n){var r,i=this,o=i.id,a=i.$c;return Gt(i,{id:t}),(r=Xt[t])||(J(a,t)||(i.$n=0,i.$cc++),a[t]=t,(r=te.pop())?ee.call(r,t,o):r=new ee(t,o)),r.mountView(e,n),r},mountZone:function(t,e){var n,r,i=this,o=[];t=t||i.id;var a,f=d("#"+t+" ["+N+"]");i.$d=1;for(var u=0,c=f;u<c.length;u++)(n=c[u]).$b||(r=z(n),n.$b=1,o.push([r,n.getAttribute(N)]));for(var s=0,h=o;s<h.length;s++)r=(a=h[s])[0],n=a[1],i.mountVframe(r,n);i.$d=0,e||_t(i)},unmountVframe:function(t,e){var n,r,i,o;if(t=t?this.$c[t]:this.id,n=Xt[t]){var a=n.$cr,f=n.pId;n.unmountView(),i=a,(o=Xt[r=t])&&(delete Xt[r],ee.fire("remove",{vframe:o,fcc:i}),(r=P(r))&&(r.$b=0,r.vframe=0,r.$a=0)),n.id=n.pId=n.$c=n.$e=0,n.$h=0,n.off("alter"),n.off("created"),te.push(n),(n=Xt[f])&&J(n.$c,t)&&(delete n.$c[t],n.$n=0,n.$cc--,e||_t(n))}},unmountZone:function(t,e){var n;for(n in this.$c)(!t||n!=t&&L(n,t))&&this.unmountVframe(n,1);e||_t(this)},parent:function(t,e){for(e=this,t=t>>>0||1;e&&t--;)e=Xt[e.pId];return e},children:function(t){return(t=this).$n||(t.$n=M(t.$c))},invoke:function(t,e){var n,r,i,o,a,f=this.$f;return(r=this.$v)&&r.$f?n=(i=r[t])&&F(i,e,r):((o=f[a=w+t])&&(o.r=e===o.a),o={n:t,a:e,k:a},f.push(o),f[a]=o),n}}),vt.Vframe=ee,d.fn.invokeView=function(t,e){for(var n,r=[],i=0;i<this.length;i++)n=this[i].vframe,r.push(n&&n.invoke(t,e));return r};var ne=new _(30,10),re=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,ie={},oe={},ae={},fe={},ue=0,ce=function(t,e){var n,r,i,o,a,f=[],u=t,c=t.getAttribute("mx-"+e),s=[],h=m,d=0;if(c&&((o=ne.get(c))||(o={v:(o=c.match(re)||l)[1],n:o[2],i:o[3]},ne.set(c,o)),o=Z({},o,{r:c})),o&&!o.v||oe[e]){if((i=fe[r=u.$d])&&1==i[u.$e]&&(a=1,h=r),!a){for(s.push(u);u!=b&&(u=u.parentNode);){if(Xt[r=u.id]||(i=fe[r=u.$d])&&1==i[u.$e]){h=r;break}s.push(u)}for(var v=0,$=s;v<$.length;v++)c=$[v],(r=fe[h])||(r=fe[h]={}),r[i=c.$e||(c.$e=++ue)]=1,c.$d=h}if(h!=m){u=t.id,Xt[u]&&(d=h=u);do{if((n=Xt[h])&&(a=n.$v)){for(r in(i=a.$so)[e])i={r:r,v:h,n:r},r?!d&&nt(t,r)&&f.push(i):d&&f.unshift(i);if(a.$e&&!d){o&&!o.v&&(o.v=h);break}d=0}}while(n&&(h=n.pId))}}return o&&f.push(o),f},se=function(t){for(var e,n,r,i,o,a,f,u=t.target,c=t.type,s=[];u!=b;){if((e=ce(u,c)).length){s=[];for(var h=0,d=e;h<d.length;h++){var v=d[h],$=v.v,l=(v.r,v.n),p=v.i;if(a!=$){if(a&&t.isPropagationStopped())break;a=$}(i=(r=Xt[$])&&r.$v)?(o=i[l+w+c])&&(t.eventTarget=u,f=p?dt(p,i.$d.$a):{},t[C]=f,F(o,t,i)):t.stopPropagation()}}if((n=ae[o=u.$d])&&(n=n[u.$e])&&n[c]||t.isPropagationStopped()){s.length&&s.push(o);break}s.push(u),a=u.id,Xt[a]&&s.push(a),u=u.parentNode||b}if(o=s.length)for(n=m;o--;)(i=s[o]).nodeType?((e=ae[n])||(e=ae[n]={}),(f=e[a=i.$e||(i.$e=++ue)])||(f=e[a]={},i.$d=n),f[c]=1):n=i},he="http://www.w3.org/2000/svg",de={option:[1,"<select multiple>"],thead:[1,"<table>"],col:[2,"<table><colgroup>"],tr:[2,"<table><tbody>"],td:[3,"<table><tbody><tr>"],area:[1,"<map>"],param:[1,"<object>"],g:[1,'<svg xmlns="'+he+'">'],all:[0,""]},ve=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;de.optgroup=de.option,de.tbody=de.tfoot=de.colgroup=de.caption=de.thead,de.th=de.td;var $e=n.implementation.createHTMLDocument(k),le=$e.createElement("base");le.href=n.location.href,$e.head.appendChild(le);var pe=function(t,e){var n=z(e);t.$c[n]?t.unmountVframe(n,1):t.unmountZone(n,1)},ge={INPUT:[A,"checked"],TEXTAREA:[A],OPTION:["selected"]},me=function(t,e){return 1==t.nodeType&&(t.$f?e=t.$g:((e=t.$a?k:t.id)||(e=t.getAttribute(T)),e||(e=t.getAttribute(N))&&(e=ut(e)[q]),t.$f=1,t.$g=e)),e},be=function(t,e,n,r,i){for(var o,a,f,u,c,s=t.lastChild,h=e.firstChild,d=0,v={},$={};s;)d++,(f=me(s))&&(f=v[f]||(v[f]=[])).push(s),s=s.previousSibling,h&&((f=me(h))&&($[f]=1),h=h.nextSibling);for(;h;)(f=me(h))&&($[f]=1),h=h.nextSibling;for(h=e.firstChild,c=e.childNodes.length<d,s=t.firstChild;h;)d--,h=(o=h).nextSibling,(u=v[f=me(o)])&&(u=u.pop())?(u!=s?c&&s.nextSibling==u?(t.appendChild(s),s=u.nextSibling):t.insertBefore(u,s):s=s.nextSibling,we(u,o,t,n,r,i)):s?(f=me(a=s))&&v[f]&&$[f]?(d++,n.c=1,t.insertBefore(o,a)):(s=s.nextSibling,we(a,o,t,n,r,i)):(t.appendChild(o),n.c=1);for(;0<d--;)a=t.lastChild,pe(r,a),t.removeChild(a),n.c=1},we=function(t,e,n,r,i,o,a){if(function(t,e){var n,r=t.nodeName,i=ge[r],o=0;if(i)for(var a=0,f=i;a<f.length;a++)t[n=f[a]]!=e[n]&&(o=1,t[n]=e[n]);return o}(t,e)||1==t.nodeType&&(a=t.hasAttribute("mxv"))||!t.isEqualNode||!t.isEqualNode(e))if(t.nodeName===e.nodeName)if(1===t.nodeType){var f=e.getAttribute(T);if(f&&f==t.getAttribute(T))return;var u=e.getAttribute(N),c=e.innerHTML,s=e.getAttribute("mxa"),h=!s||s!=t.getAttribute("mxa"),d=void 0,v=void 0,$=Xt[t.id],l=void 0,p=void 0,g=u&&ut(u),m=void 0,b=void 0,w=void 0;if(u&&$&&(!e.id||e.id==t.id)&&$.$j==g[q]&&(p=$.$v)){if(b=c!=$.$i,w=u!=$[q],l=t.getAttribute("mxv"),!b&&!w&&l)for(var y=0,x=m=l.split(V);y<x.length;y++)if(l=x[y],J(o,l)){w=1;break}w||b||a?(l=p.$g)?(m=g[C],Kt($.pId,u,m),$.$i=c,$[q]=u,g={node:e,html:c,deep:!p.$e,mxv:a,inner:b,query:w,keys:o},h=1,F(l,[m,g],p)&&r.v.push(p),d=g.deep):d=v=1:h=1}else d=1,v=$;v&&(r.c=1,$.unmountVframe(0,1)),h&&function(t,e,n,r){var i,o,a,f;delete t.$f;var u=t.attributes,c=e.attributes;for(o=u.length;o--;)i=u[o].name,e.hasAttribute(i)||("id"==i?r||n.d.push([t,k]):(n.c=1,t.removeAttribute(i)));for(o=c.length;o--;)a=(i=c[o]).name,f=i[A],t.getAttribute(a)!=f&&("id"==a?n.d.push([t,f]):(n.c=1,t.setAttribute(a,f)))}(t,e,r,$&&u),d&&be(t,e,r,i,o)}else t.nodeValue!==e.nodeValue&&(r.c=1,t.nodeValue=e.nodeValue);else pe(i,t),n.replaceChild(e,t),r.c=1},ye=function(e,n){var t,r,i=e.$k,o=e.$c,a=e.$b,f=Xt[a],u=f&&f.$v,c={d:[],v:[]},s=P(a),h=e.$a,d=function(t){n.i<n.length?ye(e,n):(c=n.slice(),n.i=n.length=0,t&&u.fire("domready"),F(c))};if(n.i=n.length,e.$c=0,e.$k={},o&&u&&0<u.$a&&(t=u.$e)){delete ae[a],delete fe[a],r=function(t,e){var n=$e.createElement("div"),r=he==e.namespaceURI?"g":(ve.exec(t)||[0,""])[1].toLowerCase(),i=de[r]||de.all;n.innerHTML=i[1]+t;for(var o=i[0];o--;)n=n.lastChild;return n}(t(h,a),s),be(s,r,c,f,i);for(var v=0,$=c.d;v<$.length;v++)(r=$[v])[0].id=r[1];for(var l=0,p=c.v;l<p.length;l++)(r=p[l]).$b();!c.c&&u.$f||u.endUpdate(a),c.c&&g.trigger({type:"htmlchanged",vId:a}),d(1)}else d()};function xe(t){var e,n=this;n.$b=t,n.$c=1,n.$a=((e={vId:t})[w]=1,e),n.$d=[],n.$k={}}Z(xe[y],{get:function(t,e){return e=this.$a,t&&(e=e[t]),e},set:function(t){var e=this;return e.$c=O(t,e.$a,e.$k)||e.$c,e},digest:function(t,e){var n=this.set(t),r=n.$d;r.push(e),r.i||ye(n,r)},snapshot:function(){return this.$e=i(this.$a),this},altered:function(){if(this.$e)return this.$e!=i(this.$a)},translate:function(t){return Q(this.$a,t,1)},parse:function(t){return dt(t,this.$a)}});var ke=/^(\$?)([^<]*)<([^>]+)>$/,Ve=function(t,e,n){return t.a?n=t:((n=function(t){F(n.a,t,this)}).a=[t],n.b=1),n.a=n.a.concat(e.a||e),n},Ae=function(t,e){var n,r,i=t.$r;for(n in i)r=i[n],(e||r.x)&&Ie(i,n,1)},Ie=function(t,e,n,r){var i,o,a=t[e];return a&&a!=r&&((i=(o=a.e).destroy)&&n&&F(i,l,o),delete t[e]),o},Se=function(t,e){var n,r,i,o,a,f,u=t.$eo,c=t.$so,s=t.$el,h=t.id;for(n in u)i=c[r=n],o=e,void 0,a=0|ie[r],f=o?-1:1,a&&o!==a||it(b,r,se,o),ie[r]=a+f,i&&(oe[r]=(0|oe[r])+f);for(var d=0,v=s;d<v.length;d++)n=v[d],it(n.e,n.n,rt,e,{i:h,v:t,f:n.f,e:n.e})},Te=[],Ce={win:f,doc:n},qe=function(t,e,n){for(var r,i,o,a,f={},u=0,c=t;u<c.length;u++)for(r in i=c[u])o=i[r],a=f[r],"ctor"!=r?(ke.test(r)&&(a?o=Ve(a,o):o.b=1),f[r]=o):n.push(o);for(r in f)J(e,r)||(e[r]=f[r])},Ne=function(t){if(!t[w]){t[w]=[];var e=t[y],n=void 0,r=void 0,i=void 0,o={},a=[],f={},u=void 0,c=void 0,s=void 0,h=void 0,d=void 0;for(s in(r=e.mixins)&&qe(r,e,t[w]),e)if(n=e[s],r=s.match(ke)){c=r[1],i=r[2];for(var v=0,$=r[3].split(V);v<$.length;v++){if(h=$[v],u=Ce[i],d=1,c){if(u){a.push({f:n,e:u,n:h});continue}d=2,(u=f[h])||(u=f[h]={}),u[i]=1}o[h]=o[h]|d,(u=e[h=i+w+h])?u.b&&(n.b?e[h]=Ve(n,u):J(e,s)&&(e[h]=n)):e[h]=n}}g="$b",m=(l=e)[p="render"],l[p]=l[g]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];0<(b=this).$a&&(b.$a++,b.fire("rendercall"),Ae(b),F(m,t,b))},e.$eo=o,e.$el=a,e.$so=f,e.$e=e.tmpl,e.$g=e.assign}var l,p,g,m,b;return t[w]},je=function(t){var e,n,r,i=t.$l;if(i.f&&(i.p&&(e=xt[q]),!e&&i.k)){r=xt[C];for(var o=0,a=i.k;o<a.length&&(n=a[o],!(e=J(r,n)));o++);}return e};function Ue(t,e,n,r){(r=this).owner=e,r.id=t,r.$l={k:[]},r.$r={},r.$a=1,r.updater=r.$d=new xe(r.id),F(Te,n,r)}var Ee=Ue[y];Z(Ue,{merge:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];qe(t,Ee,Te)},extend:function(t,e){var i=this,n=(t=t||{}).ctor,o=[];function r(t,e,n,r){i.call(this,t,e,n),F(o.concat(r),n,this)}return n&&o.push(n),r.extend=i.extend,et(r,i,t,e)}}),Z(Ee,$t,{init:h,beginUpdate:function(t,e){0<(e=this).$a&&e.$f&&e.owner.unmountZone(t,1)},endUpdate:function(t,e,n,r,i){0<(n=this).$a&&(t=t||n.id,e?i=e:(i=n.$f,n.$f=1),(r=n.owner).mountZone(t,e),i||u(n.wrapAsync(function(){!function(t,e,n){for(e=t.$f;e.length;)(n=e.shift()).r||t.invoke(n.n,n.a),delete e[n.k]}(r)}),0))},wrapAsync:function(n,r){var i=this,o=i.$a;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0<o&&o==i.$a)return n.apply(r||i,t)}},observeLocation:function(t,e){var n;(n=this.$l).f=1,$(t)&&(e=t[q],t=t[C]),n.p=e,t&&(n.k=(t+k).split(V))},observeState:function(t){this.$os=(t+k).split(V)},capture:function(t,e,n,r){return r=this.$r,e?(Ie(r,t,1,e),r[t]={e:e,x:n}):e=(r=r[t])&&r.e,e},release:function(t,e){return Ie(this.$r,t,e)},leaveTip:function(r,i){var o=this,a=function(t){var e="a",n="b";t.type!=c&&(e="b",n="a"),a[e]?(t.prevent(),t.reject()):i()&&(t.prevent(),a[n]=1,o.leaveConfirm(function(){a[n]=0,t.resolve()},function(){a[n]=0,t.reject()},r))},t=function(t){i()&&(t.msg=r)};Bt.on(c,a),Bt.on(s,t),o.on("unload",a),o.on("destroy",function(){Bt.off(c,a),Bt.off(s,t)})},render:h}),vt.View=Ue;var Pe=d.type,He=d.now||Date.now;function Oe(){this.id=j("b"),this.$={}}Z(Oe[y],{get:function(t,e){var n=this.$;if(t){for(var r=I(t)?t.slice():(t+k).split("."),i=void 0;(i=r.shift())&&n;)n=n[i];i&&(n=o)}return e!==o&&Pe(e)!=Pe(n)&&(n=e),n},set:function(t,e){var n;$(t)||((n={})[t]=e,t=n),Z(this.$,t)}});function Le(t,e,n){(n=this[t])&&(delete this[t],F(n,e,n.e))}var Ze=function(t,e,n,r,i){if(t.$d)return t;if(t.$e)return t.enqueue(Ze.bind(t,t,e,n,r,i));t.$e=1,I(e)||(e=[e]);for(var c,s,h,d,v,$,l,p,g,o=t.constructor,a=0,f=o.$f,u=(c=n,s=o,h=t,d=e.length,v=r,$=o.$c,l=[],p=S,g=0,function(t,e){var n,r=this;g++;var i,o=r.$b,a=o.k,f={bag:l[t+1]=r,error:e};if(e?(p=e,s.fire("fail",f),n=1):$.has(a)||(a&&$.set(a,r),o.t=He(),(i=o.a)&&F(i,r,r),(i=o.x)&&s.clear(i),s.fire("done",f),n=1),!h.$d){var u=g==d;u&&(h.$e=0,2==v&&(l[0]=p,F(c,l,h))),1==v&&F(c,[e||S,r,u,t],h)}n&&s.fire("end",f)}),m=0,b=e;m<b.length;m++){var w=b[m];if(w){var y=o.get(w,i),x=y.e,k=x.$b.k,V=u.bind(x,a++),A=void 0;k&&f[k]?f[k].push(V):y.u?(k&&((A=[V]).e=x,f[k]=A,V=Le.bind(f,k)),o.$s(x,V)):V()}}return t};function Me(){var t=this;t.id=j("s"),t.$g=[]}Z(Me[y],{all:function(t,e){return Ze(this,t,e,2)},save:function(t,e){return Ze(this,t,e,2,1)},one:function(t,e){return Ze(this,t,e,1)},enqueue:function(t){var e=this;return e.$d||(e.$g.push(t),e.dequeue(e.$h)),e},dequeue:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r=this;r.$e||r.$d||(r.$e=1,u(function(){r.$e=0,r.$d||(n=r.$g.shift())&&F(n,r.$h=t)},0))},destroy:function(t){(t=this).$d=1,t.$g=0}});var Re=function(t,e){return[i(e),i(t)].join(w)},Be=function(t,e,n,r){(r=t&&t.$b)&&e[r.n]&&n.del(r.k)},De=Z({add:function(t){var e,n=this.$b;I(t)||(t=[t]);for(var r=0,i=t;r<i.length;r++)if(e=i[r]){var o=e.name,a=e.cache;e.cache=0|a,n[o]=e}},create:function(t){var e=this.meta(t),n=0|t.cache||e.cache,r=new Oe;r.set(e),r.$b={n:e.name,a:e.after,x:e.cleans,k:n&&Re(e,t)},$(t)&&r.set(t);var i=e.before;return i&&F(i,r,r),this.fire("begin",{bag:r}),r},meta:function(t){return this.$b[t.name||t]||t},get:function(t,e){var n,r;return e||(n=this.cached(t)),n||(n=this.create(t),r=1),{e:n,u:r}},clear:function(t){this.$c.each(Be,st((t+k).split(V)))},cached:function(t){var e,n,r=this.$c,i=this.meta(t),o=0|t.cache||i.cache;if(o&&(n=Re(i,t)),n){var a=this.$f[n];a?e=a.e:(e=r.get(n))&&He()-e.$b.t>o&&(r.del(n),e=0)}return e}},$t);return Me.extend=function(t,e,n){function r(){Me.call(this)}return r.$s=t,r.$c=new _(e,n),r.$f={},r.$b={},et(r,Me,S,De)},vt.Service=Me,Z(h[y],$t),h.extend=function t(e,n){var r=this,i=e&&e.ctor;function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.apply(this,t),i&&i.apply(this,t)}return o.extend=t,et(o,r,e,n)},vt.Base=h,G=Ue.extend(),vt.addView=function(t,e){(E.views=E.views||{})[t]=e},vt}();