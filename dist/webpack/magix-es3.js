/*!3.8.13 MIT kooboy_li@163.com*/module.exports=function(){var d=require("$"),v=d.isPlainObject,T=d.isArray,f=0,x="",p=[],I=",",C=null,a=window,o=void 0,t=document,r=t.documentElement.getAttribute,k=function(n,e){return r.call(n,e)},w=d(t),u=a.setTimeout,i="changed",c="change",s="pageunload",V="value",S="mxs",q="#";function n(){}var g,h=JSON.stringify,A="\x1e",e="object",U="prototype",j="params",E="path",N="mx-view",l=/[#?].*$/,$=/([^=&?\/#]+)=?([^&#?]*)/g,m=/(?!^)=|&/,b=function(n){return(n||"mx_")+f++},y=b(),P={rootId:b(),defaultView:y,error:function(n){throw n}},H=function(n){return typeof n==e?n:t.getElementById(n)},M=function(n){return!n||typeof n!=e},O=function(n,e,t,r){var i,o,f,a=0;for(f in n)i=n[f],o=e[f],M(i)&&o===i||J(r,f)||(a=t[f]=1),e[f]=i;return a},_=function(n,e,t){if(n=H(n),e=H(e),n&&e&&!(t=n==e))try{t=16==(16&e.compareDocumentPosition(n))}catch(n){}return t};function L(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])J(e,i)&&(n[i]=e[i]);return n}var R=function(n,e,t){for(t in e=[],n)J(n,t)&&e.push(t);return e},Z=P.hasOwnProperty,B=d("head"),D=function(n,e){e&&!D[n]&&(D[n]=1,B.append("<style>"+e))},z=function(n){return k(n,"id")||(n.$a=1,n.id=b())},F=function(n,e,t,r,i){e=e||p,T(n)||(n=[n]),T(e)||(e=[e]);for(var o=0,f=n;o<f.length;o++){i=f[o];try{r=i&&i.apply(t,e)}catch(n){P.error(n)}}return r},J=function(n,e){return n&&Z.call(n,e)},Q=function(n,e){var t,r;if(M(e))(t=e+x)[0]==A&&J(n,t)&&(e=n[t]);else for(t in e)r=e[t],r=Q(n,r),e[t]=r;return e},X=function(n,e){return e.f-n.f||e.t-n.t};function G(n,e,t,r){(r=this).c=[],r.b=e||5,r.x=r.b+(n||20),r.r=t}L(G[U],{get:function(n){var e=this.c[A+n];return e&&(e.f++,e.t=f++,e=e.v),e},each:function(n,e,t){for(var r=0,i=(t=this).c;r<i.length;r++)n(i[r].v,e,t)},set:function(n,e){var t=this.c,r=A+n,i=t[r],o=this.b;if(!i){if(t.length>=this.x)for(t.sort(X);o--;)0<(i=t.pop()).f&&this.del(i.o);i={o:n},t.push(i),t[r]=i}i.v=e,i.f=1,i.t=f++},del:function(n){n=A+n;var e=this.c,t=e[n],r=this.r;t&&(t.f=-1,t.v=x,delete e[n],r&&F(r,t.o))},has:function(n){return J(this.c,A+n)}});var K,W=d.isFunction,Y=P.views={},nn=function(n,e){if(Y[y]||(Y[y]=K),!n)return e();T(n)||(n=[n]);for(var t,r=[],i=0,o=function(){i||e.apply(mn,r)},f=function(n,e,t){(n=n(t=function(n){r[e]||(i--,r[e]=n,o())})).then&&n.then(t)},a=0;a<n.length;a++)t=Y[n[a]],W(t)&&!t.extend?(i++,f(t,a)):r[a]=Y[n[a]];o()};function en(){}var tn,rn=function(n,e,t,r,i){return en[U]=e[U],L(i=new en,t),L(n,r),(i.constructor=n)[U]=i,n},on=d.find||d.zepto,fn=on.matchesSelector||on.matches,an=function(n,e){e=n.data,n.eventTarget=e.e,F(e.f,n,e.v)},un=function(n,e,t,r,i){i&&(e+="."+i.i),r?d(n).off(e,t):d(n).on(e,i,t)},cn=function(n){return n},sn=new G,hn=0,dn=function(n,e,t){try{t=decodeURIComponent(t)}catch(n){}tn[e]=t},ln=function(n){var e,t=sn.get(n);return t||(tn={},n==(e=n.replace(l,x))&&m.test(e)&&(e=x),n.replace(e,x).replace($,dn),sn.set(n,t={a:e,b:tn})),{path:t.a,params:L({},t.b)}},vn=function(n,e,t){var r,i,o,f=[];for(i in e)r=e[i]+x,(!t||r||J(t,i))&&(r=encodeURIComponent(r),f.push(o=i+"="+r));return o&&(n+=(n&&(~n.indexOf("?")?"&":"?"))+f.join("&")),n},$n=function(n,e){var t,r={};if(n)for(var i=0,o=n;i<o.length;i++)t=o[i],r[e&&t?t[e]:t]=e?t:1+(0|r[t]);return r},pn=new G,gn=function(n,e,t){return pn.has(n)?t=pn.get(n):(t=F(Function("return "+n)),-1<n.indexOf(A)?Q(e,t):pn.set(n,t)),t},mn={config:function(n,e){return e=P,n&&(e=v(n)?L(e,n):e[n]),e},boot:function(e){L(P,e),nn(P.ini,function(n){L(P,n,e),nn(P.exts,function(){Jn.on(i,Wn),Tn.on(i,Wn),hn=1,Bn()})})},toMap:$n,toTry:F,toUrl:vn,parseUrl:ln,mix:L,has:J,keys:R,inside:_,node:H,applyStyle:D,guid:b,use:nn,Cache:G,nodeId:z,guard:cn},bn={fire:function(n,e,t,r){var i,o,f,a,u=this,c=u[A+n];if(e||(e={}),e.type=n,c)for(o=(i=c.length)-1;i--;)(a=c[f=r?i:o-i]).f?(a.x=1,F(a.f,e,u),a.x=x):a.x||(c.splice(f,1),o--);return(c=u["on"+n])&&F(c,e,u),t&&u.off(n),u},on:function(n,e){var t=A+n;return(this[t]||(this[t]=[])).push({f:e}),this},off:function(n,e){var t,r=A+n,i=this[r];if(e){if(i)for(var o=0,f=i;o<f.length;o++)if((t=f[o]).f==e){t.f=x;break}}else delete this[r],delete this["on"+n];return this}};mn.Event=bn;var wn={},yn={},xn={},kn=0,Vn=function(n){for(var e=0,t=n=(n+x).split(",");e<t.length;e++){var r=t[e];J(yn,r)?yn[r]++:yn[r]=1}return n},In=function(n){for(var e,t=0,r=n;t<r.length;t++)e=r[t],J(yn,e)&&(--yn[e]||(delete yn[e],delete wn[e]))};var Tn=L({get:function(n){var e=n?wn[n]:wn;return e},set:function(n,e){return kn=O(n,wn,xn,e)||kn,this},digest:function(n,e){(n&&Tn.set(n,e),kn)&&(kn=0,this.fire(i,{keys:xn}),xn={})},diff:function(){return xn},clean:function(n){return{ctor:function(){n=Vn(n),this.on("destroy",function(){return In(n)})}}}},bn);mn.State=Tn;var Cn,Sn="view",qn=new G,An=new G,Un=a.location,jn=0,En={query:{},params:{},href:x},Nn=/(?:^.*\/\/[^\/]+|#.*$)/gi,Pn=/^[^#]*#?!?/;function Hn(n,e){return this[j][n]||e!==o&&e||x}var Mn,On,_n,Ln,Rn,Zn=function(n,e){n="#!"+n,e?Un.replace(n):Un.hash=n},Bn=function(){var r,i,o=zn().srcHash;un(a,"hashchange",function(n,e,t){i||(e=zn(),(r=e.srcHash)!=o&&(t=function(){n.p=1,i=x,Zn(o=r),Fn()},n={reject:function(){n.p=1,i=x,Zn(o)},resolve:t,prevent:function(){i=1}},Jn.fire(c,n),i||n.p||t()))}),un(a,"beforeunload",function(n,e,t){if(n=n||a.event,e={},Jn.fire(s,e),t=e.msg)return n&&(n.returnValue=t),t}),Fn()},Dn=t.title,zn=function(n){n=n||Un.href;var e,t,r,i,o=qn.get(n);return o||(o={get:Hn,href:n,srcQuery:e=n.replace(Nn,x),srcHash:t=n.replace(Pn,x),query:r=ln(e),hash:i=ln(t),params:L({},r[j],i[j])},hn&&(!function(n,e){if(Mn||(Mn=P.routes||{},On=P.unmatchView,_n=P.defaultView,Ln=P.defaultPath||"/",Rn=P.rewrite),!n[Sn]){var t=n.hash[E]||Ln;Rn&&(t=Rn(t,n[j],Mn)),e=Mn[t]||On||_n,n[E]=t,n[Sn]=e,v(e)&&L(n,e)}}(o),qn.set(n,o))),o},Fn=function(){var n=zn(),e=function(n,e){var t=n.href,r=e.href,i=t+A+r,o=An.get(i);if(!o){var f,a;o={params:a={},force:!t};for(var u=n[j],c=e[j],s=function(n){var e=u[n],t=c[n];e!=t&&(a[n]={from:e,to:t},f=1)},h=0,d=R(u).concat(R(c));h<d.length;h++)s(d[h]);u=n,c=e,a=o,s(E),s(Sn),An.set(i,o={a:f,b:o})}return o}(En,En=n);return!jn&&e.a&&((Cn=e.b)[E]&&(t.title=n.title||Dn),Jn.fire(i,Cn)),jn=0,Cn},Jn=L({parse:zn,diff:Fn,to:function(n,e,t,r){!e&&v(n)&&(e=n,n=x);var i,o,f,a,u=ln(n),c=u[j],s=u[E],h=En[E],d=En[j],l=En.query[j];if(L(c,e),s)for(h in l)J(c,h)||(c[h]=x);else d&&(s=h,c=L({},d,c));o=En,f=t,a=r,(i=vn(i=s,c,l))!=o.srcHash&&(jn=a,Zn(i,f))}},bn);mn.Router=Jn;var Qn,Xn,Gn=0,Kn=function(n,e,t,r,i,o){if(n&&n.$a!=Gn&&(t=n.$v)&&1<t.$a){(e?function(n,e,t){var r,i=n.$os;if(i)for(var o=0,f=i;o<f.length&&(r=f[o],!(t=J(e,r)));o++);return t}(t,e):Ge(t))&&t.$b();for(var f=0,a=n.children();f<a.length;f++)o=a[f],Kn(Yn[o],e)}},Wn=function(n,e,t){e=re(),(t=n[Sn])?e.mountView(t.to):(Gn=f++,Kn(e,n.keys))},Yn={},ne=function(n){if(!n.$b&&!n.$d&&n.$cc==n.$rc){n.$cr||(n.$cr=1,n.$ca=0,n.fire("created"));var e=n.id,t=n.pId,r=Yn[t];r&&!J(r.$e,e)&&(r.$e[e]=1,r.$rc++,ne(r))}},ee=function(n,e){if(!n.$ca&&n.$cr){n.$cr=0,n.$ca=1,n.fire("alter",e);var t=n.id,r=n.pId,i=Yn[r];i&&J(i.$e,t)&&(i.$rc--,delete i.$e[t],ee(i,e))}},te=function(n,e,t,r){return r=(r=(r=Yn[n])&&r.$v)?r.$d.$a:{},0<e.indexOf(A)&&Q(r,t),r},re=function(n){return Qn||(g=t.body,n=P.rootId,H(n)||(g.id=n),Qn=new fe(n)),Qn},ie=function(n,e){J(Yn,n)||(Yn[n]=e,fe.fire("add",{vframe:e}),(n=H(n))&&(n.vframe=e))},oe=[];function fe(n,e,t){(t=this).id=n,t.$c={},t.$cc=0,t.$rc=0,t.$g=t.$g||1,t.$e={},t.$f=[],t.pId=e,ie(n,t)}L(fe,{all:function(){return Yn},get:function(n){return Yn[n]}},bn),L(fe[U],bn,{mountView:function(n,e){var t,r,i,o,f,a=this,u=a.id,c=H(u),s=a.pId;!a.$h&&c&&(a.$h=1,a.$i=c.innerHTML),a.unmountView(),a.$b=0,t=ln(n||x),i=t[E],c&&i&&(a[E]=n,o=t[j],te(s,n,o),a.$j=t[E],L(o,e),r=a.$g,nn(i,function(n){if(r==a.$g){if(!n)return P.error(Error("id:"+u+" cannot load:"+i));f=Xe(n),i=new n(u,a,o,c,f),a.$v=i,a.$a=Gn,ze(i),(o=F(i.init,[o,{node:c,deep:!i.tmpl}],i))||(o={then:function(n){return n()}}),r=++a.$g,o.then(function(){r==a.$g&&(i.$b(),i.tmpl||(a.$h=0,i.$e||i.endUpdate()))})}}))},unmountView:function(){var n,e,t=this,r=t.$v,i=t.id;t.$f=[],r&&(Xn||(e=1,Xn={id:i}),t.$b=1,t.unmountZone(0,1),ee(t,Xn),(t.$v=0)<r.$a&&(r.$a=0,delete he[i],delete de[i],r.fire("destroy",0,1,1),Be(r,1),ze(r,1),r.owner=0),r.$a--,(n=H(i))&&t.$h&&d(n).html(t.$i),e&&(Xn=0)),t.$g++},mountVframe:function(n,e,t){var r,i=this,o=i.id,f=i.$c;return ee(i,{id:n}),(r=Yn[n])||(J(f,n)||(i.$n=0,i.$cc++),f[n]=n,(r=oe.pop())?fe.call(r,n,o):r=new fe(n,o)),r.mountView(e,t),r},mountZone:function(n,e){var t,r,i=this,o=[];n=n||i.id;var f,a=d("#"+n+" ["+N+"]");i.$d=1;for(var u=0,c=a;u<c.length;u++)(t=c[u]).$b||(r=z(t),t.$b=1,o.push([r,k(t,N)]));for(var s=0,h=o;s<h.length;s++)r=(f=h[s])[0],t=f[1],i.mountVframe(r,t);i.$d=0,e||ne(i)},unmountVframe:function(n,e){var t,r,i,o;if(n=n?this.$c[n]:this.id,t=Yn[n]){var f=t.$cr,a=t.pId;t.unmountView(),i=f,(o=Yn[r=n])&&(delete Yn[r],fe.fire("remove",{vframe:o,fcc:i}),(r=H(r))&&(r.$b=0,r.vframe=0,r.$a=0)),t.id=t.pId=t.$c=t.$e=0,t.$h=0,t.off("alter"),t.off("created"),oe.push(t),(t=Yn[a])&&J(t.$c,n)&&(delete t.$c[n],t.$n=0,t.$cc--,e||ne(t))}},unmountZone:function(n,e){var t;for(t in this.$c)(!n||t!=n&&_(t,n))&&this.unmountVframe(t,1);e||ne(this)},parent:function(n,e){for(e=this,n=n>>>0||1;e&&n--;)e=Yn[e.pId];return e},children:function(n){return(n=this).$n||(n.$n=R(n.$c))},invoke:function(n,e){var t,r,i,o,f,a=this.$f;return(r=this.$v)&&r.$e?t=(i=r[n])&&F(i,e,r):((o=a[f=A+n])&&(o.r=e===o.a),o={n:n,a:e,k:f},a.push(o),a[f]=o),t}}),mn.Vframe=fe,d.fn.invokeView=function(n,e){for(var t,r=[],i=0;i<this.length;i++)t=this[i].vframe,r.push(t&&t.invoke(n,e));return r};var ae=new G(30,10),ue=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,ce={},se={},he={},de={},le=0,ve=function(n,e){var t,r,i,o,f,a,u=[],c=n,s=k(n,"mx-"+e),h=[],d=q,l=0;if(s&&((f=ae.get(s))||(f={v:(f=s.match(ue)||p)[1],n:f[2],i:f[3]},ae.set(s,f)),f=L({},f,{r:s})),f&&!f.v||se[e]){if((i=de[r=c.$d])&&1==i[c.$e]&&(a=1,d=r),!a){for(h.push(c);c!=g&&(c=c.parentNode);){if(Yn[r=c.id]||(i=de[r=c.$d])&&1==i[c.$e]){d=r;break}h.push(c)}for(var v=0,$=h;v<$.length;v++)s=$[v],(r=de[d])||(r=de[d]={}),r[i=s.$e||(s.$e=++le)]=1,s.$d=d}c=n.id,Yn[c]&&(l=d=c);do{if((t=Yn[d])&&(a=t.$v)){if(o=(i=a.$so)[e])for(c=o.length;c--;)i={r:r=o[c],v:d,n:r},r?!l&&fn(n,r)&&u.push(i):l&&u.unshift(i);if(a.tmpl&&!l){f&&!f.v&&(f.v=d);break}l=0}}while(t&&(d=t.pId))}return f&&u.push(f),u},$e=function(n){for(var e,t,r,i,o,f,a,u=n.target,c=n.type,s=[];u!=g;){if((e=ve(u,c)).length){s=[];for(var h=0,d=e;h<d.length;h++){var l=d[h],v=l.v,$=(l.r,l.n),p=l.i;if(f!=v){if(f&&n.isPropagationStopped())break;f=v}(i=(r=Yn[v])&&r.$v)?(o=i[$+A+c])&&(n.eventTarget=u,a=p?gn(p,i.$d.$a):{},n[j]=a,F(o,n,i)):n.stopPropagation()}}if((t=he[o=u.$d])&&(t=t[u.$e])&&t[c]||n.isPropagationStopped()){s.length&&s.push(o);break}f=u.id,Yn[f]&&s.push(f),s.push(u),u=u.parentNode||g}if(o=s.length)for(t=q;o--;)(i=s[o]).nodeType?((e=he[t])||(e=he[t]={}),(a=e[f=i.$e||(i.$e=++le)])||(a=e[f]={}),a[c]=1):t=i},pe="http://www.w3.org/2000/svg",ge="http://www.w3.org/1998/Math/MathML",me={option:[1,"<select multiple>"],thead:[1,"<table>"],col:[2,"<table><colgroup>"],tr:[2,"<table><tbody>"],td:[3,"<table><tbody><tr>"],area:[1,"<map>"],param:[1,"<object>"],g:[1,'<svg xmlns="'+pe+'">'],m:[1,'<math xmlns="'+ge+'">'],_:[0,""]},be=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;me.optgroup=me.option,me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td;var we=t.implementation.createHTMLDocument(x),ye=we.createElement("base");ye.href=t.location.href,we.head.appendChild(ye);var xe=function(n,e){if(1==e.nodeType){var t=z(e);n.$c[t]?n.unmountVframe(t,1):n.unmountZone(t,1)}},ke={INPUT:[V,"checked"],TEXTAREA:[V],OPTION:["selected"]},Ve=function(n,e){return 1==n.nodeType&&(n.$f?e=n.$g:((e=n.$a?x:k(n,"id"))||(e=k(n,S)),e||(e=k(n,N))&&(e=ln(e)[E]),n.$f=1,n.$g=e)),e},Ie=function(n,e,t,r,i){for(var o,f,a,u,c,s=n.lastChild,h=e.firstChild,d=0,l={},v={};s;)d++,(a=Ve(s))&&(a=l[a]||(l[a]=[])).push(s),s=s.previousSibling;for(;h;)(a=Ve(h))&&(v[a]=(v[a]||0)+1),h=h.nextSibling;for(h=e.firstChild,s=n.firstChild;h;)if(d--,h=(o=h).nextSibling,(u=l[a=Ve(o)])&&(u=u.pop())){for(;u!=s;)c=s.nextSibling,n.appendChild(s),s=c;s=u.nextSibling,v[a]&&v[a]--,Te(u,o,n,t,r,i)}else s?(a=Ve(f=s))&&l[a]&&v[a]?(d++,t.c=1,t.n.push([8,n,o,f])):(s=s.nextSibling,Te(f,o,n,t,r,i)):(t.c=1,t.n.push([1,n,o]));for(f=n.lastChild;0<d--;)xe(r,f),t.n.push([2,n,f]),f=f.previousSibling,t.c=1},Te=function(n,e,t,r,i,o){if(function(n,e){var t,r=n.nodeName,i=ke[r],o=0;if(i)for(var f=0,a=i;f<a.length;f++)n[t=a[f]]!=e[t]&&(o=1,n[t]=e[t]);return o}(n,e)||1==n.nodeType&&n.hasAttribute("mxv")||!n.isEqualNode||!n.isEqualNode(e))if(n.nodeName===e.nodeName)if(1===n.nodeType){var f=k(e,S);if(f&&f==k(n,S))return;var a=k(e,N),u=e.innerHTML,c=k(e,"mxa"),s=!c||c!=k(n,"mxa"),h=void 0,d=void 0,l=Yn[k(n,"id")],v=void 0,$=void 0,p=a&&ln(a),g=void 0,m=void 0,b=void 0;if(a&&l&&(!k(e,"id")||k(e,"id")==k(n,"id"))&&l.$j==p[E]&&($=l.$v)){if(m=u!=l.$i,b=a!=l[E],v=k(n,"mxv"),!m&&!b&&v)for(var w=0,y=g=v.split(I);w<y.length;w++)if((v=y[w])==q||J(o,v)){b=1;break}(b||m)&&((v=$.$e&&$.$f)?(g=p[j],te(l.pId,a,g),l.$i=u,l[E]=a,p={node:e,deep:!$.tmpl,attr:s,inner:m,query:b,keys:o},F(v,[g,p],$)&&r.v.push($),h=p.deep):h=d=1)}else h=1,d=l;d&&(r.c=1,l.unmountVframe(0,1)),s&&function(n,e,t,r){var i,o,f,a;delete n.$f;var u=n.attributes,c=e.attributes;for(o=u.length;o--;)i=u[o].name,e.hasAttribute(i)||("id"==i?r||t.d.push([n,x]):(t.c=1,n.removeAttribute(i)));for(o=c.length;o--;)f=(i=c[o]).name,a=i[V],k(n,f)!=a&&("id"==f?t.d.push([n,a]):(t.c=1,n.setAttribute(f,a)))}(n,e,r,l&&a),h&&Ie(n,e,r,i,o)}else n.nodeValue!==e.nodeValue&&(r.c=1,n.nodeValue=e.nodeValue);else xe(i,n),r.c=1,r.n.push([4,t,e,n])},Ce={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},Se=/[&<>"'\`]/g,qe=function(n){return""+(null==n?"":n)},Ae=function(n){return"&"+Ce[n]+";"},Ue=function(n){return qe(n).replace(Se,Ae)},je=function(n,e,t,r){for(r=n[A];--r;)if(n[t=A+r]===e)return t;return n[t=A+n[A]++]=e,t},Ee={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},Ne=function(n){return Ee[n]},Pe=/[!')(*]/g,He=function(n){return encodeURIComponent(qe(n)).replace(Pe,Ne)},Me=/[\\'"]/g,Oe=function(n){return qe(n).replace(Me,"\\$&")},_e=function(e,t){var n,r,i=e.$k,o=e.$c,f=e.$b,a=Yn[f],u=a&&a.$v,c={d:[],v:[],n:[]},s=H(f),h=e.$d,d=e.$a,l=function(n){t.i<t.length?_e(e,t):(c=t.slice(),t.i=t.length=0,n&&u.fire("domready"),F(c))};if(t.i=t.length,e.$c=0,e.$k={},o&&u&&0<u.$a&&(n=u.tmpl)&&u.$d==e){u.fire("dompatch"),delete he[f],delete de[f],r=function(n,e){var t,r=we.createElement("div"),i=e.namespaceURI;t=i==pe?"g":i==ge?"m":(be.exec(n)||[0,""])[1];var o=me[t]||me._;r.innerHTML=o[1]+n;for(var f=o[0];f--;)r=r.lastChild;return r}(n(h,f,d,Ue,qe,He,je,Oe),s),Ie(s,r,c,a,i);for(var v=0,$=c.d;v<$.length;v++)(r=$[v])[0].id=r[1];for(var p=0,g=c.n;p<g.length;p++)1==(r=g[p])[0]?r[1].appendChild(r[2]):2==r[0]?r[1].removeChild(r[2]):4==r[0]?r[1].replaceChild(r[2],r[3]):r[1].insertBefore(r[2],r[3]);a.$d=n=c.c||!u.$e;for(var m=0,b=c.v;m<b.length;m++)(r=b[m]).$b();n&&u.endUpdate(f),c.c&&w.trigger({type:"htmlchanged",vId:f}),l(1)}else l()};function Le(n){var e,t=this;t.$b=n,t.$c=1,t.$d={vId:n},t.$a=((e={})[A]=1,e),t.$e=[],t.$k={}}L(Le[U],{get:function(n,e){return e=this.$d,n&&(e=e[n]),e},set:function(n,e){var t=this;return t.$c=O(n,t.$d,t.$k,e)||t.$c,t},digest:function(n,e,t){var r=this.set(n,e),i=r.$e;t&&i.push(t),i.i||_e(r,i)},snapshot:function(){return this.$f=h(this.$d),this},altered:function(){if(this.$f)return this.$f!=h(this.$d)},translate:function(n){return Q(this.$d,n)},parse:function(n){return gn(n,this.$a)}});var Re=/^(\$?)([^<]*)<([^>]+)>(?:&(.+))?$/,Ze=function(n,e,t){return n.a?t=n:((t=function(n){F(t.a,n,this)}).a=[n],t.b=1),t.a=t.a.concat(e.a||e),t},Be=function(n,e){var t,r,i=n.$r;for(t in i)r=i[t],(e||r.x)&&De(i,t,1)},De=function(n,e,t,r){var i,o,f=n[e];return f&&f!=r&&((i=(o=f.e).destroy)&&t&&F(i,p,o),delete n[e]),o},ze=function(n,e){var t,r,i,o,f,a,u=n.$eo,c=n.$so,s=n.$el,h=n.id;for(t in u)i=c[r=t],o=e,void 0,f=0|ce[r],a=o?-1:1,f&&o!==f||un(g,r,$e,o),ce[r]=f+a,i&&(se[r]=(0|se[r])+a);for(var d=0,l=s;d<l.length;d++)t=l[d],un(t.e,t.n,an,e,{i:h,v:n,f:t.f,m:t.m,e:t.e})},Fe={win:a,doc:t},Je=function(n,e,t){for(var r,i,o,f,a={},u=0,c=n;u<c.length;u++)for(r in i=c[u])o=i[r],f=a[r],"ctor"!=r?(Re.test(r)&&(f?o=Ze(f,o):o.b=1),a[r]=o):t.push(o);for(r in a)J(e,r)||(e[r]=a[r])};function Qe(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=this._||(this._=[]);return Je(n,this[U],t),this}var Xe=function(n){if(!n[A]){n[A]=[];var e=n[U],t=void 0,r=void 0,i=void 0,o=void 0,f={},a=[],u={},c=void 0,s=void 0,h=void 0,d=void 0,l=void 0,v=void 0,$=void 0;for(h in(r=e.mixins)&&Je(r,e,n[A]),e)if(t=e[h],r=h.match(Re)){if(s=r[1],i=r[2],o=r[3],v={},$=r[4])for(var p=0,g=$=$.split(I);p<g.length;p++)v[d=g[p]]=!0;for(var m=0,b=o=o.split(I);m<b.length;m++){if(d=b[m],c=Fe[i],l=1,s){if(c){a.push({f:t,e:c,n:d,m:v});continue}l=2,(c=u[d])||(c=u[d]=[]),c[i]||(c[i]=1,c.push(i))}f[d]=f[d]|l,(c=e[d=i+A+d])?c.b&&(t.b?e[d]=Ze(t,c):J(e,h)&&(e[d]=t)):e[d]=t}}x="$b",k=(w=e)[y="render"],w[y]=w[x]=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];0<(V=this).$a&&(V.$a++,V.fire("rendercall"),Be(V),F(k,n,V))},e.$eo=f,e.$el=a,e.$so=u,e.$f=e.assign}var w,y,x,k,V;return n[A]},Ge=function(n){var e,t,r,i=n.$l;if(i.f&&(i.p&&(e=Cn[E]),!e&&i.k)){r=Cn[j];for(var o=0,f=i.k;o<f.length&&(t=f[o],!(e=J(r,t)));o++);}return e};function Ke(n,e,t,r,i){(i=this).owner=e,i.id=n,i.$l={k:[]},i.$r={},i.$a=1,i.updater=i.$d=new Le(i.id),(n=Ke._)&&F(n,[t,{node:r,deep:!i.tmpl}],i)}L(Ke,{merge:Qe,extend:function n(e,t){var c=this,r=(e=e||{}).ctor,s=[];function h(n,e,t,r,i,o,f,a,u){c.call(f=this,n,e,t,r,i),o=h._,a=[t,{node:r,deep:!f.tmpl}],o&&F(o,a,f),(u=s.concat(i)).length&&F(u,a,f)}return r&&s.push(r),h.merge=Qe,h.extend=n,rn(h,c,e,t)}}),L(Ke[U],bn,{init:n,beginUpdate:function(n,e){0<(e=this).$a&&e.$e&&e.owner.unmountZone(n,1)},endUpdate:function(n,e,t,r,i){0<(t=this).$a&&(n=n||t.id,e?i=e:(i=t.$e,t.$e=1),(r=t.owner).mountZone(n,e),i||u(t.wrapAsync(function(){!function(n,e,t){for(e=n.$f;e.length;)(t=e.shift()).r||n.invoke(t.n,t.a),delete e[t.k]}(r)}),0))},wrapAsync:function(t,r){var i=this,o=i.$a;return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(0<o&&o==i.$a)return t.apply(r||i,n)}},observeLocation:function(n,e){var t;(t=this.$l).f=1,v(n)&&(e=n[E],n=n[j]),t.p=e,n&&(t.k=(n+x).split(I))},observeState:function(n){this.$os=(n+x).split(I)},capture:function(n,e,t,r){return r=this.$r,e?(De(r,n,1,e),r[n]={e:e,x:t}):e=(r=r[n])&&r.e,e},release:function(n,e){return De(this.$r,n,e)},leaveTip:function(r,i){var o=this,f=function(n){var e="a",t="b";n.type!=c&&(e="b",t="a"),f[e]?(n.prevent(),n.reject()):i()&&(n.prevent(),f[t]=1,o.leaveConfirm(function(){f[t]=0,n.resolve()},function(){f[t]=0,n.reject()},r))},n=function(n){i()&&(n.msg=r)};Jn.on(c,f),Jn.on(s,n),o.on("unload",f),o.on("destroy",function(){Jn.off(c,f),Jn.off(s,n)})},render:n}),mn.View=Ke;var We=d.type,Ye=Date.now;function nt(){this.id=b("b"),this.$={}}L(nt[U],{get:function(n,e){var t=this.$;if(n){for(var r=T(n)?n.slice():(n+x).split("."),i=void 0;(i=r.shift())&&t;)t=t[i];i&&(t=o)}return e!==o&&We(e)!=We(t)&&(t=e),t},set:function(n,e){var t;v(n)||((t={})[n]=e,n=t),L(this.$,n)}});function et(n,e,t){(t=this[n])&&(delete this[n],F(t,e,t.e))}var tt=function(n,e,t,r,i){if(n.$d)return n;if(n.$e)return n.enqueue(tt.bind(n,n,e,t,r,i));n.$e=1,T(e)||(e=[e]);for(var u,c,s,h,d,l,v,$,p,o=n.constructor,f=0,a=o.$f,g=(u=t,c=o,s=n,h=e.length,d=r,l=o.$c,v=[],$=C,p=0,function(n,e){p++;var t,r,i=this,o=i.$b,f=o.k;if(v[n+1]=i,e?($=e,t=1):l.has(f)||(f&&l.set(f,i),o.t=Ye(),(r=o.a)&&F(r,i,i),(r=o.x)&&c.clear(r),t=1),!s.$d){var a=p==h;a&&(s.$e=0,2==d&&(v[0]=$,F(u,v,s))),1==d&&F(u,[e||C,i,a,n],s)}t&&c.fire("end",{bag:i,error:e})}),m=0,b=e;m<b.length;m++){var w=b[m];if(w){var y=o.get(w,i),x=y.e,k=x.$b.k,V=g.bind(x,f++),I=void 0;k&&a[k]?a[k].push(V):y.u?(k&&((I=[V]).e=x,a[k]=I,V=et.bind(a,k)),o.$s(x,V)):V()}}return n};function rt(){var n=this;n.id=b("s"),n.$g=[]}L(rt[U],{all:function(n,e){return tt(this,n,e,2)},save:function(n,e){return tt(this,n,e,2,1)},one:function(n,e){return tt(this,n,e,1)},enqueue:function(n){var e=this;return e.$d||(e.$g.push(n),e.dequeue(e.$h)),e},dequeue:function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t,r=this;r.$e||r.$d||(r.$e=1,u(function(){r.$e=0,r.$d||(t=r.$g.shift())&&F(t,r.$h=n)},0))},destroy:function(n){(n=this).$d=1,n.$g=0}});var it=function(n,e){return[h(e),h(n)].join(A)},ot=function(n,e,t,r){(r=n&&n.$b)&&e[r.n]&&t.del(r.k)},ft=L({add:function(n){var e,t=this.$b;T(n)||(n=[n]);for(var r=0,i=n;r<i.length;r++)if(e=i[r]){var o=e.name,f=e.cache;e.cache=0|f,t[o]=e}},create:function(n){var e=this.meta(n),t=0|n.cache||e.cache,r=new nt;r.set(e),r.$b={n:e.name,a:e.after,x:e.cleans,k:t&&it(e,n)},v(n)&&r.set(n);var i=e.before;return i&&F(i,r,r),this.fire("begin",{bag:r}),r},meta:function(n){return this.$b[n.name||n]||n},get:function(n,e){var t,r;return e||(t=this.cached(n)),t||(t=this.create(n),r=1),{e:t,u:r}},clear:function(n){this.$c.each(ot,$n((n+x).split(I)))},cached:function(n){var e,t,r=this.$c,i=this.meta(n),o=0|n.cache||i.cache;if(o&&(t=it(i,n)),t){var f=this.$f[t];f?e=f.e:(e=r.get(t))&&Ye()-e.$b.t>o&&(r.del(t),e=0)}return e}},bn);return rt.extend=function(n,e,t){function r(){rt.call(this)}return r.$s=n,r.$c=new G(e,t),r.$f={},r.$b={},rn(r,rt,C,ft)},mn.Service=rt,L(n[U],bn),n.extend=function n(e,t){var r=this,i=e&&e.ctor;function o(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];r.apply(this,n),i&&i.apply(this,n)}return o.extend=n,rn(o,r,e,t)},mn.Base=n,K=Ke.extend(),mn.addView=function(n,e){Y[n]=e},mn}();