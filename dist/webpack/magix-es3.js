/*!3.8.12 MIT kooboy_li@163.com*/module.exports=function(){var h=require("$"),e=h.isPlainObject,a=h.isArray,u=0,V="",b=[],n=window,m=document,k=(n.setTimeout,"value"),T="mxs",j="#";var g,t=JSON.stringify,w="\x1e",r="object",y="prototype",U="params",A="path",C="mx-view",i=/[#?].*$/,o=/([^=&?\/#]+)=?([^&#?]*)/g,c=/(?!^)=|&/,d=function(n){return(n||"mx_")+u++},s={rootId:d(),error:function(n){throw n}},x=function(n){return typeof n==r?n:m.getElementById(n)},$=function(n){return!n||typeof n!=r},v=function(n,t,e){if(n=x(n),t=x(t),n&&t&&!(e=n==t))try{e=16==(16&t.compareDocumentPosition(n))}catch(n){}return e};function l(n){for(var t,e=1,r=arguments.length;e<r;e++)for(var i in t=arguments[e])S(t,i)&&(n[i]=t[i]);return n}var p=s.hasOwnProperty,I=document.head,M=document.createElement("div"),_=function(n,t){t&&!_[n]&&(_[n]=1,M.innerHTML="<style>"+t,I.appendChild(M.firstChild))},Z=function(n){return n.id||(n.id=d())},O=function(n,t,e,r,i){t=t||b,a(n)||(n=[n]),a(t)||(t=[t]);for(var o=0,f=n;o<f.length;o++){i=f[o];try{r=i&&i.apply(e,t)}catch(n){s.error(n)}}return r},S=function(n,t){return n&&p.call(n,t)},L=function(n,t){var e,r;if($(t))(e=t+V)[0]==w&&S(n,e)&&(t=n[e]);else for(e in t)r=t[e],r=L(n,r),t[e]=r;return t},N=function(n,t){return t.f-n.f||t.t-n.t};function P(n,t,e,r){(r=this).c=[],r.b=t||5,r.x=r.b+(n||20),r.r=e}l(P[y],{get:function(n){var t=this.c[w+n];return t&&(t.f++,t.t=u++,t=t.v),t},set:function(n,t){var e=this.c,r=w+n,i=e[r],o=this.b;if(!i){if(e.length>=this.x)for(e.sort(N);o--;)0<(i=e.pop()).f&&this.del(i.o);i={o:n},e.push(i),e[r]=i}i.v=t,i.f=1,i.t=u++},del:function(n){n=w+n;var t=this.c,e=t[n],r=this.r;e&&(e.f=-1,e.v=V,delete t[n],r&&O(r,e.o))},has:function(n){return S(this.c,w+n)}});var z=h.isFunction,E=s.views={},H=function(n,t){if(!n)return t();a(n)||(n=[n]);for(var e,r=[],i=0,o=function(){i||t.apply(rn,r)},f=function(n,t,e){(n=n(e=function(n){r[t]||(i--,r[t]=n,o())})).then&&n.then(e)},u=0;u<n.length;u++)e=E[n[u]],z(e)&&!e.extend?(i++,f(e,u)):r[u]=E[n[u]];o()};function q(){}var R,B,F,G=function(n,t,e,r,i){return q[y]=t[y],l(i=new q,e),l(n,r),(i.constructor=n)[y]=i,n},D=h.find||h.zepto,J=D.matchesSelector||D.matches,K=function(n,t){t=n.data,n.eventTarget=t.e,O(t.f,n,t.v)},Q=function(n,t,e,r,i){i&&(t+="."+i.i),r?h(n).off(t,e):h(n).on(t,i,e)},W=function(n){return n},X=new P,Y=function(n,t,e){try{e=decodeURIComponent(e)}catch(n){}R[t]=e},nn=function(n){var t,e=X.get(n);return e||(R={},n==(t=n.replace(i,V))&&c.test(t)&&(t=V),n.replace(t,V).replace(o,Y),X.set(n,e={a:t,b:R})),{path:e.a,params:l({},e.b)}},tn=new P,en=function(n,t,e){return tn.has(n)?e=tn.get(n):(e=O(Function("return "+n)),-1<n.indexOf(w)?L(t,e):tn.set(n,e)),e},rn={config:function(n,t){return t=s,n&&(t=e(n)?l(t,n):t[n]),t},boot:function(n){l(s,n),H(s.exts,function(){dn().mountView(s.defaultView)})},toMap:function(n,t){var e,r={};if(n)for(var i=0,o=n;i<o.length;i++)e=o[i],r[t&&e?e[t]:e]=t?e:1+(0|r[e]);return r},toTry:O,toUrl:function(n,t,e){var r,i,o,f=[];for(i in t)r=t[i]+V,(!e||r||S(e,i))&&(r=encodeURIComponent(r),f.push(o=i+"="+r));return o&&(n+=(n&&(~n.indexOf("?")?"&":"?"))+f.join("&")),n},parseUrl:nn,mix:l,has:S,keys:function(n,t,e){for(e in t=[],n)S(n,e)&&t.push(e);return t},inside:v,node:x,applyStyle:_,guid:d,use:H,Cache:P,fire:G_Trigger,nodeId:Z,guard:W},on={fire:function(n,t,e,r){var i,o,f,u,a=this,c=a[w+n];if(t||(t={}),t.type=n,c)for(o=(i=c.length)-1;i--;)(u=c[f=r?i:o-i]).f?(u.x=1,O(u.f,t,a),u.x=V):u.x||(c.splice(f,1),o--);return(c=a["on"+n])&&O(c,t,a),e&&a.off(n),a},on:function(n,t){var e=w+n;return(this[e]||(this[e]=[])).push({f:t}),this},off:function(n,t){var e,r=w+n,i=this[r];if(t){if(i)for(var o=0,f=i;o<f.length;o++)if((e=f[o]).f==t){e.f=V;break}}else delete this[r],delete this["on"+n];return this}};rn.Event=on;var fn={},un=function(n){if(!n.$a&&!n.$b&&n.$cc==n.$rc){n.$cr||(n.$cr=1,n.$ca=0,n.fire("created"));var t=n.id,e=n.pId,r=fn[e];r&&!S(r.$d,t)&&(r.$d[t]=1,r.$rc++,un(r))}},an=function(n,t){if(!n.$ca&&n.$cr){n.$cr=0,n.$ca=1,n.fire("alter",t);var e=n.id,r=n.pId,i=fn[r];i&&S(i.$d,e)&&(i.$rc--,delete i.$d[e],an(i,t))}},cn=function(n,t,e,r){return r=(r=(r=fn[n])&&r.$v)?r.$a.$a:{},0<t.indexOf(w)&&L(r,e),r},dn=function(n){return B||(g=m.body,n=s.rootId,x(n)||(g.id=n),B=new $n(n)),B},sn=function(n,t){S(fn,n)||(fn[n]=t,$n.fire("add",{vframe:t}))},hn=[];function $n(n,t,e){(e=this).id=n,e.$c={},e.$cc=0,e.$rc=0,e.$e=e.$e||1,e.$d={},e.pId=t,sn(n,e)}l($n,{all:function(){return fn},get:function(n){return fn[n]}},on),l($n[y],on,{mountView:function(n,t){var e,r,i,o,f,u=this,a=u.id,c=x(a),d=u.pId;!u.$f&&c&&(u.$f=1,u.$g=c.innerHTML),u.unmountView(),u.$a=0,e=nn(n||V),i=e[A],c&&i&&(u[A]=n,o=e[U],cn(d,n,o),u.$h=e[A],l(o,t),r=u.$e,H(i,function(n){if(r==u.$e){if(!n)return s.error(Error("id:"+a+" cannot load:"+i));f=tt(n),i=new n(a,u,o,c,f),u.$v=i,Wn(i),i.$d(),i.tmpl||(u.$f=0,i.$e||i.endUpdate())}}))},unmountView:function(){var n,t,e=this,r=e.$v,i=e.id;r&&(F||(t=1,F={id:i}),e.$a=1,e.unmountZone(0,1),an(e,F),(e.$v=0)<r.$b&&(r.$b=0,delete mn[i],delete bn[i],r.fire("destroy",0,1,1),Wn(r,1),r.owner=0),r.$b--,(n=x(i))&&e.$f&&(n.innerHTML=e.$g),t&&(F=0)),e.$e++},mountVframe:function(n,t,e){var r,i=this.id,o=this.$c;return an(this,{id:n}),(r=fn[n])||(S(o,n)||this.$cc++,o[n]=n,(r=hn.pop())?$n.call(r,n,i):r=new $n(n,i)),r.mountView(t,e),r},mountZone:function(n,t){var e,r,i=this,o=[];n=n||i.id;var f,u=h("#"+n+" ["+C+"]");i.$b=1;for(var a=0,c=u;a<c.length;a++)(e=c[a]).$a||(r=Z(e),e.$a=1,o.push([r,e.getAttribute(C)]));for(var d=0,s=o;d<s.length;d++)r=(f=s[d])[0],e=f[1],i.mountVframe(r,e);i.$b=0,t||un(i)},unmountVframe:function(n,t){var e,r,i,o;if(n=n?this.$c[n]:this.id,e=fn[n]){var f=e.$cr,u=e.pId;e.unmountView(),i=f,(o=fn[r=n])&&(delete fn[r],$n.fire("remove",{vframe:o,fcc:i}),(r=x(r))&&(r.$a=0)),e.id=e.pId=e.$c=e.$d=0,e.off("alter"),e.off("created"),hn.push(e),(e=fn[u])&&S(e.$c,n)&&(delete e.$c[n],e.$cc--,t||un(e))}},unmountZone:function(n,t){var e;for(e in this.$c)(!n||e!=n&&v(e,n))&&this.unmountVframe(e,1);t||un(this)}}),rn.Vframe=$n;var vn=new P(30,10),pn=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,ln={},gn={},mn={},bn={},wn=0,yn=function(n,t){var e,r,i,o,f,u,a=[],c=n,d=n.getAttribute("mx-"+t),s=[],h=j,$=0;if(d&&((f=vn.get(d))||(f={v:(f=d.match(pn)||b)[1],n:f[2],i:f[3]},vn.set(d,f)),f=l({},f,{r:d})),f&&!f.v||gn[t]){if((i=bn[r=c.$b])&&1==i[c.$d]&&(u=1,h=r),!u){for(s.push(c);c!=g&&(c=c.parentNode);){if(fn[r=c.id]||(i=bn[r=c.$b])&&1==i[c.$d]){h=r;break}s.push(c)}for(var v=0,p=s;v<p.length;v++)d=p[v],(r=bn[h])||(r=bn[h]={}),r[i=d.$d||(d.$d=++wn)]=1,d.$b=h}c=n.id,fn[c]&&($=h=c);do{if((e=fn[h])&&(u=e.$v)){if(o=(i=u.$so)[t])for(c=o.length;c--;)i={r:r=o[c],v:h,n:r},r?!$&&J(n,r)&&a.push(i):$&&a.unshift(i);if(u.tmpl&&!$){f&&!f.v&&(f.v=h);break}$=0}}while(e&&(h=e.pId))}return f&&a.push(f),a},xn=function(n){for(var t,e,r,i,o,f,u,a=n.target,c=n.type,d=[];a!=g;){if((t=yn(a,c)).length){d=[];for(var s=0,h=t;s<h.length;s++){var $=h[s],v=$.v,p=($.r,$.n),l=$.i;if(f!=v){if(f&&n.isPropagationStopped())break;f=v}(i=(r=fn[v])&&r.$v)?(o=i[p+w+c])&&(n.eventTarget=a,u=l?en(l,i.$a.$a):{},n[U]=u,O(o,n,i)):n.stopPropagation()}}if((e=mn[o=a.$b])&&(e=e[a.$d])&&e[c]||n.isPropagationStopped()){d.length&&d.push(o);break}f=a.id,fn[f]&&d.push(f),d.push(a),a=a.parentNode||g}if(o=d.length)for(e=j;o--;)(i=d[o]).nodeType?((t=mn[e])||(t=mn[e]={}),(u=t[f=i.$d||(i.$d=++wn)])||(u=t[f]={}),u[c]=1):e=i},In={input:1,br:1,hr:1,img:1,embed:1,source:1,area:1,param:1,col:1,track:1,wbr:1},Vn=/^<([a-z\d]+)((?:\s+[-A-Za-z\d_]+(?:="[^"]*")?)*)\s*(\/?)>/,kn=/([-A-Za-z\d_]+)(?:="([^"]*)")?/g,Tn=/^<\/[a-z\d]+>/,jn={input:[k,"checked"],textarea:[k],option:["selected"]},Un=u;var An=function(n,t){var e=Z(t);n.$c[e]?n.unmountVframe(e,1):n.unmountZone(e,1)},Cn={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Mn=function(n,t,e,r){var i,o,f=e.i,u=t.i;if(t)for(i in u)S(f,i)||("id"==i?r.d.push([n,V]):(r.c=1,n.removeAttribute(i)));for(i in f)o=f[i],t&&u[i]===o||("id"==i?r.d.push([n,o]):(r.c=1,n.setAttribute(i,o)))},_n=function(n,t,e){var r,i=n.e;return i==Un?r=m.createTextNode(n.j):(r=m.createElementNS(Cn[i]||t.namespaceURI,i),Mn(r,0,n,e),n.c&&(r.innerHTML=n.c)),r},Zn=function(n,t,e,r,i,o){if(t){if(t.r||t.c!=e.c){var f=void 0,u=0,a=t.b,c=e.b,d=void 0,s=void 0,h=a.length,$=c.length,v=e.a,p=n.childNodes,l=void 0,g=void 0,m=void 0,b={};for(f=h;f--;)(l=(d=a[f]).m)&&(l=b[l]||(b[l]=[])).push({p:p[f],q:d});for(f=0;f<$;f++){for(;(d=a[u++])&&d.s;);(l=b[(s=c[f]).m])&&(l=l.pop())?(g=l.p,m=l.q,g!=p[f]&&(m.s=1,d=m,n.insertBefore(g,p[f])),On(p[f],n,d,s,r,i,o)):d?b[d.m]&&v[d.m]?(h++,u--,r.c=1,n.insertBefore(_n(s,n,r),p[f])):On(p[f],n,d,s,r,i,o):(n.appendChild(_n(s,n,r)),r.c=1)}for(f=$;f<h;f++)u=p[$],An(i,u),n.removeChild(u),r.c=1}}else r.c=1,n.innerHTML=e.c},On=function(n,t,e,r,i,o,f,u){var a=e.i,c=r.i;if(function(n,t,e){var r,i,o=t.e,f=jn[o],u=e.i,a=0;if(f)for(var c=0,d=f;c<d.length;c++)r=d[c],i=S(u,r)?r!=k||u[r]:r==k&&V,n[r]!=i&&(a=1,n[r]=i);return a}(n,e,r)||(u=e.r)||e.j!=r.j)if(e.e==r.e){if(e.e==Un)i.c=1,n.nodeValue=r.j;else if(!a[T]||a[T]!=c[T]){var d=c[C],s=r.c,h=e.f!=r.f,$=void 0,v=void 0,p=fn[n.id],l=void 0,g=void 0,m=d&&nn(d),b=void 0,w=void 0,y=void 0;if(d&&p&&p.$h==m[A]&&a.id==c.id&&(g=p.$v)){if(w=s!=e.c,y=d!=p[A],l=a.mxv,!w&&!y&&l)for(var x=u=0,I=b=l.split(",");x<I.length;x++)if((l=I[x])==j||S(f,l)){y=1;break}(y||w||u)&&((l=g.$e&&g.$f)?(b=m[U],cn(p.pId,d,b),p[A]=d,m={node:n,attr:h,deep:!g.tmpl,inner:w,query:y,keys:f},O(l,[b,m],g)&&i.v.push(g),$=m.deep):$=v=1)}else $=1,v=p;v&&(i.c=1,p.unmountVframe(0,1)),h&&Mn(n,e,r,i),!$||r.n&&e.n||Zn(n,e,r,i,o,f)}}else An(o,n),t.replaceChild(_n(r,t,i),n),i.c=1},Sn={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},Ln=/[&<>"'\`]/g,Nn=function(n){return""+(null==n?"":n)},Pn=function(n){return"&"+Sn[n]+";"},zn=function(n){return Nn(n).replace(Ln,Pn)},En=function(n,t,e,r){for(r=n[w];--r;)if(n[e=w+r]===t)return e;return n[e=w+n[w]++]=t,e},Hn={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},qn=function(n){return Hn[n]},Rn=/[!')(*]/g,Bn=function(n){return encodeURIComponent(Nn(n)).replace(Rn,qn)},Fn=/[\\'"]/g,Gn=function(n){return Nn(n).replace(Fn,"\\$&")},Dn=function(t,e){var n,r,i=t.$k,o=t.$c,f=t.$b,u=fn[f],a=u&&u.$v,c={d:[],v:[]},d=x(f),s=t.$d,h=t.$a,$=function(n){e.i<e.length?Dn(t,e):(c=e.slice(),e.i=e.length=0,n&&a.fire("domready"),O(c))};if(e.i=e.length,t.$c=0,t.$k={},o&&a&&0<a.$b&&(n=a.tmpl)&&a.$a==t){a.fire("dompatch"),delete mn[f],delete bn[f],r=function(n){for(var t,e,r,i,o,f,u,a,c,d,s,h,$=n.length,v=0,p=0,l={a:{},b:[],c:n},g=n,m=[l];v<$&&(t=1,"<"==g[0]&&("/"==g[1]?(r=g.match(Tn))&&(a=m.pop(),o=n.substring(a.d,v),"textarea"==a.e?(a.f.push({g:k,h:o}),a.i[k]=o,a.b=b):a.c=o,l=m[m.length-1],v+=f=r[0].length,a.j=n.substring(a.k,v),t=0):(r=g.match(Vn))&&(i=r[1],t=r[0],o=[],c={},h=V,u=jn[i],r[2].replace(kn,function(n,t,e){e=e||V,"id"==t?h=e:t==C&&e&&!h?h=nn(e)[A]:t!=T||h?"mxv"==t&&(u=1):h=e,o.push({g:t,h:e}),c[t]=e}),l.l=l.l||u,s=r[3]||S(In,i),a={j:t,m:h,e:i,f:o,i:c,b:[],a:{},k:v,n:s,d:v+=f=t.length},h&&(l.a[h]=1),l.b.push(a),s||(m.push(a),l=a),t=0)),t&&(v+=f=(d=(e=g.indexOf("<"))<0?g:g.substring(0,e)).length,a={e:Un,j:d},l.b.push(a)),p!=v);)g=g.substring(f),p=v;return l}(n(s,f,h,zn,Nn,Bn,En,Gn)),Zn(d,t.$e,r,c,u,i),t.$e=r;for(var v=0,p=c.d;v<p.length;v++)(r=p[v])[0].id=r[1];u.$b=n=c.c||!a.$e;for(var l=0,g=c.v;l<g.length;l++)(r=g[l]).$d();n&&a.endUpdate(f),c.c&&G_Trigger(m,"htmlchanged",{vId:f}),$(1)}else $()};function Jn(n){var t,e=this;e.$b=n,e.$c=1,e.$d={vId:n},e.$a=((t={})[w]=1,t),e.$f=[],e.$k={}}l(Jn[y],{get:function(n,t){return t=this.$d,n&&(t=t[n]),t},set:function(n){var t=this;return t.$c=function(n,t,e){var r,i,o,f=0;for(o in n)r=n[o],i=t[o],$(r)&&i===r||(f=e[o]=1),t[o]=r;return f}(n,t.$d,t.$k)||t.$c,t},digest:function(n,t){var e=this.set(n),r=e.$f;r.push(t),r.i||Dn(e,r)},snapshot:function(){return this.$g=t(this.$d),this},altered:function(){if(this.$g)return this.$g!=t(this.$d)},translate:function(n){return L(this.$d,n)},parse:function(n){return en(n,this.$a)}});var Kn=/^(\$?)([^<]*)<([^>]+)>$/,Qn=function(n,t,e){return n.a?e=n:((e=function(n){O(e.a,n,this)}).a=[n],e.b=1),e.a=e.a.concat(t.a||t),e},Wn=function(n,t){var e,r,i,o,f,u,a=n.$eo,c=n.$so,d=n.$el,s=n.id;for(e in a)i=c[r=e],o=t,void 0,f=0|ln[r],u=o?-1:1,f&&o!==f||Q(g,r,xn,o),ln[r]=f+u,i&&(gn[r]=(0|gn[r])+u);for(var h=0,$=d;h<$.length;h++)e=$[h],Q(e.e,e.n,K,t,{i:s,v:n,f:e.f,e:e.e})},Xn={win:n,doc:m},Yn=function(n,t,e){for(var r,i,o,f,u={},a=0,c=n;a<c.length;a++)for(r in i=c[a])o=i[r],f=u[r],"ctor"!=r?(Kn.test(r)&&(f?o=Qn(f,o):o.b=1),u[r]=o):e.push(o);for(r in u)S(t,r)||(t[r]=u[r])};function nt(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var e=this._||(this._=[]);return Yn(n,this[y],e),this}var tt=function(n){if(!n[w]){n[w]=[];var t=n[y],e=void 0,r=void 0,i=void 0,o={},f=[],u={},a=void 0,c=void 0,d=void 0,s=void 0,h=void 0;for(d in(r=t.mixins)&&Yn(r,t,n[w]),t)if(e=t[d],r=d.match(Kn)){c=r[1],i=r[2];for(var $=0,v=r[3].split(",");$<v.length;$++){if(s=v[$],a=Xn[i],h=1,c){if(a){f.push({f:e,e:a,n:s});continue}h=2,(a=u[s])||(a=u[s]=[]),a[i]||(a[i]=1,a.push(i))}o[s]=o[s]|h,(a=t[s=i+w+s])?a.b&&(e.b?t[s]=Qn(e,a):S(t,d)&&(t[s]=e)):t[s]=e}}g="$d",m=(p=t)[l="render"],p[l]=p[g]=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];0<(b=this).$b&&(b.$b++,b.fire("rendercall"),O(m,n,b))},t.$eo=o,t.$el=f,t.$so=u,t.$f=t.assign}var p,l,g,m,b;return n[w]};function et(n,t,e,r,i){(i=this).owner=t,i.id=n,i.$b=1,i.updater=i.$a=new Jn(i.id),(n=et._)&&O(n,[e,{node:r,deep:!i.tmpl}],i)}return l(et,{merge:nt,extend:function n(t,e){var c=this,r=(t=t||{}).ctor,d=[];function s(n,t,e,r,i,o,f,u,a){c.call(f=this,n,t,e,r,i),o=s._,u=[e,{node:r,deep:!f.tmpl}],o&&O(o,u,f),(a=d.concat(i)).length&&O(a,u,f)}return r&&d.push(r),s.merge=nt,s.extend=n,G(s,c,t,e)}}),l(et[y],on,{beginUpdate:function(n,t){0<(t=this).$b&&t.$e&&t.owner.unmountZone(n,1)},endUpdate:function(n,t,e){0<(e=this).$b&&(n=n||e.id,t?f=t:e.$e=1,e.owner.mountZone(n,t))},wrapAsync:function(e,r){var i=this,o=i.$b;return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(0<o&&o==i.$b)return e.apply(r||i,n)}},render:function(){}}),rn.View=et,rn.addView=function(n,t){E[n]=t},rn}();