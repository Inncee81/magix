/*!3.8.12 MIT kooboy_li@163.com*/define("magix",()=>{let e=e=>Object.prototype.toString.call(e).slice(8,-1),t=t=>r=>e(r)==t,r=t("Object"),i=t("Array"),n=e=>b.querySelectorAll(e),o=(e,t,r)=>{let i=b.createEvent("Events");i.initEvent(t,!0,!0);for(let e in r)i[e]=r[e];e.dispatchEvent(i)},l=(e,t)=>{if(!t||!e||1!==e.nodeType)return 0;return(e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector).call(e,t)},f=e=>e._mx||(e._mx=N("e")),s={},a=(e,t)=>{e.eventTarget=t.e,Y(t.f,e,t.v)},d=(e,t,r,i,n)=>{i?((e,t,r,i)=>{let n=f(e),o=s[n];if(o){let n;for(let e,l=o.length;l--;)if((e=o[l]).c==t&&e.b===i){let t=e.a;if(!r||r&&r.i==t){n=e,o.splice(l,1);break}}n&&e.removeEventListener(t,n.d,r&&r.m)}})(e,t,n,r):((e,t,r,i)=>{let n=f(e),o=s[n]||(s[n]=[]),l={a:r&&r.i,b:i,c:t,d(t){i.call(e,t,r)}};o.push(l),e.addEventListener(t,l.d,r&&r.m)})(e,t,n,r)},h=0,$="",c=[],u=",",p=null,m=window,g=void 0,b=document,v=m.setTimeout,w="changed",y="change",x="pageunload",k="value",I="mxs",j="#";function V(){}let C,S,M=JSON.stringify,T="\x1e",E="object",_="prototype",q="params",A="path",U="mx-view",H=/[#?].*$/,L=/([^=&?\/#]+)=?([^&#?]*)/g,O=/(?!^)=|&/,N=e=>(e||"mx_")+h++,P=N(),Z={rootId:N(),defaultView:P,error(e){throw e}},R=e=>typeof e==E?e:b.getElementById(e),B=e=>!e||typeof e!=E,D=(e,t,r,i)=>{let n,o,l,f=0;for(l in e)n=e[l],o=t[l],B(n)&&o===n||ee(i,l)||(r[l]=1,f=1),t[l]=n;return f},z=(e,t,r)=>{if(e=R(e),t=R(t),e&&t&&!(r=e==t))try{r=16==(16&t.compareDocumentPosition(e))}catch(e){}return r},{assign:F,keys:J,hasOwnProperty:Q}=Object,G=document.head,K=document.createElement("div"),W=(e,t)=>{t&&!W[e]&&(W[e]=1,K.innerHTML=`<style>${t}`,G.appendChild(K.firstChild))},X=e=>e.id||(e.id=N()),Y=(e,t,r,n,o)=>{t=t||c,i(e)||(e=[e]),i(t)||(t=[t]);for(o of e)try{n=o&&o.apply(r,t)}catch(e){Z.error(e)}return n},ee=(e,t)=>e&&Q.call(e,t),te=(e,t)=>{let r,i;if(B(t))(r=t+$)[0]==T&&ee(e,r)&&(t=e[r]);else for(r in t)i=t[r],i=te(e,i),t[r]=i;return t},re=(e,t)=>t.f-e.f||t.t-e.t;function ie(e,t,r,i){(i=this).c=[],i.b=t||5,i.x=i.b+(e||20),i.r=r}F(ie[_],{get(e){let t=this.c[T+e];return t&&(t.f++,t.t=h++,t=t.v),t},each(e,t,r,i,n){i=(r=this).c;for(n of i)e(n.v,t,r)},set(e,t){let r=this,i=r.c,n=T+e,o=i[n],l=r.b;if(!o){if(i.length>=r.x)for(i.sort(re);l--;)(o=i.pop()).f>0&&r.del(o.o);o={o:e},i.push(o),i[n]=o}o.v=t,o.f=1,o.t=h++},del(e){e=T+e;let t=this.c,r=t[e],i=this.r;r&&(r.f=-1,r.v=$,delete t[e],i&&Y(i,r.o))},has(e){return ee(this.c,T+e)}});let ne=(e,t)=>{if(e){let r,n=[];if(P==e)S||(S=Wt.extend()),t(S);else if(m.seajs)seajs.use(e,(...e)=>{for(let t of e)n.push(t&&t.__esModule&&t.default||t);t&&t(...n)});else{i(e)||(e=[e]);for(r of e)r=require(r),n.push(r&&r.__esModule&&r.default||r);t&&t(...n)}}else t()};function oe(){}let le=(e,t,r,i,n)=>(oe[_]=t[_],n=new oe,F(n,r),F(e,i),n.constructor=e,e[_]=n,e),fe=e=>e;let se,ae=new ie,de=0,he=(e,t,r)=>{try{r=decodeURIComponent(r)}catch(e){}se[t]=r},$e=e=>{let t,r=ae.get(e);return r||(se={},e==(t=e.replace(H,$))&&O.test(t)&&(t=$),e.replace(t,$).replace(L,he),ae.set(e,r={a:t,b:se})),{path:r.a,params:{...r.b}}},ce=(e,t,r)=>{let i,n,o,l=[];for(n in t)i=t[n]+$,(!r||i||ee(r,n))&&(i=encodeURIComponent(i),l.push(o=n+"="+i));return o&&(e+=(e&&(~e.indexOf("?")?"&":"?"))+l.join("&")),e},ue=(e,t)=>{let r,i={};if(e)for(r of e)i[t&&r?r[t]:r]=t?r:1+(0|i[r]);return i},pe=new ie,me=(e,t,r)=>(pe.has(e)?r=pe.get(e):(r=Y(Function(`return ${e}`)),e.indexOf(T)>-1?te(t,r):pe.set(e,r)),r),ge={config:(e,t)=>(t=Z,e&&(t=r(e)?F(t,e):t[e]),t),boot(e){F(Z,e),ne(Z.exts,()=>{Fe.on(w,We),je.on(w,We),de=1,Re()})},toMap:ue,toTry:Y,toUrl:ce,parseUrl:$e,mix:F,has:ee,keys:J,inside:z,node:R,applyStyle:W,guid:N,Cache:ie,use:ne,fire:o,type:e,nodeId:X,guard:fe},be={fire(e,t,r,i){let n,o,l,f,s=this,a=s[T+e];if(t||(t={}),t.type=e,a)for(o=(n=a.length)-1;n--;)(f=a[l=i?n:o-n]).f?(f.x=1,Y(f.f,t,s),f.x=$):f.x||(a.splice(l,1),o--);return(a=s[`on${e}`])&&Y(a,t,s),r&&s.off(e),s},on(e,t){let r=T+e;return(this[r]||(this[r]=[])).push({f:t}),this},off(e,t){let r,i=T+e,n=this,o=n[i];if(t){if(o)for(r of o)if(r.f==t){r.f=$;break}}else delete n[i],delete n[`on${e}`];return n}};ge.Event=be;let ve={},we={},ye={},xe=0,ke=e=>{e=(e+$).split(",");for(let t of e)ee(we,t)?we[t]++:we[t]=1;return e},Ie=e=>{let t,r;for(t of e)ee(we,t)&&((r=--we[t])||(delete we[t],delete ve[t]))};let je={get(e){let t=e?ve[e]:ve;return t},set(e,t){return xe=D(e,ve,ye,t)||xe,this},digest(e,t){e&&je.set(e,t),xe&&(xe=0,this.fire(w,{keys:ye}),ye={})},diff:()=>ye,clean:e=>({ctor(){e=ke(e),this.on("destroy",()=>Ie(e))}}),...be};ge.State=je;let Ve,Ce="view",Se=new ie,Me=new ie,Te=m.location,Ee=0,_e={query:{},params:{},href:$},qe=/(?:^.*\/\/[^\/]+|#.*$)/gi,Ae=/^[^#]*#?!?/;function Ue(e,t){return this[q][e]||t!==g&&t||$}let He,Le,Oe,Ne,Pe,Ze=(e,t)=>{e="#!"+e,t?Te.replace(e):Te.hash=e},Re=()=>{let e,t,r=De().srcHash;d(m,"hashchange",(i,n,o)=>{t||(n=De(),(e=n.srcHash)!=r&&(o=(()=>{i.p=1,r=e,t=$,Ze(e),ze()}),i={reject(){i.p=1,t=$,Ze(r)},resolve:o,prevent(){t=1}},Fe.fire(y,i),t||i.p||o()))}),d(m,"beforeunload",(e,t,r)=>{if(e=e||m.event,t={},Fe.fire(x,t),r=t.msg)return e&&(e.returnValue=r),r}),ze()},Be=b.title,De=e=>{e=e||Te.href;let t,i,n,o,l,f=Se.get(e);return f||(f={get:Ue,href:e,srcQuery:t=e.replace(qe,$),srcHash:i=e.replace(Ae,$),query:n=$e(t),hash:o=$e(i),params:l={...n[q],...o[q]}},de&&(((e,t)=>{if(He||(He=Z.routes||{},Le=Z.unmatchView,Oe=Z.defaultView,Ne=Z.defaultPath||"/",Pe=Z.rewrite),!e[Ce]){let i=e.hash[A]||Ne;Pe&&(i=Pe(i,e[q],He)),t=He[i]||Le||Oe,e[A]=i,e[Ce]=t,r(t)&&F(e,t)}})(f),Se.set(e,f))),f},ze=()=>{let e=De(),t=((e,t)=>{let r=e.href,i=t.href,n=r+T+i,o=Me.get(n);if(!o){let i,l;o={params:l={},force:!r};let f,s=e[q],a=t[q],d=J(s).concat(J(a)),h=e=>{let t=s[e],r=a[e];t!=r&&(l[e]={from:t,to:r},i=1)};for(f of d)h(f);s=e,a=t,l=o,h(A),h(Ce),Me.set(n,o={a:i,b:o})}return o})(_e,_e=e);return!Ee&&t.a&&((Ve=t.b)[A]&&(b.title=e.title||Be),Fe.fire(w,Ve)),Ee=0,Ve},Fe={parse:De,diff:ze,to(e,t,i,n){!t&&r(e)&&(t=e,e=$);let o=$e(e),l=o[q],f=o[A],s=_e[A],a=_e[q],d=_e.query[q];if(F(l,t),f)for(s in d)ee(l,s)||(l[s]=$);else a&&(f=s,l={...a,...l});var h,c,u,p;c=_e,u=i,p=n,(h=ce(h=f,l,d))!=c.srcHash&&(Ee=p,Ze(h,u))},...be};ge.Router=Fe;let Je,Qe,Ge=0,Ke=(e,t,r,i,n,o)=>{if(e&&e.$a!=Ge&&(r=e.$v)&&r.$a>1){(t?((e,t,r)=>{let i,n=e.$os;if(n)for(i of n)if(r=ee(t,i))break;return r})(r,t):Lt(r))&&r.$b(),n=e.children();for(o of n)Ke(Xe[o],t)}},We=(e,t,r)=>{t=rt(),(r=e[Ce])?t.mountView(r.to):(Ge=h++,Ke(t,e.keys))},Xe={},Ye=e=>{if(!e.$b&&!e.$d&&e.$cc==e.$rc){e.$cr||(e.$cr=1,e.$ca=0,e.fire("created"));let{id:t,pId:r}=e,i=Xe[r];i&&!ee(i.$e,t)&&(i.$e[t]=1,i.$rc++,Ye(i))}},et=(e,t)=>{if(!e.$ca&&e.$cr){e.$cr=0,e.$ca=1,e.fire("alter",t);let{id:r,pId:i}=e,n=Xe[i];n&&ee(n.$e,r)&&(n.$rc--,delete n.$e[r],et(n,t))}},tt=(e,t,r,i)=>(i=(i=(i=Xe[e])&&i.$v)?i.$d:{},t.indexOf(T)>0&&te(i,r),i),rt=e=>(Je||(C=b.body,e=Z.rootId,R(e)||(C.id=e),Je=new lt(e)),Je),it=(e,t)=>{ee(Xe,e)||(Xe[e]=t,lt.fire("add",{vframe:t}))},nt=(e,t,r)=>{for(t=e.$f;t.length;)(r=t.shift()).r||e.invoke(r.n,r.a),delete t[r.k]},ot=[];function lt(e,t,r,i){(i=this).id=e,i.$c={},i.$cc=0,i.$rc=0,i.$g=i.$g||1,i.$e={},i.$f=[],i.pId=t,i.hId=r,it(e,i)}F(lt,{all:()=>Xe,get:e=>Xe[e]},be),F(lt[_],be,{mountView(e,t){let r,i,n,o,l,f=this,s=f.id,a=R(s),d=f.hId||f.pId;!f.$h&&a&&(f.$h=1,f.$i=a.innerHTML),f.unmountView(),f.$b=0,r=$e(e||$),n=r[A],a&&n&&(f[A]=e,o=r[q],tt(d,e,o),f.$j=r[A],F(o,t),i=f.$g,ne(n,e=>{if(i==f.$g){if(!e)return Z.error(Error(`id:${s} cannot load:${n}`));l=Ht(e),n=new e(s,f,o,a,l),f.$v=n,f.$a=Ge,_t(n),(o=Y(n.init,[o,{node:a,deep:!n.tmpl}],n))||(o={then:e=>e()}),i=++f.$g,o.then(()=>{i==f.$g&&(n.$b(),n.tmpl||(f.$h=0,n.$f||n.endUpdate()))})}}))},unmountView(){let e,t,r=this,{$v:i,id:n}=r;r.$f=[],i&&(Qe||(t=1,Qe={id:n}),r.$b=1,r.unmountZone(0,1),et(r,Qe),r.$v=0,i.$a>0&&(i.$a=0,delete ht[n],delete $t[n],i.fire("destroy",0,1,1),Mt(i,1),_t(i,1),i.owner=0),i.$a--,(e=R(n))&&r.$h&&(e.innerHTML=r.$i),t&&(Qe=0)),r.$g++},mountVframe(e,t,r,i){let n,o=this,l=o.id,f=o.$c;return et(o,{id:e}),(n=Xe[e])||(ee(f,e)||(o.$n=0,o.$cc++),f[e]=e,(n=ot.pop())?lt.call(n,e,l,t):n=new lt(e,l,t)),n.mountView(r,i),n},mountZone(e,t){let r,i,o=this,l=[];e=e||o.id;let f=n(`#${e} [${U}]`);o.$d=1;let s,a,d={};for(r of f)if(!r.$a){i=X(r),ee(d,i)||(r.$a=1,l.push([i,r.getAttribute(U),r.getAttribute("mxo")])),s=n(`#${i} [${U}]`);for(a of s)d[i=X(a)]=1}for([i,r,a]of l)o.mountVframe(i,a,r);o.$d=0,t||Ye(o)},unmountVframe(e,t){let r;if(e=e?this.$c[e]:this.id,r=Xe[e]){let{$cr:l,pId:f}=r;r.unmountView(),n=l,(o=Xe[i=e])&&(delete Xe[i],lt.fire("remove",{vframe:o,fcc:n}),(i=R(i))&&(i.$a=0)),r.id=r.pId=r.hId=r.$c=r.$e=0,r.off("alter"),r.off("created"),ot.push(r),(r=Xe[f])&&ee(r.$c,e)&&(delete r.$c[e],r.$n=0,r.$cc--,t||Ye(r))}var i,n,o},unmountZone(e,t){let r,i=this;for(r in i.$c)(!e||r!=e&&z(r,e))&&i.unmountVframe(r,1);t||Ye(i)},parent(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=Xe[t.pId];return t},host(e){return e=Xe[(e=this).hId||e.pId]},children(e){return(e=this).$n||(e.$n=J(e.$c))},invoke(e,t){let r,i,n,o,l,f=this.$f;return(i=this.$v)&&i.$f?r=(n=i[e])&&Y(n,t,i):((o=f[l=T+e])&&(o.r=t===o.a),o={n:e,a:t,k:l},f.push(o),f[l]=o),r}}),ge.Vframe=lt;let ft=new ie(30,10),st=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,at={},dt={},ht={},$t={},ct=0,ut=(e,t)=>{let r,i,n,o,f,s,a=[],d=e,h=e.getAttribute(`mx-${t}`),$=[],u=j,p=0;if(h&&((f=ft.get(h))||(f={v:(f=h.match(st)||c)[1],n:f[2],i:f[3]},ft.set(h,f)),f={...f,r:h}),f&&!f.v||dt[t]){if((n=$t[i=d.$b])&&1==n[d.$d]&&(s=1,u=i),!s){for($.push(d);d!=C&&(d=d.parentNode);){if(Xe[i=d.id]||(n=$t[i=d.$b])&&1==n[d.$d]){u=i;break}$.push(d)}for(h of $)(i=$t[u])||(i=$t[u]={}),i[n=h.$d||(h.$d=++ct)]=1,h.$b=u}let c=f&&!f.v;d=e.id,Xe[d]&&(p=u=d);do{if((r=Xe[u])&&(s=r.$v)){if(o=(n=s.$so)[t])for(d=o.length;d--;)n={r:i=o[d],v:u,n:i},i?!p&&l(e,i)&&a.push(n):p&&a.unshift(n);if(c&&(f.v?a.push({...f,v:u}):f.v=u),s.tmpl&&!p){f&&!f.v&&(f.v=u);break}p=0}}while(r&&(u=r.pId))}return f&&a.push(f),a},pt=e=>{let t,r,i,n,o,l,f,s,{target:a,type:d}=e,h=[];for(;a!=C;){if((t=ut(a,d)).length){h=[];for(let{v:r,r:h,n:$,i:c}of t){if(f!=r){if(f&&e.isPropagationStopped())break;f=r}(n=(i=Xe[r])&&i.$v)?(l=n[o=$+T+d])&&(e.eventTarget=a,s=c?me(c,n.$d):{},e[q]=s,Y(l,e,n)):e.stopPropagation()}}if((r=ht[l=a.$b])&&(r=r[a.$d])&&r[d]||e.isPropagationStopped()){h.length&&h.push(l);break}f=a.id,Xe[f]&&h.push(f),h.push(a),a=a.parentNode||C}if(l=h.length)for(r=j;l--;)(n=h[l]).nodeType?((t=ht[r])||(t=ht[r]={}),(s=t[f=n.$d||(n.$d=++ct)])||(s=t[f]={}),s[d]=1):r=n},mt=(e,t,r)=>{let i=0|at[e],n=r?-1:1;i&&r!==i||d(C,e,pt,r),at[e]=i+n,t&&(dt[e]=(0|dt[e])+n)},gt=(e,t,r,i)=>{let n;if(e){r=r||{};let o,l,f,s,a,d,h=$,c={},u="<"+e,m=$,g=[];if(t)for(s of t)f=s.a,s.b==vt&&(f=Rt(f)),m+=f,d&&s.b==vt&&d.b==vt?d.a+=s.a:(s.d&&(c[s.d]=(c[s.d]||0)+1),(s.e||bt[s.b])&&(o=1),d=s,g.push(s));for(l in r)!1!==(f=r[l])&&f!=p&&(!0===f&&(f=$),"id"==l?h=f:l==U&&f&&!h?h=$e(f)[A]:l!=I||h?"mxv"==l&&(o=1):h=f,r[l]=f,u+=` ${l}="${Rt(f)}"`);a=u,n={a:u+=i?"/>":`>${m}</${e}>`,c:m,d:h,b:e,e:o,f:a,g:r,h:g,i:c,j:i}}else n={b:vt,a:t};return n},bt={input:[k,"checked"],textarea:[k],option:["selected"]},vt=h;let wt=(e,t)=>{let r=X(t);e.$c[r]?e.unmountVframe(r,1):e.unmountZone(r,1)},yt={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},xt={mxv:1,mxa:1},kt=(e,t,r,i)=>{let n,o,l=r.g,f=t.g;if(t)for(n in f)ee(l,n)||("id"==n?i.d.push([e,$]):(i.c=1,e.removeAttribute(n)));for(n in l)ee(xt,n)||(o=l[n],t&&f[n]===o||("id"==n?i.d.push([e,o]):(i.c=1,e.setAttribute(n,o))))},It=(e,t,r)=>{let i,n=e.b;if(n==vt)i=b.createTextNode(e.a);else{i=b.createElementNS(yt[n]||t.namespaceURI,n),kt(i,0,e,r);for(n of e.h)i.appendChild(It(n,t,r))}return i},jt=(e,t,r,i,n,o)=>{if(t){if(t.e||t.c!=r.c){let l,f,s,a,d=0,h=t.h,$=r.h,c=h.length,u=$.length,p=r.i,m=e.childNodes,g={};for(l=c;l--;)(a=(f=h[l]).d)&&(a=g[a]||(g[a]=[])).push(m[l]);for(l=0;l<u;l++)if(s=$[l],f=h[l],(a=g[s.d])&&(a=a.pop())){for(;a!=m[l];)e.appendChild(m[l]),h.push(h[l]),h.splice(l,1),f=h[l];p[f.d]&&p[f.d]--,Vt(m[l],e,f,s,i,n,o)}else f?g[f.d]&&p[f.d]?(h.splice(l,0,s),c++,i.c=1,i.n.push([8,e,It(s,e,i),m[l]])):Vt(m[l],e,f,s,i,n,o):(i.n.push([1,e,It(s,e,i)]),i.c=1);for(l=u;l<c;l++)d=m[l],wt(n,d),i.n.push([2,e,d])}}else for(i.c=1,t=It(r,e,i),e.innerHTML="";t.firstChild;)e.appendChild(t.firstChild)},Vt=(e,t,r,i,n,o,l,f)=>{let s=r.g,a=i.g;if(((e,t,r)=>{let i,n,o=t.b,l=bt[o],f=r.g,s=0;if(l)for(i of l)n=ee(f,i)?i!=k||f[i]:i==k&&$,e[i]!=n&&(s=1,e[i]=n);return s})(e,r,i)||(f=r.e)||r.a!=i.a)if(r.b==i.b){if(r.b==vt)n.c=1,e.nodeValue=i.a;else if(!s[I]||s[I]!=a[I]){let t,d,h,$,c,u,p,m=a[U],g=i.c,b=r.f!=i.f,v=Xe[e.id],w=m&&$e(m);m&&v&&v.$j==w[A]&&s.id==a.id&&($=v.$v)?(u=g!=r.c,((p=m!=v[A])||u||f||b)&&((h=$.$f&&$.$g)?(c=w[q],tt(v.hId||v.pId,m,c),v[A]=m,w={node:e,attr:b,deep:!$.tmpl,inner:u,query:p,keys:l},Y(h,[c,w],$)&&n.v.push($),t=w.deep):(d=1,t=1))):(t=1,d=v),d&&(n.c=1,v.unmountVframe(0,1)),b&&kt(e,r,i,n),!t||i.j&&r.j||jt(e,r,i,n,o,l)}}else wt(o,e),n.n.push([4,t,It(i,t,n),e]),n.c=1},Ct=/^(\$?)([^<]*)<([^>]+)>(?:&(.+))?$/,St=(e,t,r)=>(e.a?r=e:((r=function(e){Y(r.a,e,this)}).a=[e],r.b=1),r.a=r.a.concat(t.a||t),r),Mt=(e,t)=>{let r,i,n=e.$r;for(r in n)i=n[r],(t||i.x)&&Tt(n,r,1)},Tt=(e,t,r,i)=>{let n,o,l=e[t];return l&&l!=i&&((n=(o=l.e).destroy)&&r&&Y(n,c,o),delete e[t]),o},Et=(e,t,r,i,n)=>{i=e[t],e[t]=e[r]=function(...e){(n=this).$a>0&&(n.$a++,n.fire("rendercall"),Mt(n),Y(i,e,n))}},_t=(e,t)=>{let r,{$eo:i,$so:n,$el:o,id:l}=e;for(r in i)mt(r,n[r],t);for(r of o)d(r.e,r.n,a,t,{i:l,v:e,f:r.f,m:r.m,e:r.e})},qt={win:m,doc:b},At=(e,t,r)=>{let i,n,o,l,f={};for(n of e)for(i in n)o=n[i],l=f[i],"ctor"!=i?(Ct.test(i)&&(l?o=St(l,o):o.b=1),f[i]=o):r.push(o);for(i in f)ee(t,i)||(t[i]=f[i])};function Ut(...e){let t=this._||(this._=[]);return At(e,this[_],t),this}let Ht=e=>{if(!e[T]){e[T]=[];let t,r,i,n,o,l,f,s,a,d,h,$=e[_],c={},p=[],m={};(r=$.mixins)&&At(r,$,e[T]);for(f in $)if(t=$[f],r=f.match(Ct)){if([,l,i,n,h]=r,d={},h){h=h.split(u);for(s of h)d[s]=!0}n=n.split(u);for(s of n){if(o=qt[i],a=1,l){if(o){p.push({f:t,e:o,n:s,m:d});continue}a=2,(o=m[s])||(o=m[s]=[]),o[i]||(o[i]=1,o.push(i))}c[s]=c[s]|a,(o=$[s=i+T+s])?o.b&&(t.b?$[s]=St(t,o):ee($,f)&&($[s]=t)):$[s]=t}}Et($,"render","$b"),$.$eo=c,$.$el=p,$.$so=m,$.$g=$.assign}return e[T]},Lt=e=>{let t,r,i,n=e.$l;if(n.f&&(n.p&&(t=Ve[A]),!t&&n.k)){i=Ve[q];for(r of n.k)if(t=ee(i,r))break}return t},Ot={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},Nt=/[&<>"'\`]/g,Pt=e=>""+(null==e?"":e),Zt=e=>`&${Ot[e]};`,Rt=e=>Pt(e).replace(Nt,Zt),Bt=(e,t,r,i)=>{for(i=e[T];--i;)if(e[r=T+i]===t)return r;return e[r=T+e[T]++]=t,r},Dt={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},zt=e=>Dt[e],Ft=/[!')(*]/g,Jt=e=>encodeURIComponent(Pt(e)).replace(Ft,zt),Qt=/[\\'"]/g,Gt=e=>Pt(e).replace(Qt,"\\$&"),Kt=(e,t)=>{let r,n,l=e.$h,f=e.$i,s=e.id,a=Xe[s],d={d:[],v:[],n:[]},h=R(s),$=e.$j,c=e.$d,u=r=>{t.i<t.length?Kt(updater,t):(d=t.slice(),t.i=t.length=0,r&&e.fire("domready"),Y(d))};if(t.i=t.length,e.$i=0,e.$h={},f&&e.$a>0&&(r=e.tmpl)){e.fire("dompatch"),delete ht[s],delete $t[s],n=r($,gt,s,c,Pt,Jt,Bt,Gt,i,F),jt(h,e.$n,n,d,a,l),e.$n=n;for(n of d.d)n[0].id=n[1];for(n of d.n)1==n[0]?n[1].appendChild(n[2]):2==n[0]?n[1].removeChild(n[2]):n[1].replaceChild(n[2],n[3]);a.$d=r=d.c||!e.$f;for(n of d.v)n.$b();r&&e.endUpdate(s),d.c&&o(b,"htmlchanged",{vId:s}),u(1)}else u()};function Wt(e,t,r,i,n){(n=this).owner=t,n.id=e,n.$l={k:[]},n.$r={},n.$a=1,n.$i=1,n.$j={id:e},n.$d={[T]:1},n.$o=[],n.$h={},(e=Wt._)&&Y(e,[r,{node:i,deep:!n.tmpl}],n)}F(Wt,{merge:Ut,extend:function e(t,r){let i=this,n=(t=t||{}).ctor,o=[];function l(e,t,r,n,f,s,a,d,h){i.call(a=this,e,t,r,n,f),s=l._,d=[r,{node:n,deep:!a.tmpl}],s&&Y(s,d,a),(h=o.concat(f)).length&&Y(h,d,a)}return n&&o.push(n),l.merge=Ut,l.extend=e,le(l,i,t,r)}}),F(Wt[_],be,{init:V,beginUpdate(e,t){(t=this).$a>0&&t.$f&&t.owner.unmountZone(e,1)},endUpdate(e,t,r,i,n){(r=this).$a>0&&(e=e||r.id,t?n=t:(n=r.$f,r.$f=1),(i=r.owner).mountZone(e,t),n||v(r.wrapAsync(nt),0,i))},wrapAsync(e,t){let r=this,i=r.$a;return(...n)=>{if(i>0&&i==r.$a)return e.apply(t||r,n)}},observeLocation(e,t){let i;(i=this.$l).f=1,r(e)&&(t=e[A],e=e[q]),i.p=t,e&&(i.k=(e+$).split(u))},observeState(e){this.$os=(e+$).split(u)},capture(e,t,r,i){return i=this.$r,t?(Tt(i,e,1,t),i[e]={e:t,x:r}):t=(i=i[e])&&i.e,t},release(e,t){return Tt(this.$r,e,t)},leaveTip(e,t){let r=this,i=n=>{let o="a",l="b";n.type!=y&&(o="b",l="a"),i[o]?(n.prevent(),n.reject()):t()&&(n.prevent(),i[l]=1,r.leaveConfirm(()=>{i[l]=0,n.resolve()},()=>{i[l]=0,n.reject()},e))},n=r=>{t()&&(r.msg=e)};Fe.on(y,i),Fe.on(x,n),r.on("unload",i),r.on("destroy",()=>{Fe.off(y,i),Fe.off(x,n)})},render:V,get(e,t){return t=this.$j,e&&(t=t[e]),t},set(e,t){let r=this;return r.$i=D(e,r.$j,r.$h,t)||r.$i,r},digest(e,t,r){let i=this.set(e,t),n=i.$o;r&&n.push(r),n.i||Kt(i,n)},snapshot(){return this.$p=M(this.$j),this},altered(){let e=this;if(e.$p)return e.$p!=M(e.$j)},translate(e){return te(this.$j,e)},parse(e){return me(e,this.$d)}}),ge.View=Wt;let Xt=Date.now;function Yt(){this.id=N("b"),this.$={}}F(Yt[_],{get(t,r){let n,o=this.$;if(t){let e,r=i(t)?t.slice():(t+$).split(".");for(;(e=r.shift())&&o;)o=o[e];e&&(o=g)}return r!==g&&(n=e(r))!=e(o)&&(o=r),o},set(e,t){r(e)||(e={[e]:t}),F(this.$,e)}});function er(e,t,r){(r=this[e])&&(delete this[e],Y(r,t,r.e))}let tr=(e,t,r,i,n,o)=>{let l=[],f=p,s=0;return function(a,d){s++;let h,$,c=this,u=c.$b,m=u.k;if(l[a+1]=c,d?(f=d,h=1):o.has(m)||(m&&o.set(m,c),u.t=Xt(),($=u.a)&&Y($,c,c),($=u.x)&&t.clear($),h=1),!r.$d){let t=s==i;t&&(r.$e=0,2==n&&(l[0]=f,Y(e,l,r))),1==n&&Y(e,[d||p,c,t,a],r)}h&&t.fire("end",{bag:c,error:d})}},rr=(e,t,r,n,o)=>{if(e.$d)return e;if(e.$e)return e.enqueue(rr.bind(e,e,t,r,n,o));e.$e=1,i(t)||(t=[t]);let l=e.constructor,f=0,s=l.$f,a=tr(r,l,e,t.length,n,l.$c);for(let e of t)if(e){let t,r=l.get(e,o),i=r.e,n=i.$b.k,d=a.bind(i,f++);n&&s[n]?s[n].push(d):r.u?(n&&((t=[d]).e=i,s[n]=t,d=er.bind(s,n)),l.$s(i,d)):d()}return e};function ir(){let e=this;e.id=N("s"),e.$g=[]}F(ir[_],{all(e,t){return rr(this,e,t,2)},save(e,t){return rr(this,e,t,2,1)},one(e,t){return rr(this,e,t,1)},enqueue(e){let t=this;return t.$d||(t.$g.push(e),t.dequeue(t.$h)),t},dequeue(...e){let t,r=this;r.$e||r.$d||(r.$e=1,v(()=>{r.$e=0,r.$d||(t=r.$g.shift())&&Y(t,r.$h=e)},0))},destroy(e){(e=this).$d=1,e.$g=0}});let nr=(e,t)=>[M(t),M(e)].join(T),or=(e,t,r,i)=>{(i=e&&e.$b)&&t[i.n]&&r.del(i.k)},lr={add(e){let t,r=this.$b;i(e)||(e=[e]);for(t of e)if(t){let{name:e,cache:i}=t;t.cache=0|i,r[e]=t}},create(e){let t=this.meta(e),i=0|e.cache||t.cache,n=new Yt;n.set(t),n.$b={n:t.name,a:t.after,x:t.cleans,k:i&&nr(t,e)},r(e)&&n.set(e);let o=t.before;return o&&Y(o,n,n),this.fire("begin",{bag:n}),n},meta(e){return this.$b[e.name||e]||e},get(e,t){let r,i,n=this;return t||(r=n.cached(e)),r||(r=n.create(e),i=1),{e:r,u:i}},clear(e){this.$c.each(or,ue((e+$).split(u)))},cached(e){let t,r,i=this,n=i.$c,o=i.meta(e),l=0|e.cache||o.cache;if(l&&(r=nr(o,e)),r){let e=i.$f[r];e?t=e.e:(t=n.get(r))&&Xt()-t.$b.t>l&&(n.del(r),t=0)}return t},...be};return ir.extend=((e,t,r)=>{function i(){ir.call(this)}return i.$s=e,i.$c=new ie(t,r),i.$f={},i.$b={},le(i,ir,p,lr)}),ge.Service=ir,F(V[_],be),V.extend=function e(t,r){let i=this,n=t&&t.ctor;function o(...e){i.apply(this,e),n&&n.apply(this,e)}return o.extend=e,le(o,i,t,r)},ge.Base=V,ge.default=ge,ge});