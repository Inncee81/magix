/*!3.8.13 MIT kooboy_li@163.com*/define("magix",["$"],function(i){var d=i("$"),v=d.isPlainObject,T=d.isArray,f=0,x="",p=[],I=",",C=null,a=window,o=void 0,t=document,r=t.documentElement.getAttribute,k=function(e,n){return r.call(e,n)},y=d(t),u=a.setTimeout,c="changed",s="change",h="pageunload",V="value",S="mxs",j="#";function e(){}var g,l=JSON.stringify,A="\x1e",n="object",U="prototype",_="params",q="path",E="mx-view",$=/[#?].*$/,m=/([^=&?\/#]+)=?([^&#?]*)/g,b=/(?!^)=|&/,w=function(e){return(e||"mx_")+f++},M=w(),N={rootId:w(),defaultView:M,error:function(e){throw e}},P=function(e){return typeof e==n?e:t.getElementById(e)},H=function(e){return!e||typeof e!=n},O=function(e,n,t,r){var i,o,f,a=0;for(f in e)i=e[f],o=n[f],H(i)&&o===i||X(r,f)||(a=t[f]=1),n[f]=i;return a},L=function(e,n,t){if(e=P(e),n=P(n),e&&n&&!(t=e==n))try{t=16==(16&n.compareDocumentPosition(e))}catch(e){}return t};function R(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])X(n,i)&&(e[i]=n[i]);return e}var Z,B=function(e,n,t){for(t in n=[],e)X(e,t)&&n.push(t);return n},D=N.hasOwnProperty,z=d("head"),F=function(e,n){n&&!F[e]&&(F[e]=1,z.append("<style>"+n))},J=function(e){return k(e,"id")||(e.$a=1,e.id=w())},Q=function(e,n,t,r,i){n=n||p,T(e)||(e=[e]),T(n)||(n=[n]);for(var o=0,f=e;o<f.length;o++){i=f[o];try{r=i&&i.apply(t,n)}catch(e){N.error(e)}}return r},X=function(e,n){return e&&D.call(e,n)},G=function(e,n){var t,r;if(H(n))(t=n+x)[0]==A&&X(e,t)&&(n=e[t]);else for(t in n)r=n[t],r=G(e,r),n[t]=r;return n},K=function(e,n){return n.f-e.f||n.t-e.t};function W(e,n,t,r){(r=this).c=[],r.b=n||5,r.x=r.b+(e||20),r.r=t}R(W[U],{get:function(e){var n=this.c[A+e];return n&&(n.f++,n.t=f++,n=n.v),n},each:function(e,n,t){for(var r=0,i=(t=this).c;r<i.length;r++)e(i[r].v,n,t)},set:function(e,n){var t=this.c,r=A+e,i=t[r],o=this.b;if(!i){if(t.length>=this.x)for(t.sort(K);o--;)0<(i=t.pop()).f&&this.del(i.o);i={o:e},t.push(i),t[r]=i}i.v=n,i.f=1,i.t=f++},del:function(e){e=A+e;var n=this.c,t=n[e],r=this.r;t&&(t.f=-1,t.v=x,delete n[e],r&&Q(r,t.o))},has:function(e){return X(this.c,A+e)}});var Y=function(e,o){if(e){var f=[],n=void 0;if(M==e)Z||(Z=Gn.extend()),o(Z);else if(a.seajs)seajs.use(e,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var t=0,r=e;t<r.length;t++){var i=r[t];f.push(i&&i.__esModule&&i.default||i)}o&&o.apply(void 0,f)});else{T(e)||(e=[e]);for(var t=0,r=e;t<r.length;t++)n=r[t],n=i(n),f.push(n&&n.__esModule&&n.default||n);o&&o.apply(void 0,f)}}else o()};function ee(){}var ne,te=function(e,n,t,r,i){return ee[U]=n[U],R(i=new ee,t),R(e,r),(i.constructor=e)[U]=i,e},re=d.find||d.zepto,ie=re.matchesSelector||re.matches,oe=function(e,n){n=e.data,e.eventTarget=n.e,Q(n.f,e,n.v)},fe=function(e,n,t,r,i){i&&(n+="."+i.i),r?d(e).off(n,t):d(e).on(n,i,t)},ae=function(e){return e},ue=new W,ce=0,se=function(e,n,t){try{t=decodeURIComponent(t)}catch(e){}ne[n]=t},he=function(e){var n,t=ue.get(e);return t||(ne={},e==(n=e.replace($,x))&&b.test(n)&&(n=x),e.replace(n,x).replace(m,se),ue.set(e,t={a:n,b:ne})),{path:t.a,params:R({},t.b)}},de=function(e,n,t){var r,i,o,f=[];for(i in n)r=n[i]+x,(!t||r||X(t,i))&&(r=encodeURIComponent(r),f.push(o=i+"="+r));return o&&(e+=(e&&(~e.indexOf("?")?"&":"?"))+f.join("&")),e},le=function(e,n){var t,r={};if(e)for(var i=0,o=e;i<o.length;i++)t=o[i],r[n&&t?t[n]:t]=n?t:1+(0|r[t]);return r},ve=new W,$e=function(e,n,t){return ve.has(e)?t=ve.get(e):(t=Q(Function("return "+e)),-1<e.indexOf(A)?G(n,t):ve.set(e,t)),t},pe={config:function(e,n){return n=N,e&&(n=v(e)?R(n,e):n[e]),n},boot:function(n){R(N,n),Y(N.ini,function(e){R(N,e,n),Y(N.exts,function(){ze.on(c,Ge),Ve.on(c,Ge),ce=1,Re()})})},toMap:le,toTry:Q,toUrl:de,parseUrl:he,mix:R,has:X,keys:B,inside:L,node:P,applyStyle:F,guid:w,use:Y,Cache:W,nodeId:J,guard:ae},ge={fire:function(e,n,t,r){var i,o,f,a,u=this,c=u[A+e];if(n||(n={}),n.type=e,c)for(o=(i=c.length)-1;i--;)(a=c[f=r?i:o-i]).f?(a.x=1,Q(a.f,n,u),a.x=x):a.x||(c.splice(f,1),o--);return(c=u["on"+e])&&Q(c,n,u),t&&u.off(e),u},on:function(e,n){var t=A+e;return(this[t]||(this[t]=[])).push({f:n}),this},off:function(e,n){var t,r=A+e,i=this[r];if(n){if(i)for(var o=0,f=i;o<f.length;o++)if((t=f[o]).f==n){t.f=x;break}}else delete this[r],delete this["on"+e];return this}};pe.Event=ge;var me={},be={},ye={},we=0,xe=function(e){for(var n=0,t=e=(e+x).split(",");n<t.length;n++){var r=t[n];X(be,r)?be[r]++:be[r]=1}return e},ke=function(e){for(var n,t=0,r=e;t<r.length;t++)n=r[t],X(be,n)&&(--be[n]||(delete be[n],delete me[n]))};var Ve=R({get:function(e){var n=e?me[e]:me;return n},set:function(e,n){return we=O(e,me,ye,n)||we,this},digest:function(e,n){(e&&Ve.set(e,n),we)&&(we=0,this.fire(c,{keys:ye}),ye={})},diff:function(){return ye},clean:function(e){return{ctor:function(){e=xe(e),this.on("destroy",function(){return ke(e)})}}}},ge);pe.State=Ve;var Ie,Te="view",Ce=new W,Se=new W,je=a.location,Ae=0,Ue={query:{},params:{},href:x},_e=/(?:^.*\/\/[^\/]+|#.*$)/gi,qe=/^[^#]*#?!?/;function Ee(e,n){return this[_][e]||n!==o&&n||x}var Me,Ne,Pe,He,Oe,Le=function(e,n){e="#!"+e,n?je.replace(e):je.hash=e},Re=function(){var r,i,o=Be().srcHash;fe(a,"hashchange",function(e,n,t){i||(n=Be(),(r=n.srcHash)!=o&&(t=function(){e.p=1,i=x,Le(o=r),De()},e={reject:function(){e.p=1,i=x,Le(o)},resolve:t,prevent:function(){i=1}},ze.fire(s,e),i||e.p||t()))}),fe(a,"beforeunload",function(e,n,t){if(e=e||a.event,n={},ze.fire(h,n),t=n.msg)return e&&(e.returnValue=t),t}),De()},Ze=t.title,Be=function(e){e=e||je.href;var n,t,r,i,o=Ce.get(e);return o||(o={get:Ee,href:e,srcQuery:n=e.replace(_e,x),srcHash:t=e.replace(qe,x),query:r=he(n),hash:i=he(t),params:R({},r[_],i[_])},ce&&(!function(e,n){if(Me||(Me=N.routes||{},Ne=N.unmatchView,Pe=N.defaultView,He=N.defaultPath||"/",Oe=N.rewrite),!e[Te]){var t=e.hash[q]||He;Oe&&(t=Oe(t,e[_],Me)),n=Me[t]||Ne||Pe,e[q]=t,e[Te]=n,v(n)&&R(e,n)}}(o),Ce.set(e,o))),o},De=function(){var e=Be(),n=function(e,n){var t=e.href,r=n.href,i=t+A+r,o=Se.get(i);if(!o){var f,a;o={params:a={},force:!t};for(var u=e[_],c=n[_],s=function(e){var n=u[e],t=c[e];n!=t&&(a[e]={from:n,to:t},f=1)},h=0,d=B(u).concat(B(c));h<d.length;h++)s(d[h]);u=e,c=n,a=o,s(q),s(Te),Se.set(i,o={a:f,b:o})}return o}(Ue,Ue=e);return!Ae&&n.a&&((Ie=n.b)[q]&&(t.title=e.title||Ze),ze.fire(c,Ie)),Ae=0,Ie},ze=R({parse:Be,diff:De,to:function(e,n,t,r){!n&&v(e)&&(n=e,e=x);var i,o,f,a,u=he(e),c=u[_],s=u[q],h=Ue[q],d=Ue[_],l=Ue.query[_];if(R(c,n),s)for(h in l)X(c,h)||(c[h]=x);else d&&(s=h,c=R({},d,c));o=Ue,f=t,a=r,(i=de(i=s,c,l))!=o.srcHash&&(Ae=a,Le(i,f))}},ge);pe.Router=ze;var Fe,Je,Qe=0,Xe=function(e,n,t,r,i,o){if(e&&e.$a!=Qe&&(t=e.$v)&&1<t.$a){(n?function(e,n,t){var r,i=e.$os;if(i)for(var o=0,f=i;o<f.length&&(r=f[o],!(t=X(n,r)));o++);return t}(t,n):Xn(t))&&t.$b();for(var f=0,a=e.children();f<a.length;f++)o=a[f],Xe(Ke[o],n)}},Ge=function(e,n,t){n=nn(),(t=e[Te])?n.mountView(t.to):(Qe=f++,Xe(n,e.keys))},Ke={},We=function(e){if(!e.$b&&!e.$d&&e.$cc==e.$rc){e.$cr||(e.$cr=1,e.$ca=0,e.fire("created"));var n=e.id,t=e.pId,r=Ke[t];r&&!X(r.$e,n)&&(r.$e[n]=1,r.$rc++,We(r))}},Ye=function(e,n){if(!e.$ca&&e.$cr){e.$cr=0,e.$ca=1,e.fire("alter",n);var t=e.id,r=e.pId,i=Ke[r];i&&X(i.$e,t)&&(i.$rc--,delete i.$e[t],Ye(i,n))}},en=function(e,n,t,r){return r=(r=(r=Ke[e])&&r.$v)?r.$d.$a:{},0<n.indexOf(A)&&G(r,t),r},nn=function(e){return Fe||(g=t.body,e=N.rootId,P(e)||(g.id=e),Fe=new on(e)),Fe},tn=function(e,n){X(Ke,e)||(Ke[e]=n,on.fire("add",{vframe:n}),(e=P(e))&&(e.vframe=n))},rn=[];function on(e,n,t){(t=this).id=e,t.$c={},t.$cc=0,t.$rc=0,t.$g=t.$g||1,t.$e={},t.$f=[],t.pId=n,tn(e,t)}R(on,{all:function(){return Ke},get:function(e){return Ke[e]}},ge),R(on[U],ge,{mountView:function(e,n){var t,r,i,o,f,a=this,u=a.id,c=P(u),s=a.pId;!a.$h&&c&&(a.$h=1,a.$i=c.innerHTML),a.unmountView(),a.$b=0,t=he(e||x),i=t[q],c&&i&&(a[q]=e,o=t[_],en(s,e,o),a.$j=t[q],R(o,n),r=a.$g,Y(i,function(e){if(r==a.$g){if(!e)return N.error(Error("id:"+u+" cannot load:"+i));f=Qn(e),i=new e(u,a,o,c,f),a.$v=i,a.$a=Qe,Dn(i),(o=Q(i.init,[o,{node:c,deep:!i.tmpl}],i))||(o={then:function(e){return e()}}),r=++a.$g,o.then(function(){r==a.$g&&(i.$b(),i.tmpl||(a.$h=0,i.$e||i.endUpdate()))})}}))},unmountView:function(){var e,n,t=this,r=t.$v,i=t.id;t.$f=[],r&&(Je||(n=1,Je={id:i}),t.$b=1,t.unmountZone(0,1),Ye(t,Je),(t.$v=0)<r.$a&&(r.$a=0,delete sn[i],delete hn[i],r.fire("destroy",0,1,1),Zn(r,1),Dn(r,1),r.owner=0),r.$a--,(e=P(i))&&t.$h&&d(e).html(t.$i),n&&(Je=0)),t.$g++},mountVframe:function(e,n,t){var r,i=this,o=i.id,f=i.$c;return Ye(i,{id:e}),(r=Ke[e])||(X(f,e)||(i.$n=0,i.$cc++),f[e]=e,(r=rn.pop())?on.call(r,e,o):r=new on(e,o)),r.mountView(n,t),r},mountZone:function(e,n){var t,r,i=this,o=[];e=e||i.id;var f,a=d("#"+e+" ["+E+"]");i.$d=1;for(var u=0,c=a;u<c.length;u++)(t=c[u]).$b||(r=J(t),t.$b=1,o.push([r,k(t,E)]));for(var s=0,h=o;s<h.length;s++)r=(f=h[s])[0],t=f[1],i.mountVframe(r,t);i.$d=0,n||We(i)},unmountVframe:function(e,n){var t,r,i,o;if(e=e?this.$c[e]:this.id,t=Ke[e]){var f=t.$cr,a=t.pId;t.unmountView(),i=f,(o=Ke[r=e])&&(delete Ke[r],on.fire("remove",{vframe:o,fcc:i}),(r=P(r))&&(r.$b=0,r.vframe=0,r.$a=0)),t.id=t.pId=t.$c=t.$e=0,t.$h=0,t.off("alter"),t.off("created"),rn.push(t),(t=Ke[a])&&X(t.$c,e)&&(delete t.$c[e],t.$n=0,t.$cc--,n||We(t))}},unmountZone:function(e,n){var t;for(t in this.$c)(!e||t!=e&&L(t,e))&&this.unmountVframe(t,1);n||We(this)},parent:function(e,n){for(n=this,e=e>>>0||1;n&&e--;)n=Ke[n.pId];return n},children:function(e){return(e=this).$n||(e.$n=B(e.$c))},invoke:function(e,n){var t,r,i,o,f,a=this.$f;return(r=this.$v)&&r.$e?t=(i=r[e])&&Q(i,n,r):((o=a[f=A+e])&&(o.r=n===o.a),o={n:e,a:n,k:f},a.push(o),a[f]=o),t}}),pe.Vframe=on,d.fn.invokeView=function(e,n){for(var t,r=[],i=0;i<this.length;i++)t=this[i].vframe,r.push(t&&t.invoke(e,n));return r};var fn=new W(30,10),an=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,un={},cn={},sn={},hn={},dn=0,ln=function(e,n){var t,r,i,o,f,a,u=[],c=e,s=k(e,"mx-"+n),h=[],d=j,l=0;if(s&&((f=fn.get(s))||(f={v:(f=s.match(an)||p)[1],n:f[2],i:f[3]},fn.set(s,f)),f=R({},f,{r:s})),f&&!f.v||cn[n]){if((i=hn[r=c.$d])&&1==i[c.$e]&&(a=1,d=r),!a){for(h.push(c);c!=g&&(c=c.parentNode);){if(Ke[r=c.id]||(i=hn[r=c.$d])&&1==i[c.$e]){d=r;break}h.push(c)}for(var v=0,$=h;v<$.length;v++)s=$[v],(r=hn[d])||(r=hn[d]={}),r[i=s.$e||(s.$e=++dn)]=1,s.$d=d}c=e.id,Ke[c]&&(l=d=c);do{if((t=Ke[d])&&(a=t.$v)){if(o=(i=a.$so)[n])for(c=o.length;c--;)i={r:r=o[c],v:d,n:r},r?!l&&ie(e,r)&&u.push(i):l&&u.unshift(i);if(a.tmpl&&!l){f&&!f.v&&(f.v=d);break}l=0}}while(t&&(d=t.pId))}return f&&u.push(f),u},vn=function(e){for(var n,t,r,i,o,f,a,u=e.target,c=e.type,s=[];u!=g;){if((n=ln(u,c)).length){s=[];for(var h=0,d=n;h<d.length;h++){var l=d[h],v=l.v,$=(l.r,l.n),p=l.i;if(f!=v){if(f&&e.isPropagationStopped())break;f=v}(i=(r=Ke[v])&&r.$v)?(o=i[$+A+c])&&(e.eventTarget=u,a=p?$e(p,i.$d.$a):{},e[_]=a,Q(o,e,i)):e.stopPropagation()}}if((t=sn[o=u.$d])&&(t=t[u.$e])&&t[c]||e.isPropagationStopped()){s.length&&s.push(o);break}f=u.id,Ke[f]&&s.push(f),s.push(u),u=u.parentNode||g}if(o=s.length)for(t=j;o--;)(i=s[o]).nodeType?((n=sn[t])||(n=sn[t]={}),(a=n[f=i.$e||(i.$e=++dn)])||(a=n[f]={}),a[c]=1):t=i},$n="http://www.w3.org/2000/svg",pn="http://www.w3.org/1998/Math/MathML",gn={option:[1,"<select multiple>"],thead:[1,"<table>"],col:[2,"<table><colgroup>"],tr:[2,"<table><tbody>"],td:[3,"<table><tbody><tr>"],area:[1,"<map>"],param:[1,"<object>"],g:[1,'<svg xmlns="'+$n+'">'],m:[1,'<math xmlns="'+pn+'">'],_:[0,""]},mn=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;gn.optgroup=gn.option,gn.tbody=gn.tfoot=gn.colgroup=gn.caption=gn.thead,gn.th=gn.td;var bn=t.implementation.createHTMLDocument(x),yn=bn.createElement("base");yn.href=t.location.href,bn.head.appendChild(yn);var wn=function(e,n){if(1==n.nodeType){var t=J(n);e.$c[t]?e.unmountVframe(t,1):e.unmountZone(t,1)}},xn={INPUT:[V,"checked"],TEXTAREA:[V],OPTION:["selected"]},kn=function(e,n){return 1==e.nodeType&&(e.$f?n=e.$g:((n=e.$a?x:k(e,"id"))||(n=k(e,S)),n||(n=k(e,E))&&(n=he(n)[q]),e.$f=1,e.$g=n)),n},Vn=function(e,n,t,r,i){for(var o,f,a,u,c,s=e.lastChild,h=n.firstChild,d=0,l={},v={};s;)d++,(a=kn(s))&&(a=l[a]||(l[a]=[])).push(s),s=s.previousSibling;for(;h;)(a=kn(h))&&(v[a]=(v[a]||0)+1),h=h.nextSibling;for(h=n.firstChild,s=e.firstChild;h;)if(d--,h=(o=h).nextSibling,(u=l[a=kn(o)])&&(u=u.pop())){for(;u!=s;)c=s.nextSibling,e.appendChild(s),s=c;s=u.nextSibling,v[a]&&v[a]--,In(u,o,e,t,r,i)}else s?(a=kn(f=s))&&l[a]&&v[a]?(d++,t.c=1,t.n.push([8,e,o,f])):(s=s.nextSibling,In(f,o,e,t,r,i)):(t.c=1,t.n.push([1,e,o]));for(f=e.lastChild;0<d--;)wn(r,f),t.n.push([2,e,f]),f=f.previousSibling,t.c=1},In=function(e,n,t,r,i,o){if(function(e,n){var t,r=e.nodeName,i=xn[r],o=0;if(i)for(var f=0,a=i;f<a.length;f++)e[t=a[f]]!=n[t]&&(o=1,e[t]=n[t]);return o}(e,n)||1==e.nodeType&&e.hasAttribute("mxv")||!e.isEqualNode||!e.isEqualNode(n))if(e.nodeName===n.nodeName)if(1===e.nodeType){var f=k(n,S);if(f&&f==k(e,S))return;var a=k(n,E),u=n.innerHTML,c=k(n,"mxa"),s=!c||c!=k(e,"mxa"),h=void 0,d=void 0,l=Ke[k(e,"id")],v=void 0,$=void 0,p=a&&he(a),g=void 0,m=void 0,b=void 0;if(a&&l&&(!k(n,"id")||k(n,"id")==k(e,"id"))&&l.$j==p[q]&&($=l.$v)){if(m=u!=l.$i,b=a!=l[q],v=k(e,"mxv"),!m&&!b&&v)for(var y=0,w=g=v.split(I);y<w.length;y++)if((v=w[y])==j||X(o,v)){b=1;break}(b||m)&&((v=$.$e&&$.$f)?(g=p[_],en(l.pId,a,g),l.$i=u,l[q]=a,p={node:n,deep:!$.tmpl,attr:s,inner:m,query:b,keys:o},Q(v,[g,p],$)&&r.v.push($),h=p.deep):h=d=1)}else h=1,d=l;d&&(r.c=1,l.unmountVframe(0,1)),s&&function(e,n,t,r){var i,o,f,a;delete e.$f;var u=e.attributes,c=n.attributes;for(o=u.length;o--;)i=u[o].name,n.hasAttribute(i)||("id"==i?r||t.d.push([e,x]):(t.c=1,e.removeAttribute(i)));for(o=c.length;o--;)f=(i=c[o]).name,a=i[V],k(e,f)!=a&&("id"==f?t.d.push([e,a]):(t.c=1,e.setAttribute(f,a)))}(e,n,r,l&&a),h&&Vn(e,n,r,i,o)}else e.nodeValue!==n.nodeValue&&(r.c=1,e.nodeValue=n.nodeValue);else wn(i,e),r.c=1,r.n.push([4,t,n,e])},Tn={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},Cn=/[&<>"'\`]/g,Sn=function(e){return""+(null==e?"":e)},jn=function(e){return"&"+Tn[e]+";"},An=function(e){return Sn(e).replace(Cn,jn)},Un=function(e,n,t,r){for(r=e[A];--r;)if(e[t=A+r]===n)return t;return e[t=A+e[A]++]=n,t},_n={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},qn=function(e){return _n[e]},En=/[!')(*]/g,Mn=function(e){return encodeURIComponent(Sn(e)).replace(En,qn)},Nn=/[\\'"]/g,Pn=function(e){return Sn(e).replace(Nn,"\\$&")},Hn=function(n,t){var e,r,i=n.$k,o=n.$c,f=n.$b,a=Ke[f],u=a&&a.$v,c={d:[],v:[],n:[]},s=P(f),h=n.$d,d=n.$a,l=function(e){t.i<t.length?Hn(n,t):(c=t.slice(),t.i=t.length=0,e&&u.fire("domready"),Q(c))};if(t.i=t.length,n.$c=0,n.$k={},o&&u&&0<u.$a&&(e=u.tmpl)&&u.$d==n){u.fire("dompatch"),delete sn[f],delete hn[f],r=function(e,n){var t,r=bn.createElement("div"),i=n.namespaceURI;t=i==$n?"g":i==pn?"m":(mn.exec(e)||[0,""])[1];var o=gn[t]||gn._;r.innerHTML=o[1]+e;for(var f=o[0];f--;)r=r.lastChild;return r}(e(h,f,d,An,Sn,Mn,Un,Pn),s),Vn(s,r,c,a,i);for(var v=0,$=c.d;v<$.length;v++)(r=$[v])[0].id=r[1];for(var p=0,g=c.n;p<g.length;p++)1==(r=g[p])[0]?r[1].appendChild(r[2]):2==r[0]?r[1].removeChild(r[2]):4==r[0]?r[1].replaceChild(r[2],r[3]):r[1].insertBefore(r[2],r[3]);a.$d=e=c.c||!u.$e;for(var m=0,b=c.v;m<b.length;m++)(r=b[m]).$b();e&&u.endUpdate(f),c.c&&y.trigger({type:"htmlchanged",vId:f}),l(1)}else l()};function On(e){var n,t=this;t.$b=e,t.$c=1,t.$d={vId:e},t.$a=((n={})[A]=1,n),t.$e=[],t.$k={}}R(On[U],{get:function(e,n){return n=this.$d,e&&(n=n[e]),n},set:function(e,n){var t=this;return t.$c=O(e,t.$d,t.$k,n)||t.$c,t},digest:function(e,n,t){var r=this.set(e,n),i=r.$e;t&&i.push(t),i.i||Hn(r,i)},snapshot:function(){return this.$f=l(this.$d),this},altered:function(){if(this.$f)return this.$f!=l(this.$d)},translate:function(e){return G(this.$d,e)},parse:function(e){return $e(e,this.$a)}});var Ln=/^(\$?)([^<]*)<([^>]+)>(?:&(.+))?$/,Rn=function(e,n,t){return e.a?t=e:((t=function(e){Q(t.a,e,this)}).a=[e],t.b=1),t.a=t.a.concat(n.a||n),t},Zn=function(e,n){var t,r,i=e.$r;for(t in i)r=i[t],(n||r.x)&&Bn(i,t,1)},Bn=function(e,n,t,r){var i,o,f=e[n];return f&&f!=r&&((i=(o=f.e).destroy)&&t&&Q(i,p,o),delete e[n]),o},Dn=function(e,n){var t,r,i,o,f,a,u=e.$eo,c=e.$so,s=e.$el,h=e.id;for(t in u)i=c[r=t],o=n,void 0,f=0|un[r],a=o?-1:1,f&&o!==f||fe(g,r,vn,o),un[r]=f+a,i&&(cn[r]=(0|cn[r])+a);for(var d=0,l=s;d<l.length;d++)t=l[d],fe(t.e,t.n,oe,n,{i:h,v:e,f:t.f,m:t.m,e:t.e})},zn={win:a,doc:t},Fn=function(e,n,t){for(var r,i,o,f,a={},u=0,c=e;u<c.length;u++)for(r in i=c[u])o=i[r],f=a[r],"ctor"!=r?(Ln.test(r)&&(f?o=Rn(f,o):o.b=1),a[r]=o):t.push(o);for(r in a)X(n,r)||(n[r]=a[r])};function Jn(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=this._||(this._=[]);return Fn(e,this[U],t),this}var Qn=function(e){if(!e[A]){e[A]=[];var n=e[U],t=void 0,r=void 0,i=void 0,o=void 0,f={},a=[],u={},c=void 0,s=void 0,h=void 0,d=void 0,l=void 0,v=void 0,$=void 0;for(h in(r=n.mixins)&&Fn(r,n,e[A]),n)if(t=n[h],r=h.match(Ln)){if(s=r[1],i=r[2],o=r[3],v={},$=r[4])for(var p=0,g=$=$.split(I);p<g.length;p++)v[d=g[p]]=!0;for(var m=0,b=o=o.split(I);m<b.length;m++){if(d=b[m],c=zn[i],l=1,s){if(c){a.push({f:t,e:c,n:d,m:v});continue}l=2,(c=u[d])||(c=u[d]=[]),c[i]||(c[i]=1,c.push(i))}f[d]=f[d]|l,(c=n[d=i+A+d])?c.b&&(t.b?n[d]=Rn(t,c):X(n,h)&&(n[d]=t)):n[d]=t}}x="$b",k=(y=n)[w="render"],y[w]=y[x]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];0<(V=this).$a&&(V.$a++,V.fire("rendercall"),Zn(V),Q(k,e,V))},n.$eo=f,n.$el=a,n.$so=u,n.$f=n.assign}var y,w,x,k,V;return e[A]},Xn=function(e){var n,t,r,i=e.$l;if(i.f&&(i.p&&(n=Ie[q]),!n&&i.k)){r=Ie[_];for(var o=0,f=i.k;o<f.length&&(t=f[o],!(n=X(r,t)));o++);}return n};function Gn(e,n,t,r,i){(i=this).owner=n,i.id=e,i.$l={k:[]},i.$r={},i.$a=1,i.updater=i.$d=new On(i.id),(e=Gn._)&&Q(e,[t,{node:r,deep:!i.tmpl}],i)}R(Gn,{merge:Jn,extend:function e(n,t){var c=this,r=(n=n||{}).ctor,s=[];function h(e,n,t,r,i,o,f,a,u){c.call(f=this,e,n,t,r,i),o=h._,a=[t,{node:r,deep:!f.tmpl}],o&&Q(o,a,f),(u=s.concat(i)).length&&Q(u,a,f)}return r&&s.push(r),h.merge=Jn,h.extend=e,te(h,c,n,t)}}),R(Gn[U],ge,{init:e,beginUpdate:function(e,n){0<(n=this).$a&&n.$e&&n.owner.unmountZone(e,1)},endUpdate:function(e,n,t,r,i){0<(t=this).$a&&(e=e||t.id,n?i=n:(i=t.$e,t.$e=1),(r=t.owner).mountZone(e,n),i||u(t.wrapAsync(function(){!function(e,n,t){for(n=e.$f;n.length;)(t=n.shift()).r||e.invoke(t.n,t.a),delete n[t.k]}(r)}),0))},wrapAsync:function(t,r){var i=this,o=i.$a;return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0<o&&o==i.$a)return t.apply(r||i,e)}},observeLocation:function(e,n){var t;(t=this.$l).f=1,v(e)&&(n=e[q],e=e[_]),t.p=n,e&&(t.k=(e+x).split(I))},observeState:function(e){this.$os=(e+x).split(I)},capture:function(e,n,t,r){return r=this.$r,n?(Bn(r,e,1,n),r[e]={e:n,x:t}):n=(r=r[e])&&r.e,n},release:function(e,n){return Bn(this.$r,e,n)},leaveTip:function(r,i){var o=this,f=function(e){var n="a",t="b";e.type!=s&&(n="b",t="a"),f[n]?(e.prevent(),e.reject()):i()&&(e.prevent(),f[t]=1,o.leaveConfirm(function(){f[t]=0,e.resolve()},function(){f[t]=0,e.reject()},r))},e=function(e){i()&&(e.msg=r)};ze.on(s,f),ze.on(h,e),o.on("unload",f),o.on("destroy",function(){ze.off(s,f),ze.off(h,e)})},render:e}),pe.View=Gn;var Kn=d.type,Wn=Date.now;function Yn(){this.id=w("b"),this.$={}}R(Yn[U],{get:function(e,n){var t=this.$;if(e){for(var r=T(e)?e.slice():(e+x).split("."),i=void 0;(i=r.shift())&&t;)t=t[i];i&&(t=o)}return n!==o&&Kn(n)!=Kn(t)&&(t=n),t},set:function(e,n){var t;v(e)||((t={})[e]=n,e=t),R(this.$,e)}});function et(e,n,t){(t=this[e])&&(delete this[e],Q(t,n,t.e))}var nt=function(e,n,t,r,i){if(e.$d)return e;if(e.$e)return e.enqueue(nt.bind(e,e,n,t,r,i));e.$e=1,T(n)||(n=[n]);for(var u,c,s,h,d,l,v,$,p,o=e.constructor,f=0,a=o.$f,g=(u=t,c=o,s=e,h=n.length,d=r,l=o.$c,v=[],$=C,p=0,function(e,n){p++;var t,r,i=this,o=i.$b,f=o.k;if(v[e+1]=i,n?($=n,t=1):l.has(f)||(f&&l.set(f,i),o.t=Wn(),(r=o.a)&&Q(r,i,i),(r=o.x)&&c.clear(r),t=1),!s.$d){var a=p==h;a&&(s.$e=0,2==d&&(v[0]=$,Q(u,v,s))),1==d&&Q(u,[n||C,i,a,e],s)}t&&c.fire("end",{bag:i,error:n})}),m=0,b=n;m<b.length;m++){var y=b[m];if(y){var w=o.get(y,i),x=w.e,k=x.$b.k,V=g.bind(x,f++),I=void 0;k&&a[k]?a[k].push(V):w.u?(k&&((I=[V]).e=x,a[k]=I,V=et.bind(a,k)),o.$s(x,V)):V()}}return e};function tt(){var e=this;e.id=w("s"),e.$g=[]}R(tt[U],{all:function(e,n){return nt(this,e,n,2)},save:function(e,n){return nt(this,e,n,2,1)},one:function(e,n){return nt(this,e,n,1)},enqueue:function(e){var n=this;return n.$d||(n.$g.push(e),n.dequeue(n.$h)),n},dequeue:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t,r=this;r.$e||r.$d||(r.$e=1,u(function(){r.$e=0,r.$d||(t=r.$g.shift())&&Q(t,r.$h=e)},0))},destroy:function(e){(e=this).$d=1,e.$g=0}});var rt=function(e,n){return[l(n),l(e)].join(A)},it=function(e,n,t,r){(r=e&&e.$b)&&n[r.n]&&t.del(r.k)},ot=R({add:function(e){var n,t=this.$b;T(e)||(e=[e]);for(var r=0,i=e;r<i.length;r++)if(n=i[r]){var o=n.name,f=n.cache;n.cache=0|f,t[o]=n}},create:function(e){var n=this.meta(e),t=0|e.cache||n.cache,r=new Yn;r.set(n),r.$b={n:n.name,a:n.after,x:n.cleans,k:t&&rt(n,e)},v(e)&&r.set(e);var i=n.before;return i&&Q(i,r,r),this.fire("begin",{bag:r}),r},meta:function(e){return this.$b[e.name||e]||e},get:function(e,n){var t,r;return n||(t=this.cached(e)),t||(t=this.create(e),r=1),{e:t,u:r}},clear:function(e){this.$c.each(it,le((e+x).split(I)))},cached:function(e){var n,t,r=this.$c,i=this.meta(e),o=0|e.cache||i.cache;if(o&&(t=rt(i,e)),t){var f=this.$f[t];f?n=f.e:(n=r.get(t))&&Wn()-n.$b.t>o&&(r.del(t),n=0)}return n}},ge);return tt.extend=function(e,n,t){function r(){tt.call(this)}return r.$s=e,r.$c=new W(n,t),r.$f={},r.$b={},te(r,tt,C,ot)},pe.Service=tt,R(e[U],ge),e.extend=function e(n,t){var r=this,i=n&&n.ctor;function o(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r.apply(this,e),i&&i.apply(this,e)}return o.extend=e,te(o,r,n,t)},pe.Base=e,pe.default=pe});