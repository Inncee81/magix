/*!3.8.10 MIT kooboy_li@163.com*/define("magix",["$"],function(i){var d=i("$"),l=d.isPlainObject,I=d.isArray,a=0,k="",$=[],V=",",S=null,f=window,o=void 0,n=document,g=d(n),u=f.setTimeout,r="changed",c="change",s="pageunload",A="value",T="mxs",m="#";function e(){}var b,h=JSON.stringify,y="\x1e",t="object",w="prototype",C="params",j="path",N="mx-view",v=/[#?].*$/,p=/([^=&?\/#]+)=?([^&#?]*)/g,x=/(?!^)=|&/,q=function(e){return(e||"mx_")+a++},U=q(),E={rootId:q(),defaultView:U,error:function(e){u(function(){throw e})}},P=function(e){return typeof e==t?e:n.getElementById(e)},H=function(e){return!e||typeof e!=t},O=function(e,t,n){var r,i,o,a=0;for(o in e)r=e[o],i=t[o],H(r)&&i===r||(a=n[o]=1),t[o]=r;return a},M=function(e,t,n){if(e=P(e),t=P(t),e&&t&&!(n=e==t))try{n=16==(16&t.compareDocumentPosition(e))}catch(e){}return n};function L(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])J(t,i)&&(e[i]=t[i]);return e}var Z,R=function(e,t,n){for(n in t=[],e)J(e,n)&&t.push(n);return t},_=E.hasOwnProperty,B=d("head"),D=function(e,t){t&&!D[e]&&(D[e]=1,B.append("<style>"+t))},z=function(e){return e.id||(e.$a=1,e.id=q())},F=function(e,t,n,r,i){t=t||$,I(e)||(e=[e]),I(t)||(t=[t]);for(var o=0,a=e;o<a.length;o++){i=a[o];try{r=i&&i.apply(n,t)}catch(e){E.error(e)}}return r},J=function(e,t){return e&&_.call(e,t)},Q=function(e,t,n){var r,i;if(!n&&H(t))(r=t+k)[0]==y&&(t=e[r]);else for(r in t)i=t[r],n&&!H(i)&&Q(e,i,n),r[0]==y&&(delete t[r],r=e[r]),t[r]=(i+k)[0]==y?e[i]:i;return t},X=function(e,t){return t.f-e.f||t.t-e.t};function G(e,t,n,r){(r=this).c=[],r.b=t||5,r.x=r.b+(e||20),r.r=n}L(G[w],{get:function(e){var t=this.c[y+e];return t&&(t.f++,t.t=a++,t=t.v),t},each:function(e,t,n){for(var r=0,i=(n=this).c;r<i.length;r++)e(i[r].v,t,n)},set:function(e,t){var n=this.c,r=y+e,i=n[r],o=this.b;if(!i){if(n.length>=this.x)for(n.sort(X);o--;)0<(i=n.pop()).f&&this.del(i.o);i={o:e},n.push(i),n[r]=i}i.v=t,i.f=1,i.t=a++},del:function(e){e=y+e;var t=this.c,n=t[e],r=this.r;n&&(n.f=-1,n.v=k,delete t[e],r&&F(r,n.o))},has:function(e){return J(this.c,y+e)}});var K=function(e,o){if(e){var a=[],t=void 0;if(U==e)Z||(Z=Ut.extend()),o(Z);else if(f.seajs)seajs.use(e,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e;n<r.length;n++){var i=r[n];a.push(i&&i.__esModule&&i.default||i)}o&&o.apply(void 0,a)});else{I(e)||(e=[e]);for(var n=0,r=e;n<r.length;n++)t=r[n],t=i(t),a.push(t&&t.__esModule&&t.default||t);o&&o.apply(void 0,a)}}else o()};function W(){}var Y,ee=function(e,t,n,r,i){return W[w]=t[w],L(i=new W,n),L(e,r),(i.constructor=e)[w]=i,e},te=d.find||d.zepto,ne=te.matchesSelector||te.matches,re=function(e,t){t=e.data,e.eventTarget=t.e,F(t.f,e,t.v)},ie=function(e,t,n,r,i){i&&(t+="."+i.i),r?d(e).off(t,n):d(e).on(t,i,n)},oe=new G,ae=0,fe=function(e,t,n){try{n=decodeURIComponent(n)}catch(e){}Y[t]=n},ue=function(e){var t,n=oe.get(e);return n||(Y={},e==(t=e.replace(v,k))&&x.test(t)&&(t=k),e.replace(t,k).replace(p,fe),oe.set(e,n={a:t,b:Y})),{path:n.a,params:L({},n.b)}},ce=function(e,t,n){var r,i,o,a=[];for(i in t)r=t[i]+k,(!n||r||J(n,i))&&(r=encodeURIComponent(r),a.push(o=i+"="+r));return o&&(e+=(e&&(~e.indexOf("?")?"&":"?"))+a.join("&")),e},se=function(e,t){var n,r={};if(e)for(var i=0,o=e;i<o.length;i++)n=o[i],r[t&&n?n[t]:n]=t?n:1+(0|r[n]);return r},he=new G,de=function(e,t,n){return he.has(e)?n=he.get(e):(n=F(Function("return "+e)),-1<e.indexOf(y)?Q(t,n,1):he.set(e,n)),n},ve={config:function(e,t){return t=E,e&&(t=l(e)?L(t,e):t[e]),t},boot:function(t){L(E,t),K(E.ini,function(e){L(E,e,t),K(E.exts,function(){_e.on(r,Je),we.on(r,Je),ae=1,Me()})})},toMap:se,toTry:F,toUrl:ce,parseUrl:ue,mix:L,has:J,keys:R,inside:M,node:P,applyStyle:D,guid:q,use:K,Cache:G,nodeId:z},le={fire:function(e,t,n,r){var i,o,a,f,u=this,c=u[y+e];if(t||(t={}),t.type||(t.type=e),c)for(o=(i=c.length)-1;i--;)(f=c[a=r?i:o-i]).f?(f.x=1,F(f.f,t,u),f.x=k):f.x||(c.splice(a,1),o--);(c=u["on"+e])&&F(c,t,u),n&&u.off(e)},on:function(e,t){var n=y+e;(this[n]||(this[n]=[])).push({f:t})},off:function(e,t){var n,r=y+e,i=this[r];if(t){if(i)for(var o=0,a=i;o<a.length;o++)if((n=a[o]).f==t){n.f=k;break}}else delete this[r],delete this["on"+e]}};ve.Event=le;var $e={},pe={},ge={},me=0,be=function(e){for(var t=0,n=e=(e+k).split(",");t<n.length;t++){var r=n[t];J(pe,r)?pe[r]++:pe[r]=1}return e},ye=function(e){for(var t,n=0,r=e;n<r.length;n++)t=r[n],J(pe,t)&&(--pe[t]||(delete pe[t],delete $e[t]))};var we=L({get:function(e){var t=e?$e[e]:$e;return t},set:function(e){return me=O(e,$e,ge)||me,this},digest:function(e){e&&we.set(e),me&&(me=0,this.fire(r,{keys:ge}),ge={})},diff:function(){return ge},clean:function(e){return{ctor:function(){e=be(e),this.on("destroy",function(){return ye(e)})}}}},le);ve.State=we;var xe,ke="view",Ve=new G,Ae=new G,Ie=f.location,Se=0,Te={query:{},params:{},href:k},Ce=/(?:^.*\/\/[^\/]+|#.*$)/gi,je=/^[^#]*#?!?/;function Ne(e,t){return this[C][e]||t!==o&&t||k}var qe,Ue,Ee,Pe,He,Oe=function(e,t){e="#!"+e,t?Ie.replace(e):Ie.hash=e},Me=function(){var r,i,o=Ze().srcHash;ie(f,"hashchange",function(e,t,n){i||(t=Ze(),(r=t.srcHash)!=o&&(n=function(){e.p=1,i=k,Oe(o=r),Re()},e={reject:function(){e.p=1,i=k,Oe(o)},resolve:n,prevent:function(){i=1}},_e.fire(c,e),i||e.p||n()))}),ie(f,"beforeunload",function(e,t,n){if(e=e||f.event,t={},_e.fire(s,t),n=t.msg)return e&&(e.returnValue=n),n}),Re()},Le=n.title,Ze=function(e){e=e||Ie.href;var t,n,r,i,o=Ve.get(e);return o||(o={get:Ne,href:e,srcQuery:t=e.replace(Ce,k),srcHash:n=e.replace(je,k),query:r=ue(t),hash:i=ue(n),params:L({},r[C],i[C])},ae&&(!function(e,t){if(qe||(qe=E.routes||{},Ue=E.unmatchView,Ee=E.defaultView,Pe=E.defaultPath||"/",He=E.rewrite),!e[ke]){var n=e.hash[j]||Pe;He&&(n=He(n,e[C],qe)),t=qe[n]||Ue||Ee,e[j]=n,e[ke]=t,l(t)&&L(e,t)}}(o),Ve.set(e,o))),o},Re=function(){var e=Ze(),t=function(e,t){var n=e.href,r=t.href,i=n+y+r,o=Ae.get(i);if(!o){var a,f;o={params:f={},force:!n};for(var u=e[C],c=t[C],s=function(e){var t=u[e],n=c[e];t!=n&&(f[e]={from:t,to:n},a=1)},h=0,d=R(u).concat(R(c));h<d.length;h++)s(d[h]);u=e,c=t,f=o,s(j),s(ke),Ae.set(i,o={a:a,b:o})}return o}(Te,Te=e);return!Se&&t.a&&((xe=t.b)[j]&&(n.title=e.title||Le),_e.fire(r,xe)),Se=0,xe},_e=L({parse:Ze,diff:Re,to:function(e,t,n,r){!t&&l(e)&&(t=e,e=k);var i,o,a,f,u=ue(e),c=u[C],s=u[j],h=Te[j],d=Te[C],v=Te.query[C];if(L(c,t),s)for(h in v)J(c,h)||(c[h]=k);else d&&(s=h,c=L({},d,c));o=Te,a=n,f=r,(i=ce(i=s,c,v))!=o.srcHash&&(Se=f,Oe(i,a))}},le);ve.Router=_e;var Be,De,ze=0,Fe=function(e,t,n,r,i,o){if(e&&e.$a!=ze&&(n=e.$v)&&1<n.$a){(t?function(e,t,n){var r,i=e.$os;if(i)for(var o=0,a=i;o<a.length&&(r=a[o],!(n=J(t,r)));o++);return n}(n,t):qt(n))&&n.$b();for(var a=0,f=e.children();a<f.length;a++)o=f[a],Fe(Qe[o],t)}},Je=function(e,t,n){t=We(),(n=e[ke])?t.mountView(n.to):(ze=a++,Fe(t,e.keys))},Qe={},Xe=function(e){if(!e.$b&&!e.$d&&e.$cc==e.$rc){e.$cr||(e.$cr=1,e.$ca=0,e.fire("created"));var t=e.id,n=e.pId,r=Qe[n];r&&!J(r.$e,t)&&(r.$e[t]=1,r.$rc++,Xe(r))}},Ge=function(e,t){if(!e.$ca&&e.$cr){e.$cr=0,e.$ca=1,e.fire("alter",t);var n=e.id,r=e.pId,i=Qe[r];i&&J(i.$e,n)&&(i.$rc--,delete i.$e[n],Ge(i,t))}},Ke=function(e,t,n,r){return r=(r=(r=Qe[e])&&r.$v)?r.$d.$a:{},0<t.indexOf(y)&&Q(r,n),r},We=function(e){return Be||(b=n.body,e=E.rootId,P(e)||(b.id=e),Be=new tt(e)),Be},Ye=function(e,t){J(Qe,e)||(Qe[e]=t,tt.fire("add",{vframe:t}),(e=P(e))&&(e.vframe=t))},et=[];function tt(e,t,n){(n=this).id=e,n.$c={},n.$cc=0,n.$rc=0,n.$g=n.$g||1,n.$e={},n.$f=[],n.pId=t,Ye(e,n)}L(tt,{all:function(){return Qe},get:function(e){return Qe[e]}},le),L(tt[w],le,{mountView:function(e,t){var n,r,i,o,a,f=this,u=f.id,c=f.pId,s=f.$g,h=P(u);!f.$h&&h&&(f.$h=1,f.$i=h.innerHTML),f.unmountView(),f.$b=0,n=ue(e),i=n[j],h&&i&&(f[j]=e,r=++s,o=n[C],Ke(c,e,o),f.$j=n[j],L(o,t),K(i,function(e){if(r==f.$g){if(!e)return E.error(Error("id:"+u+" cannot load:"+i));a=Nt(e),i=new e(u,f,o,a),f.$v=i,f.$a=ze,St(i),F(i.init,o,i),i.$b(),i.$e||(f.$h=0,i.$f||i.endUpdate())}}))},unmountView:function(){var e,t,n=this,r=n.$v,i=n.id;n.$f=[],r&&(De||(t=1,De={id:i}),n.$b=1,n.unmountZone(0,1),Ge(n,De),(n.$v=0)<r.$a&&(r.$a=0,delete at[i],delete ft[i],r.fire("destroy",0,1,1),At(r,1),St(r,1),r.owner=0),r.$a--,(e=P(i))&&n.$h&&d(e).html(n.$i),t&&(De=0)),n.$g++},mountVframe:function(e,t,n){var r,i=this,o=i.id,a=i.$c;return Ge(i,{id:e}),(r=Qe[e])||(J(a,e)||(i.$n=0,i.$cc++),a[e]=e,(r=et.pop())?tt.call(r,e,o):r=new tt(e,o)),r.mountView(t,n),r},mountZone:function(e,t){var n,r,i=this,o=[];e=e||i.id;var a,f=d("#"+e+" ["+N+"]");i.$d=1;for(var u=0,c=f;u<c.length;u++)(n=c[u]).$b||(r=z(n),n.$b=1,o.push([r,n.getAttribute(N)]));for(var s=0,h=o;s<h.length;s++)r=(a=h[s])[0],n=a[1],i.mountVframe(r,n);i.$d=0,t||Xe(i)},unmountVframe:function(e,t){var n,r,i,o;if(e=e?this.$c[e]:this.id,n=Qe[e]){var a=n.$cr,f=n.pId;n.unmountView(),i=a,(o=Qe[r=e])&&(delete Qe[r],tt.fire("remove",{vframe:o,fcc:i}),(r=P(r))&&(r.$b=0,r.vframe=0,r.$a=0)),n.id=n.pId=n.$c=n.$e=0,n.$h=0,n.off("alter"),n.off("created"),et.push(n),(n=Qe[f])&&J(n.$c,e)&&(delete n.$c[e],n.$n=0,n.$cc--,t||Xe(n))}},unmountZone:function(e,t){var n;for(n in this.$c)(!e||n!=e&&M(n,e))&&this.unmountVframe(n,1);t||Xe(this)},parent:function(e,t){for(t=this,e=e>>>0||1;t&&e--;)t=Qe[t.pId];return t},children:function(e){return(e=this).$n||(e.$n=R(e.$c))},invoke:function(e,t){var n,r,i,o,a,f=this.$f;return(r=this.$v)&&r.$f?n=(i=r[e])&&F(i,t,r):((o=f[a=y+e])&&(o.r=t===o.a),o={n:e,a:t,k:a},f.push(o),f[a]=o),n}}),ve.Vframe=tt,d.fn.invokeView=function(e,t){for(var n,r=[],i=0;i<this.length;i++)n=this[i].vframe,r.push(n&&n.invoke(e,t));return r};var nt=new G(30,10),rt=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,it={},ot={},at={},ft={},ut=0,ct=function(e,t){var n,r,i,o,a,f=[],u=e,c=e.getAttribute("mx-"+t),s=[],h=m,d=0;if(c&&((o=nt.get(c))||(o={v:(o=c.match(rt)||$)[1],n:o[2],i:o[3]},nt.set(c,o)),o=L({},o,{r:c})),o&&!o.v||ot[t]){if((i=ft[r=u.$d])&&1==i[u.$e]&&(a=1,h=r),!a){for(s.push(u);u!=b&&(u=u.parentNode);){if(Qe[r=u.id]||(i=ft[r=u.$d])&&1==i[u.$e]){h=r;break}s.push(u)}for(var v=0,l=s;v<l.length;v++)c=l[v],(r=ft[h])||(r=ft[h]={}),r[i=c.$e||(c.$e=++ut)]=1,c.$d=h}if(h!=m){u=e.id,Qe[u]&&(d=h=u);do{if((n=Qe[h])&&(a=n.$v)){for(r in(i=a.$so)[t])i={r:r,v:h,n:r},r?!d&&ne(e,r)&&f.push(i):d&&f.unshift(i);if(a.$e&&!d){o&&!o.v&&(o.v=h);break}d=0}}while(n&&(h=n.pId))}}return o&&f.push(o),f},st=function(e){for(var t,n,r,i,o,a,f,u=e.target,c=e.type,s=[];u!=b;){if((t=ct(u,c)).length){s=[];for(var h=0,d=t;h<d.length;h++){var v=d[h],l=v.v,$=(v.r,v.n),p=v.i;if(a!=l){if(a&&e.isPropagationStopped())break;a=l}(i=(r=Qe[l])&&r.$v)?(o=i[$+y+c])&&(e.eventTarget=u,f=p?de(p,i.$d.$a):{},e[C]=f,F(o,e,i)):e.stopPropagation()}}if((n=at[o=u.$d])&&(n=n[u.$e])&&n[c]||e.isPropagationStopped()){s.length&&s.push(o);break}s.push(u),a=u.id,Qe[a]&&s.push(a),u=u.parentNode||b}if(o=s.length)for(n=m;o--;)(i=s[o]).nodeType?((t=at[n])||(t=at[n]={}),(f=t[a=i.$e||(i.$e=++ut)])||(f=t[a]={},i.$d=n),f[c]=1):n=i},ht="http://www.w3.org/2000/svg",dt={option:[1,"<select multiple>"],thead:[1,"<table>"],col:[2,"<table><colgroup>"],tr:[2,"<table><tbody>"],td:[3,"<table><tbody><tr>"],area:[1,"<map>"],param:[1,"<object>"],g:[1,'<svg xmlns="'+ht+'">'],all:[0,""]},vt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;dt.optgroup=dt.option,dt.tbody=dt.tfoot=dt.colgroup=dt.caption=dt.thead,dt.th=dt.td;var lt=n.implementation.createHTMLDocument(k),$t=lt.createElement("base");$t.href=n.location.href,lt.head.appendChild($t);var pt=function(e,t){var n=z(t);e.$c[n]?e.unmountVframe(n,1):e.unmountZone(n,1)},gt={INPUT:[A,"checked"],TEXTAREA:[A],OPTION:["selected"]},mt=function(e,t){return 1==e.nodeType&&(e.$f?t=e.$g:((t=e.$a?k:e.id)||(t=e.getAttribute(T)),t||(t=e.getAttribute(N))&&(t=ue(t)[j]),e.$f=1,e.$g=t)),t},bt=function(e,t,n,r,i){for(var o,a,f,u,c,s=e.lastChild,h=t.firstChild,d=0,v={},l={};s;)d++,(f=mt(s))&&(f=v[f]||(v[f]=[])).push(s),s=s.previousSibling,h&&((f=mt(h))&&(l[f]=1),h=h.nextSibling);for(;h;)(f=mt(h))&&(l[f]=1),h=h.nextSibling;for(h=t.firstChild,c=t.childNodes.length<d,s=e.firstChild;h;)d--,h=(o=h).nextSibling,(u=v[f=mt(o)])&&(u=u.pop())?(u!=s?c&&s.nextSibling==u?(e.appendChild(s),s=u.nextSibling):e.insertBefore(u,s):s=s.nextSibling,yt(u,o,e,n,r,i)):s?(f=mt(a=s))&&v[f]&&l[f]?(d++,n.c=1,e.insertBefore(o,a)):(s=s.nextSibling,yt(a,o,e,n,r,i)):(e.appendChild(o),n.c=1);for(;0<d--;)a=e.lastChild,pt(r,a),e.removeChild(a),n.c=1},yt=function(e,t,n,r,i,o,a){if(function(e,t){var n,r=e.nodeName,i=gt[r],o=0;if(i)for(var a=0,f=i;a<f.length;a++)e[n=f[a]]!=t[n]&&(o=1,e[n]=t[n]);return o}(e,t)||1==e.nodeType&&(a=e.hasAttribute("mxv"))||!e.isEqualNode||!e.isEqualNode(t))if(e.nodeName===t.nodeName)if(1===e.nodeType){var f=t.getAttribute(T);if(f&&f==e.getAttribute(T))return;var u=t.getAttribute(N),c=t.innerHTML,s=t.getAttribute("mxa"),h=!s||s!=e.getAttribute("mxa"),d=void 0,v=void 0,l=Qe[e.id],$=void 0,p=void 0,g=u&&ue(u),m=void 0,b=void 0,y=void 0;if(u&&l&&(!t.id||t.id==e.id)&&l.$j==g[j]&&(p=l.$v)){if(b=c!=l.$i,y=u!=l[j],$=e.getAttribute("mxv"),!b&&!y&&$)for(var w=0,x=m=$.split(V);w<x.length;w++)if($=x[w],J(o,$)){y=1;break}y||b||a?($=p.$g)?(m=g[C],Ke(l.pId,u,m),l.$i=c,l[j]=u,g={node:t,html:c,deep:!p.$e,mxv:a,inner:b,query:y,keys:o},h=1,F($,[m,g],p)&&r.v.push(p),d=g.deep):d=v=1:h=1}else d=1,v=l;v&&(r.c=1,l.unmountVframe(0,1)),h&&function(e,t,n,r){var i,o,a,f;delete e.$f;var u=e.attributes,c=t.attributes;for(o=u.length;o--;)i=u[o].name,t.hasAttribute(i)||("id"==i?r||n.d.push([e,k]):(n.c=1,e.removeAttribute(i)));for(o=c.length;o--;)a=(i=c[o]).name,f=i[A],e.getAttribute(a)!=f&&("id"==a?n.d.push([e,f]):(n.c=1,e.setAttribute(a,f)))}(e,t,r,l&&u),d&&bt(e,t,r,i,o)}else e.nodeValue!==t.nodeValue&&(r.c=1,e.nodeValue=t.nodeValue);else pt(i,e),n.replaceChild(t,e),r.c=1},wt=function(t,n){var e,r,i=t.$k,o=t.$c,a=t.$b,f=Qe[a],u=f&&f.$v,c={d:[],v:[]},s=P(a),h=t.$a,d=function(e){n.i<n.length?wt(t,n):(c=n.slice(),n.i=n.length=0,e&&u.fire("domready"),F(c))};if(n.i=n.length,t.$c=0,t.$k={},o&&u&&0<u.$a&&(e=u.$e)){delete at[a],delete ft[a],r=function(e,t){var n=lt.createElement("div"),r=ht==t.namespaceURI?"g":(vt.exec(e)||[0,""])[1].toLowerCase(),i=dt[r]||dt.all;n.innerHTML=i[1]+e;for(var o=i[0];o--;)n=n.lastChild;return n}(e(h,a),s),bt(s,r,c,f,i);for(var v=0,l=c.d;v<l.length;v++)(r=l[v])[0].id=r[1];for(var $=0,p=c.v;$<p.length;$++)(r=p[$]).$b();!c.c&&u.$f||u.endUpdate(a),c.c&&g.trigger({type:"htmlchanged",vId:a}),d(1)}else d()};function xt(e){var t,n=this;n.$b=e,n.$c=1,n.$a=((t={vId:e})[y]=1,t),n.$d=[],n.$k={}}L(xt[w],{get:function(e,t){return t=this.$a,e&&(t=t[e]),t},set:function(e){var t=this;return t.$c=O(e,t.$a,t.$k)||t.$c,t},digest:function(e,t){var n=this.set(e),r=n.$d;r.push(t),r.i||wt(n,r)},snapshot:function(){return this.$e=h(this.$a),this},altered:function(){if(this.$e)return this.$e!=h(this.$a)},translate:function(e){return Q(this.$a,e,1)},parse:function(e){return de(e,this.$a)}});var kt=/^(\$?)([^<]*)<([^>]+)>$/,Vt=function(e,t,n){return e.a?n=e:((n=function(e){F(n.a,e,this)}).a=[e],n.b=1),n.a=n.a.concat(t.a||t),n},At=function(e,t){var n,r,i=e.$r;for(n in i)r=i[n],(t||r.x)&&It(i,n,1)},It=function(e,t,n,r){var i,o,a=e[t];return a&&a!=r&&((i=(o=a.e).destroy)&&n&&F(i,$,o),delete e[t]),o},St=function(e,t){var n,r,i,o,a,f,u=e.$eo,c=e.$so,s=e.$el,h=e.id;for(n in u)i=c[r=n],o=t,void 0,a=0|it[r],f=o?-1:1,a&&o!==a||ie(b,r,st,o),it[r]=a+f,i&&(ot[r]=(0|ot[r])+f);for(var d=0,v=s;d<v.length;d++)n=v[d],ie(n.e,n.n,re,t,{i:h,v:e,f:n.f,e:n.e})},Tt=[],Ct={win:f,doc:n},jt=function(e,t,n){for(var r,i,o,a,f={},u=0,c=e;u<c.length;u++)for(r in i=c[u])o=i[r],a=f[r],"ctor"!=r?(kt.test(r)&&(a?o=Vt(a,o):o.b=1),f[r]=o):n.push(o);for(r in f)J(t,r)||(t[r]=f[r])},Nt=function(e){if(!e[y]){e[y]=[];var t=e[w],n=void 0,r=void 0,i=void 0,o={},a=[],f={},u=void 0,c=void 0,s=void 0,h=void 0,d=void 0;for(s in(r=t.mixins)&&jt(r,t,e[y]),t)if(n=t[s],r=s.match(kt)){c=r[1],i=r[2];for(var v=0,l=r[3].split(V);v<l.length;v++){if(h=l[v],u=Ct[i],d=1,c){if(u){a.push({f:n,e:u,n:h});continue}d=2,(u=f[h])||(u=f[h]={}),u[i]=1}o[h]=o[h]|d,(u=t[h=i+y+h])?u.b&&(n.b?t[h]=Vt(n,u):J(t,s)&&(t[h]=n)):t[h]=n}}g="$b",m=($=t)[p="render"],$[p]=$[g]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0<(b=this).$a&&(b.$a++,b.fire("rendercall"),At(b),F(m,e,b))},t.$eo=o,t.$el=a,t.$so=f,t.$e=t.tmpl,t.$g=t.assign}var $,p,g,m,b;return e[y]},qt=function(e){var t,n,r,i=e.$l;if(i.f&&(i.p&&(t=xe[j]),!t&&i.k)){r=xe[C];for(var o=0,a=i.k;o<a.length&&(n=a[o],!(t=J(r,n)));o++);}return t};function Ut(e,t,n,r){(r=this).owner=t,r.id=e,r.$l={k:[]},r.$r={},r.$a=1,r.updater=r.$d=new xt(r.id),F(Tt,n,r)}var Et=Ut[w];L(Ut,{merge:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];jt(e,Et,Tt)},extend:function(e,t){var i=this,n=(e=e||{}).ctor,o=[];function r(e,t,n,r){i.call(this,e,t,n),F(o.concat(r),n,this)}return n&&o.push(n),r.extend=i.extend,ee(r,i,e,t)}}),L(Et,le,{init:e,beginUpdate:function(e,t){0<(t=this).$a&&t.$f&&t.owner.unmountZone(e,1)},endUpdate:function(e,t,n,r,i){0<(n=this).$a&&(e=e||n.id,t?i=t:(i=n.$f,n.$f=1),(r=n.owner).mountZone(e,t),i||u(n.wrapAsync(function(){!function(e,t,n){for(t=e.$f;t.length;)(n=t.shift()).r||e.invoke(n.n,n.a),delete t[n.k]}(r)}),0))},wrapAsync:function(n,r){var i=this,o=i.$a;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0<o&&o==i.$a)return n.apply(r||i,e)}},observeLocation:function(e,t){var n;(n=this.$l).f=1,l(e)&&(t=e[j],e=e[C]),n.p=t,e&&(n.k=(e+k).split(V))},observeState:function(e){this.$os=(e+k).split(V)},capture:function(e,t,n,r){return r=this.$r,t?(It(r,e,1,t),r[e]={e:t,x:n}):t=(r=r[e])&&r.e,t},release:function(e,t){return It(this.$r,e,t)},leaveTip:function(r,i){var o=this,a=function(e){var t="a",n="b";e.type!=c&&(t="b",n="a"),a[t]?(e.prevent(),e.reject()):i()&&(e.prevent(),a[n]=1,o.leaveConfirm(function(){a[n]=0,e.resolve()},function(){a[n]=0,e.reject()},r))},e=function(e){i()&&(e.msg=r)};_e.on(c,a),_e.on(s,e),o.on("unload",a),o.on("destroy",function(){_e.off(c,a),_e.off(s,e)})},render:e}),ve.View=Ut;var Pt=d.type,Ht=d.now||Date.now;function Ot(){this.id=q("b"),this.$={}}L(Ot[w],{get:function(e,t){var n=this.$;if(e){for(var r=I(e)?e.slice():(e+k).split("."),i=void 0;(i=r.shift())&&n;)n=n[i];i&&(n=o)}return t!==o&&Pt(t)!=Pt(n)&&(n=t),n},set:function(e,t){var n;l(e)||((n={})[e]=t,e=n),L(this.$,e)}});function Mt(e,t,n){(n=this[e])&&(delete this[e],F(n,t,n.e))}var Lt=function(e,t,n,r,i){if(e.$d)return e;if(e.$e)return e.enqueue(Lt.bind(e,e,t,n,r,i));e.$e=1,I(t)||(t=[t]);for(var c,s,h,d,v,l,$,p,g,o=e.constructor,a=0,f=o.$f,u=(c=n,s=o,h=e,d=t.length,v=r,l=o.$c,$=[],p=S,g=0,function(e,t){var n,r=this;g++;var i,o=r.$b,a=o.k,f={bag:$[e+1]=r,error:t};if(t?(p=t,s.fire("fail",f),n=1):l.has(a)||(a&&l.set(a,r),o.t=Ht(),(i=o.a)&&F(i,r,r),(i=o.x)&&s.clear(i),s.fire("done",f),n=1),!h.$d){var u=g==d;u&&(h.$e=0,2==v&&($[0]=p,F(c,$,h))),1==v&&F(c,[t||S,r,u,e],h)}n&&s.fire("end",f)}),m=0,b=t;m<b.length;m++){var y=b[m];if(y){var w=o.get(y,i),x=w.e,k=x.$b.k,V=u.bind(x,a++),A=void 0;k&&f[k]?f[k].push(V):w.u?(k&&((A=[V]).e=x,f[k]=A,V=Mt.bind(f,k)),o.$s(x,V)):V()}}return e};function Zt(){var e=this;e.id=q("s"),e.$g=[]}L(Zt[w],{all:function(e,t){return Lt(this,e,t,2)},save:function(e,t){return Lt(this,e,t,2,1)},one:function(e,t){return Lt(this,e,t,1)},enqueue:function(e){var t=this;return t.$d||(t.$g.push(e),t.dequeue(t.$h)),t},dequeue:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=this;r.$e||r.$d||(r.$e=1,u(function(){r.$e=0,r.$d||(n=r.$g.shift())&&F(n,r.$h=e)},0))},destroy:function(e){(e=this).$d=1,e.$g=0}});var Rt=function(e,t){return[h(t),h(e)].join(y)},_t=function(e,t,n,r){(r=e&&e.$b)&&t[r.n]&&n.del(r.k)},Bt=L({add:function(e){var t,n=this.$b;I(e)||(e=[e]);for(var r=0,i=e;r<i.length;r++)if(t=i[r]){var o=t.name,a=t.cache;t.cache=0|a,n[o]=t}},create:function(e){var t=this.meta(e),n=0|e.cache||t.cache,r=new Ot;r.set(t),r.$b={n:t.name,a:t.after,x:t.cleans,k:n&&Rt(t,e)},l(e)&&r.set(e);var i=t.before;return i&&F(i,r,r),this.fire("begin",{bag:r}),r},meta:function(e){return this.$b[e.name||e]||e},get:function(e,t){var n,r;return t||(n=this.cached(e)),n||(n=this.create(e),r=1),{e:n,u:r}},clear:function(e){this.$c.each(_t,se((e+k).split(V)))},cached:function(e){var t,n,r=this.$c,i=this.meta(e),o=0|e.cache||i.cache;if(o&&(n=Rt(i,e)),n){var a=this.$f[n];a?t=a.e:(t=r.get(n))&&Ht()-t.$b.t>o&&(r.del(n),t=0)}return t}},le);return Zt.extend=function(e,t,n){function r(){Zt.call(this)}return r.$s=e,r.$c=new G(t,n),r.$f={},r.$b={},ee(r,Zt,S,Bt)},ve.Service=Zt,L(e[w],le),e.extend=function e(t,n){var r=this,i=t&&t.ctor;function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r.apply(this,e),i&&i.apply(this,e)}return o.extend=e,ee(o,r,t,n)},ve.Base=e,ve.default=ve});