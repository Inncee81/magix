/*!3.8.14 MIT kooboy_li@163.com*/define("magix",["$"],function(e){var n=e("$"),t=n.isPlainObject,r=n.isArray,i=0,o="",a=[],f=window,u=void 0,c=document,h=c.documentElement.getAttribute,s=function(e,n){return h.call(e,n)},d=n(c),l=f.setTimeout;function v(){}var $,p=JSON.stringify,g="\x1e",m="prototype",b="params",w=/[#?].*$/,y=/([^=&?\/#]+)=?([^&#?]*)/g,x=/(?!^)=|&/,k=function(e){return(e||"mx_")+i++},V=k(),I={rootId:k(),defaultView:V,error:function(e){throw e}},T=function(e){return"object"==typeof e?e:c.getElementById(e)},C=function(e){return!e||"object"!=typeof e},S=function(e,n,t,r){var i,o,a,f=0;for(a in e)i=e[a],o=n[a],C(i)&&o===i||H(r,a)||(t[a]=1,f=1),n[a]=i;return f},j=function(e,n,t){if(e=T(e),n=T(n),e&&n&&!(t=e==n))try{t=16==(16&n.compareDocumentPosition(e))}catch(e){}return t};function A(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])H(n,i)&&(e[i]=n[i]);return e}var U,_=function(e,n,t){for(t in n=[],e)H(e,t)&&n.push(t);return n},q=I.hasOwnProperty,E=n("head"),M=function(e,n){n&&!M[e]&&(M[e]=1,E.append("<style>"+n))},N=function(e){return s(e,"id")||(e.$a=1,e.id=k())},P=function(e,n,t,i,o){n=n||a,r(e)||(e=[e]),r(n)||(n=[n]);for(var f=0,u=e;f<u.length;f++){o=u[f];try{i=o&&o.apply(t,n)}catch(e){I.error(e)}}return i},H=function(e,n){return e&&q.call(e,n)},O=function(e,n){var t,r;if(C(n))(t=n+o)[0]==g&&H(e,t)&&(n=e[t]);else for(t in n)r=n[t],r=O(e,r),n[t]=r;return n},L=function(e,n){return n.f-e.f||n.t-e.t};function R(e,n,t,r){(r=this).c=[],r.b=n||5,r.x=r.b+(e||20),r.r=t}A(R[m],{get:function(e){var n=this.c[g+e];return n&&(n.f++,n.t=i++,n=n.v),n},each:function(e,n,t){for(var r=0,i=(t=this).c;r<i.length;r++)e(i[r].v,n,t)},set:function(e,n){var t=this.c,r=g+e,o=t[r],a=this.b;if(!o){if(t.length>=this.x)for(t.sort(L);a--;)(o=t.pop()).f>0&&this.del(o.o);o={o:e},t.push(o),t[r]=o}o.v=n,o.f=1,o.t=i++},del:function(e){e=g+e;var n=this.c,t=n[e],r=this.r;t&&(t.f=-1,t.v=o,delete n[e],r&&P(r,t.o))},has:function(e){return H(this.c,g+e)}});var Z=function(n,t){if(n){var i=[],o=void 0;if(V==n)U||(U=On.extend()),t(U);else if(f.seajs)seajs.use(n,function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=0,o=e;r<o.length;r++){var a=o[r];i.push(a&&a.__esModule&&a.default||a)}t&&t.apply(void 0,i)});else{r(n)||(n=[n]);for(var a=0,u=n;a<u.length;a++)o=u[a],o=e(o),i.push(o&&o.__esModule&&o.default||o);t&&t.apply(void 0,i)}}else t()};function B(){}var D,z=function(e,n,t,r,i){return B[m]=n[m],A(i=new B,t),A(e,r),i.constructor=e,e[m]=i,e},F=n.find||n.zepto,J=F.matchesSelector||F.matches,Q=function(e,n){n=e.data,e.eventTarget=n.e,P(n.f,e,n.v)},X=function(e,t,r,i,o){o&&(t+="."+o.i),i?n(e).off(t,r):n(e).on(t,o,r)},G=function(e){return e},K=new R,W=0,Y=function(e,n,t){try{t=decodeURIComponent(t)}catch(e){}D[n]=t},ee=function(e){var n,t=K.get(e);return t||(D={},n=e.replace(w,o),e==n&&x.test(n)&&(n=o),e.replace(n,o).replace(y,Y),K.set(e,t={a:n,b:D})),{path:t.a,params:A({},t.b)}},ne=function(e,n,t){var r,i,a,f=[];for(i in n)r=n[i]+o,(!t||r||H(t,i))&&(r=encodeURIComponent(r),f.push(a=i+"="+r));return a&&(e+=(e&&(~e.indexOf("?")?"&":"?"))+f.join("&")),e},te=function(e,n){var t,r={};if(e)for(var i=0,o=e;i<o.length;i++)t=o[i],r[n&&t?t[n]:t]=n?t:1+(0|r[t]);return r},re=new R,ie=function(e,n,t){return re.has(e)?t=re.get(e):(t=P(Function("return "+e)),e.indexOf(g)>-1?O(n,t):re.set(e,t)),t},oe={config:function(e,n){return n=I,e&&(n=t(e)?A(n,e):n[e]),n},boot:function(e){A(I,e),Z(I.ini,function(n){A(I,n,e),Z(I.exts,function(){qe.on("changed",He),le.on("changed",He),W=1,je()})})},toMap:te,toTry:P,toUrl:ne,parseUrl:ee,mix:A,has:H,keys:_,inside:j,node:T,applyStyle:M,guid:k,use:Z,Cache:R,nodeId:N,guard:G},ae={fire:function(e,n,t,r){var i,a,f,u,c=this,h=c[g+e];if(n||(n={}),n.type=e,h)for(a=(i=h.length)-1;i--;)(u=h[f=r?i:a-i]).f?(u.x=1,P(u.f,n,c),u.x=o):u.x||(h.splice(f,1),a--);return(h=c["on"+e])&&P(h,n,c),t&&c.off(e),c},on:function(e,n){var t=g+e;return(this[t]||(this[t]=[])).push({f:n}),this},off:function(e,n){var t,r=g+e,i=this[r];if(n){if(i)for(var a=0,f=i;a<f.length;a++)if((t=f[a]).f==n){t.f=o;break}}else delete this[r],delete this["on"+e];return this}};oe.Event=ae;var fe={},ue={},ce={},he=0,se=function(e){for(var n=0,t=e=(e+o).split(",");n<t.length;n++){var r=t[n];H(ue,r)?ue[r]++:ue[r]=1}return e},de=function(e){for(var n,t=0,r=e;t<r.length;t++)n=r[t],H(ue,n)&&(--ue[n]||(delete ue[n],delete fe[n]))};var le=A({get:function(e){var n=e?fe[e]:fe;return n},set:function(e,n){return he=S(e,fe,ce,n)||he,this},digest:function(e,n){(e&&le.set(e,n),he)&&(he=0,this.fire("changed",{keys:ce}),ce={})},diff:function(){return ce},clean:function(e){return{ctor:function(){e=se(e),this.on("destroy",function(){return de(e)})}}}},ae);oe.State=le;var ve,$e=new R,pe=new R,ge=f.location,me=0,be={query:{},params:{},href:o},we=/(?:^.*\/\/[^\/]+|#.*$)/gi,ye=/^[^#]*#?!?/;function xe(e,n){return this[b][e]||n!==u&&n||o}var ke,Ve,Ie,Te,Ce,Se=function(e,n){e="#!"+e,n?ge.replace(e):ge.hash=e},je=function(){var e,n,t=Ue().srcHash;X(f,"hashchange",function(r,i,a){n||(i=Ue(),(e=i.srcHash)!=t&&(a=function(){r.p=1,t=e,n=o,Se(e),_e()},r={reject:function(){r.p=1,n=o,Se(t)},resolve:a,prevent:function(){n=1}},qe.fire("change",r),n||r.p||a()))}),X(f,"beforeunload",function(e,n,t){if(e=e||f.event,n={},qe.fire("pageunload",n),t=n.msg)return e&&(e.returnValue=t),t}),_e()},Ae=c.title,Ue=function(e){e=e||ge.href;var n,r,i,a,f=$e.get(e);return f||(n=e.replace(we,o),r=e.replace(ye,o),f={get:xe,href:e,srcQuery:n,srcHash:r,query:i=ee(n),hash:a=ee(r),params:A({},i[b],a[b])},W&&(!function(e,n){if(ke||(ke=I.routes||{},Ve=I.unmatchView,Ie=I.defaultView,Te=I.defaultPath||"/",Ce=I.rewrite),!e.view){var r=e.hash.path||Te;Ce&&(r=Ce(r,e[b],ke)),n=ke[r]||Ve||Ie,e.path=r,e.view=n,t(n)&&A(e,n)}}(f),$e.set(e,f))),f},_e=function(){var e=Ue(),n=function(e,n){var t=e.href,r=n.href,i=t+g+r,o=pe.get(i);if(!o){var a,f;o={params:f={},force:!t};for(var u=e[b],c=n[b],h=function(e){var n=u[e],t=c[e];n!=t&&(f[e]={from:n,to:t},a=1)},s=0,d=_(u).concat(_(c));s<d.length;s++)h(d[s]);u=e,c=n,f=o,h("path"),h("view"),pe.set(i,o={a:a,b:o})}return o}(be,be=e);return!me&&n.a&&((ve=n.b).path&&(c.title=e.title||Ae),qe.fire("changed",ve)),me=0,ve},qe=A({parse:Ue,diff:_e,to:function(e,n,r,i){!n&&t(e)&&(n=e,e=o);var a=ee(e),f=a[b],u=a.path,c=be.path,h=be[b],s=be.query[b];if(A(f,n),u)for(c in s)H(f,c)||(f[c]=o);else h&&(u=c,f=A({},h,f));!function(e,n,t,r,i,o){(e=ne(e,n,o))!=t.srcHash&&(me=i,Se(e,r))}(u,f,be,r,i,s)}},ae);oe.Router=qe;var Ee,Me,Ne=0,Pe=function(e,n,t,r,i,o,a){e&&e.$a!=Ne&&(t=e.$v)&&t.$a>1&&((n?function(e,n,t){var r,i=e.$os;if(i)for(var o=0,a=i;o<a.length&&(r=a[o],!(t=H(n,r)));o++);return t}(t,n):Hn(t))&&(a=t.$b()),a&&a.then||(a=Le),a.then(function(){for(var t=0,r=e.children();t<r.length;t++)o=r[t],Pe(Oe[o],n)}))},He=function(e,n,t){n=De(),(t=e.view)?n.mountView(t.to):(Ne=i++,Pe(n,e.keys))},Oe={},Le={then:function(e){return e()}},Re=function(e){if(!e.$b&&!e.$d&&e.$cc==e.$rc){e.$cr||(e.$cr=1,e.$ca=0,e.fire("created"));var n=e.id,t=e.pId,r=Oe[t];r&&!H(r.$e,n)&&(r.$e[n]=1,r.$rc++,Re(r))}},Ze=function(e,n){if(!e.$ca&&e.$cr){e.$cr=0,e.$ca=1,e.fire("alter",n);var t=e.id,r=e.pId,i=Oe[r];i&&H(i.$e,t)&&(i.$rc--,delete i.$e[t],Ze(i,n))}},Be=function(e,n,t,r){return r=(r=(r=Oe[e])&&r.$v)?r.$d.$a:{},n.indexOf(g)>0&&O(r,t),r},De=function(e){return Ee||($=c.body,e=I.rootId,T(e)||($.id=e),Ee=new Je(e)),Ee},ze=function(e,n){H(Oe,e)||(Oe[e]=n,Je.fire("add",{vframe:n}),(e=T(e))&&(e.vframe=n))},Fe=[];function Je(e,n,t){(t=this).id=e,t.$c={},t.$cc=0,t.$rc=0,t.$g=t.$g||1,t.$e={},t.$f=[],t.pId=n,ze(e,t)}A(Je,{all:function(){return Oe},get:function(e){return Oe[e]}},ae),A(Je[m],ae,{mountView:function(e,n){var t,r,i,a,f,u=this,c=u.id,h=T(c),s=u.pId;!u.$h&&h&&(u.$h=1,u.$i=h.innerHTML),u.unmountView(),u.$b=0,t=ee(e||o),i=t.path,h&&i&&(u.path=e,a=t[b],Be(s,e,a),u.$j=t.path,A(a,n),r=u.$g,Z(i,function(e){if(r==u.$g){if(!e)return I.error(Error("id:"+c+" cannot load:"+i));f=Pn(e),i=new e(c,u,a,h,f),u.$v=i,u.$a=Ne,qn(i),P(i.init,[a,{node:h,deep:!i.tmpl}],i),i.$b(),i.tmpl||(u.$h=0,i.$e||i.endUpdate())}}))},unmountView:function(){var e,t,r=this,i=r.$v,o=r.id;r.$f=[],i&&(Me||(t=1,Me={id:o}),r.$b=1,r.unmountZone(0,1),Ze(r,Me),r.$v=0,i.$a>0&&(i.$a=0,delete We[o],delete Ye[o],i.fire("destroy",0,1,1),Un(i,1),qn(i,1),i.owner=0),i.$a--,(e=T(o))&&r.$h&&n(e).html(r.$i),t&&(Me=0)),r.$g++},mountVframe:function(e,n,t){var r,i=this,o=i.id,a=i.$c;return Ze(i,{id:e}),(r=Oe[e])||(H(a,e)||(i.$n=0,i.$cc++),a[e]=e,(r=Fe.pop())?Je.call(r,e,o):r=new Je(e,o)),r.mountView(n,t),r},mountZone:function(e,t){var r,i,o,a=this,f=[];e=e||a.id;var u=n("#"+e+" [mx-view]");a.$d=1;for(var c=0,h=u;c<h.length;c++)(i=h[c]).$b||(o=N(i),i.$b=1,f.push([o,s(i,"mx-view")]));for(var d=0,l=f;d<l.length;d++)o=(r=l[d])[0],i=r[1],a.mountVframe(o,i);a.$d=0,t||Re(a)},unmountVframe:function(e,n){var t;if(e=e?this.$c[e]:this.id,t=Oe[e]){var r=t.$cr,i=t.pId;t.unmountView(),function(e,n,t){(t=Oe[e])&&(delete Oe[e],Je.fire("remove",{vframe:t,fcc:n}),(e=T(e))&&(e.$b=0,e.vframe=0,e.$a=0))}(e,r),t.id=t.pId=t.$c=t.$e=0,t.$h=0,t.off("alter"),t.off("created"),Fe.push(t),(t=Oe[i])&&H(t.$c,e)&&(delete t.$c[e],t.$n=0,t.$cc--,n||Re(t))}},unmountZone:function(e,n){var t;for(t in this.$c)(!e||t!=e&&j(t,e))&&this.unmountVframe(t,1);n||Re(this)},parent:function(e,n){for(n=this,e=e>>>0||1;n&&e--;)n=Oe[n.pId];return n},children:function(e){return(e=this).$n||(e.$n=_(e.$c))},invoke:function(e,n){var t,r,i,o,a,f=this.$f;return(r=this.$v)&&r.$e?t=(i=r[e])&&P(i,n,r):((o=f[a=g+e])&&(o.r=n===o.a),o={n:e,a:n,k:a},f.push(o),f[a]=o),t}}),oe.Vframe=Je,n.fn.invokeView=function(e,n){for(var t,r=[],i=0;i<this.length;i++)t=this[i].vframe,r.push(t&&t.invoke(e,n));return r};var Qe=new R(30,10),Xe=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,Ge={},Ke={},We={},Ye={},en=0,nn=function(e,n){var t,r,i,o,f,u,c=[],h=e,d=s(e,"mx-"+n),l=[],v="#",p=0;if(d&&((f=Qe.get(d))||(f={v:(f=d.match(Xe)||a)[1],n:f[2],i:f[3]},Qe.set(d,f)),f=A({},f,{r:d})),f&&!f.v||Ke[n]){if((i=Ye[r=h.$d])&&1==i[h.$e]&&(u=1,v=r),!u){for(l.push(h);h!=$&&(h=h.parentNode);){if(Oe[r=h.id]||(i=Ye[r=h.$d])&&1==i[h.$e]){v=r;break}l.push(h)}for(var g=0,m=l;g<m.length;g++)d=m[g],(r=Ye[v])||(r=Ye[v]={}),r[i=d.$e||(d.$e=++en)]=1,d.$d=v}h=e.id,Oe[h]&&(p=v=h);do{if((t=Oe[v])&&(u=t.$v)){if(o=(i=u.$so)[n])for(h=o.length;h--;)i={r:r=o[h],v:v,n:r},r?!p&&J(e,r)&&c.push(i):p&&c.unshift(i);if(u.tmpl&&!p){f&&!f.v&&(f.v=v);break}p=0}}while(t&&(v=t.pId))}return f&&c.push(f),c},tn=function(e){for(var n,t,r,i,o,a,f,u=e.target,c=e.type,h=[];u!=$;){if((n=nn(u,c)).length){h=[];for(var s=0,d=n;s<d.length;s++){var l=d[s],v=l.v,p=(l.r,l.n),m=l.i;if(a!=v){if(a&&e.isPropagationStopped())break;a=v}(i=(r=Oe[v])&&r.$v)?(o=i[p+g+c])&&(e.eventTarget=u,f=m?ie(m,i.$d.$a):{},e[b]=f,P(o,e,i)):e.stopPropagation()}}if((t=We[o=u.$d])&&(t=t[u.$e])&&t[c]||e.isPropagationStopped()){h.length&&h.push(o);break}a=u.id,Oe[a]&&h.push(a),h.push(u),u=u.parentNode||$}if(o=h.length)for(t="#";o--;)(i=h[o]).nodeType?((n=We[t])||(n=We[t]={}),(f=n[a=i.$e||(i.$e=++en)])||(f=n[a]={}),f[c]=1):t=i},rn="http://www.w3.org/2000/svg",on="http://www.w3.org/1998/Math/MathML",an={option:[1,"<select multiple>"],thead:[1,"<table>"],col:[2,"<table><colgroup>"],tr:[2,"<table><tbody>"],td:[3,"<table><tbody><tr>"],area:[1,"<map>"],param:[1,"<object>"],g:[1,'<svg xmlns="'+rn+'">'],m:[1,'<math xmlns="'+on+'">'],_:[0,""]},fn=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;an.optgroup=an.option,an.tbody=an.tfoot=an.colgroup=an.caption=an.thead,an.th=an.td;var un=c.implementation.createHTMLDocument(o),cn=un.createElement("base");cn.href=c.location.href,un.head.appendChild(cn);var hn=function(e,n){if(1==n.nodeType){var t=N(n);e.unmountZone(t,1),e.$c[t]&&e.unmountVframe(t,1)}},sn={INPUT:["value","checked"],TEXTAREA:["value"],OPTION:["selected"]},dn=function(e,n){return 1==e.nodeType&&(e.$f?n=e.$g:((n=e.$a?o:s(e,"id"))||(n=s(e,"mxs")),n||(n=s(e,"mx-view"))&&(n=ee(n).path),e.$f=1,e.$g=n)),n},ln=function(e,n,t,r,i){for(var o,a,f,u,c,h=e.lastChild,s=n.firstChild,d=0,l={},v={};h;)d++,(f=dn(h))&&(f=l[f]||(l[f]=[])).push(h),h=h.previousSibling;for(;s;)(f=dn(s))&&(v[f]=(v[f]||0)+1),s=s.nextSibling;for(s=n.firstChild,h=e.firstChild;s;)if(d--,o=s,s=s.nextSibling,(u=l[f=dn(o)])&&(u=u.pop())){for(;u!=h;)c=h.nextSibling,e.appendChild(h),h=c;h=u.nextSibling,v[f]&&v[f]--,vn(u,o,e,t,r,i)}else h?(f=dn(a=h))&&l[f]&&v[f]?(d++,t.c=1,t.n.push([8,e,o,a])):(h=h.nextSibling,vn(a,o,e,t,r,i)):(t.c=1,t.n.push([1,e,o]));for(a=e.lastChild;d-- >0;)hn(r,a),t.n.push([2,e,a]),a=a.previousSibling,t.c=1},vn=function(e,n,t,r,i,a){if(function(e,n){var t,r=e.nodeName,i=sn[r],o=0;if(i)for(var a=0,f=i;a<f.length;a++)e[t=f[a]]!=n[t]&&(o=1,e[t]=n[t]);return o}(e,n)||1==e.nodeType&&e.hasAttribute("mxv")||!e.isEqualNode||!e.isEqualNode(n))if(e.nodeName===n.nodeName)if(1===e.nodeType){var f=s(n,"mxs");if(f&&f==s(e,"mxs"))return;var u=s(n,"mx-view"),c=n.innerHTML,h=s(n,"mxa"),d=!h||h!=s(e,"mxa"),l=void 0,v=void 0,$=Oe[s(e,"id")],p=void 0,g=void 0,m=u&&ee(u),w=void 0,y=void 0,x=void 0;if(u&&$&&(!s(n,"id")||s(n,"id")==s(e,"id"))&&$.$j==m.path&&(g=$.$v)){if(y=c!=$.$i,x=u!=$.path,p=s(e,"mxv"),!y&&!x&&p)for(var k=0,V=w=p.split(",");k<V.length;k++)if("#"==(p=V[k])||H(a,p)){x=1;break}(x||y)&&((p=g.$e&&g.$f)?(w=m[b],Be($.pId,u,w),$.$i=c,$.path=u,m={node:n,deep:!g.tmpl,attr:d,inner:y,query:x,keys:a},P(p,[w,m],g)&&r.v.push(g),l=m.deep):(v=1,l=1))}else l=1,v=$;v&&(r.c=1,$.unmountVframe(0,1)),d&&function(e,n,t,r){var i,a,f,u;delete e.$f;var c=e.attributes,h=n.attributes;for(a=c.length;a--;)i=c[a].name,n.hasAttribute(i)||("id"==i?r||t.d.push([e,o]):(t.c=1,e.removeAttribute(i)));for(a=h.length;a--;)f=(i=h[a]).name,u=i.value,s(e,f)!=u&&("id"==f?t.d.push([e,u]):(t.c=1,e.setAttribute(f,u)))}(e,n,r,$&&u),l&&ln(e,n,r,i,a)}else e.nodeValue!==n.nodeValue&&(r.c=1,e.nodeValue=n.nodeValue);else hn(i,e),r.c=1,r.n.push([4,t,n,e])},$n={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},pn=/[&<>"'\`]/g,gn=function(e){return""+(null==e?"":e)},mn=function(e){return"&"+$n[e]+";"},bn=function(e){return gn(e).replace(pn,mn)},wn=function(e,n,t,r){for(r=e[g];--r;)if(e[t=g+r]===n)return t;return e[t=g+e[g]++]=n,t},yn={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},xn=function(e){return yn[e]},kn=/[!')(*]/g,Vn=function(e){return encodeURIComponent(gn(e)).replace(kn,xn)},In=/[\\'"]/g,Tn=function(e){return gn(e).replace(In,"\\$&")},Cn=function(e,n){var t,r,i=e.$k,o=e.$c,a=e.$b,f=Oe[a],u=f&&f.$v,c={d:[],v:[],n:[]},h=T(a),s=e.$d,l=e.$a,v=function(t){n.i<n.length?Cn(e,n):(c=n.slice(),n.i=n.length=0,t&&u.fire("domready"),P(c))};if(n.i=n.length,e.$c=0,e.$k={},o&&u&&h&&u.$a>0&&(t=u.tmpl)&&u.$d==e){u.fire("dompatch"),delete We[a],delete Ye[a],r=function(e,n){var t,r=un.createElement("div"),i=n.namespaceURI;t=i==rn?"g":i==on?"m":(fn.exec(e)||[0,""])[1];var o=an[t]||an._;r.innerHTML=o[1]+e;for(var a=o[0];a--;)r=r.lastChild;return r}(t(s,a,l,bn,gn,Vn,wn,Tn),h),ln(h,r,c,f,i);for(var $=0,p=c.d;$<p.length;$++)(r=p[$])[0].id=r[1];for(var g=0,m=c.n;g<m.length;g++)1==(r=m[g])[0]?r[1].appendChild(r[2]):2==r[0]?r[1].removeChild(r[2]):4==r[0]?r[1].replaceChild(r[2],r[3]):r[1].insertBefore(r[2],r[3]);f.$d=t=c.c||!u.$e;for(var b=0,w=c.v;b<w.length;b++)(r=w[b]).$b();t&&u.endUpdate(a),c.c&&d.fire("htmlchanged",{vId:a}),v(1)}else v()};function Sn(e){var n,t=this;t.$b=e,t.$c=1,t.$d={vId:e},t.$a=((n={})[g]=1,n),t.$e=[],t.$k={}}A(Sn[m],{get:function(e,n){return n=this.$d,e&&(n=n[e]),n},set:function(e,n){var t=this;return t.$c=S(e,t.$d,t.$k,n)||t.$c,t},digest:function(e,n,t){var r=this.set(e,n),i=r.$e;t&&i.push(t),i.i||Cn(r,i)},snapshot:function(){return this.$f=p(this.$d),this},altered:function(){if(this.$f)return this.$f!=p(this.$d)},translate:function(e){return O(this.$d,e)},parse:function(e){return ie(e,this.$a)}});var jn=/^(\$?)([^<]*)<([^>]+)>(?:&(.+))?$/,An=function(e,n,t){return e.a?t=e:((t=function(e){P(t.a,e,this)}).a=[e],t.b=1),t.a=t.a.concat(n.a||n),t},Un=function(e,n){var t,r,i=e.$r;for(t in i)r=i[t],(n||r.x)&&_n(i,t,1)},_n=function(e,n,t,r){var i,o,f=e[n];return f&&f!=r&&((i=(o=f.e).destroy)&&t&&P(i,a,o),delete e[n]),o},qn=function(e,n){var t,r,i,o,a,f,u=e.$eo,c=e.$so,h=e.$el,s=e.id;for(t in u)r=t,i=c[t],o=n,a=void 0,f=void 0,a=0|Ge[r],f=o?-1:1,a&&o!==a||X($,r,tn,o),Ge[r]=a+f,i&&(Ke[r]=(0|Ke[r])+f);for(var d=0,l=h;d<l.length;d++)t=l[d],X(t.e,t.n,Q,n,{i:s,v:e,f:t.f,m:t.m,e:t.e})},En={win:f,doc:c},Mn=function(e,n,t){for(var r,i,o,a,f={},u=0,c=e;u<c.length;u++)for(r in i=c[u])o=i[r],a=f[r],"ctor"!=r?(jn.test(r)&&(a?o=An(a,o):o.b=1),f[r]=o):t.push(o);for(r in f)H(n,r)||(n[r]=f[r])};function Nn(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=this._||(this._=[]);return Mn(e,this[m],t),this}var Pn=function(e){if(!e[g]){e[g]=[];var n=e[m],t=void 0,r=void 0,i=void 0,o=void 0,a={},f=[],u={},c=void 0,h=void 0,s=void 0,d=void 0,l=void 0,v=void 0,$=void 0;for(s in(r=n.mixins)&&Mn(r,n,e[g]),n)if(t=n[s],r=s.match(jn)){if(h=r[1],i=r[2],o=r[3],v={},$=r[4])for(var p=0,b=$=$.split(",");p<b.length;p++)v[d=b[p]]=!0;for(var w=0,y=o=o.split(",");w<y.length;w++){if(d=y[w],c=En[i],l=1,h){if(c){f.push({f:t,e:c,n:d,m:v});continue}l=2,(c=u[d])||(c=u[d]=[]),c[i]||(c[i]=1,c.push(i))}a[d]=a[d]|l,(c=n[d=i+g+d])?c.b&&(t.b?n[d]=An(t,c):H(n,s)&&(n[d]=t)):n[d]=t}}!function(e,n,t,r,i){r=e[n],e[n]=e[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if((i=this).$a>0)return i.$a++,i.fire("rendercall"),Un(i),P(r,e,i)}}(n,"render","$b"),n.$eo=a,n.$el=f,n.$so=u,n.$f=n.assign}return e[g]},Hn=function(e){var n,t,r,i=e.$l;if(i.f&&(i.p&&(n=ve.path),!n&&i.k)){r=ve[b];for(var o=0,a=i.k;o<a.length&&(t=a[o],!(n=H(r,t)));o++);}return n};function On(e,n,t,r,i){(i=this).owner=n,i.id=e,i.$l={k:[]},i.$r={},i.$a=1,i.updater=i.$d=new Sn(i.id),(e=On._)&&P(e,[t,{node:r,deep:!i.tmpl}],i)}A(On,{merge:Nn,extend:function e(n,t){var r=this,i=(n=n||{}).ctor,o=[];function a(e,n,t,i,f,u,c,h,s){r.call(c=this,e,n,t,i,f),u=a._,h=[t,{node:i,deep:!c.tmpl}],u&&P(u,h,c),(s=o.concat(f)).length&&P(s,h,c)}return i&&o.push(i),a.merge=Nn,a.extend=e,z(a,r,n,t)}}),A(On[m],ae,{init:v,beginUpdate:function(e,n){(n=this).$a>0&&n.$e&&n.owner.unmountZone(e,1)},endUpdate:function(e,n,t,r,i){(t=this).$a>0&&(e=e||t.id,n?i=n:(i=t.$e,t.$e=1),(r=t.owner).mountZone(e,n),i||l(t.wrapAsync(function(){!function(e,n,t){for(n=e.$f;n.length;)(t=n.shift()).r||e.invoke(t.n,t.a),delete n[t.k]}(r)}),0))},wrapAsync:function(e,n){var t=this,r=t.$a;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(r>0&&r==t.$a)return e.apply(n||t,i)}},observeLocation:function(e,n){var r;(r=this.$l).f=1,t(e)&&(n=e.path,e=e[b]),r.p=n,e&&(r.k=(e+o).split(","))},observeState:function(e){this.$os=(e+o).split(",")},capture:function(e,n,t,r){return r=this.$r,n?(_n(r,e,1,n),r[e]={e:n,x:t}):n=(r=r[e])&&r.e,n},release:function(e,n){return _n(this.$r,e,n)},leaveTip:function(e,n){var t=this,r=function(i){var o="a",a="b";"change"!=i.type&&(o="b",a="a"),r[o]?(i.prevent(),i.reject()):n()&&(i.prevent(),r[a]=1,t.leaveConfirm(function(){r[a]=0,i.resolve()},function(){r[a]=0,i.reject()},e))},i=function(t){n()&&(t.msg=e)};qe.on("change",r),qe.on("pageunload",i),t.on("unload",r),t.on("destroy",function(){qe.off("change",r),qe.off("pageunload",i)})},render:v}),oe.View=On;var Ln=n.type,Rn=Date.now;function Zn(){this.id=k("b"),this.$={}}A(Zn[m],{get:function(e,n){var t=this.$;if(e){for(var i=r(e)?e.slice():(e+o).split("."),a=void 0;(a=i.shift())&&t;)t=t[a];a&&(t=u)}return n!==u&&Ln(n)!=Ln(t)&&(t=n),t},set:function(e,n){var r;t(e)||((r={})[e]=n,e=r),A(this.$,e)}});function Bn(e,n,t){(t=this[e])&&(delete this[e],P(t,n,t.e))}var Dn=function(e,n,t,i,o){if(e.$d)return e;if(e.$e)return e.enqueue(Dn.bind(e,e,n,t,i,o));e.$e=1,r(n)||(n=[n]);for(var a=e.constructor,f=0,u=a.$f,c=function(e,n,t,r,i,o){var a=[],f=null,u=0;return function(c,h){u++;var s,d,l=this.$b,v=l.k;if(a[c+1]=this,h?(f=h,s=1):o.has(v)||(v&&o.set(v,this),l.t=Rn(),(d=l.a)&&P(d,this,this),(d=l.x)&&n.clear(d),s=1),!t.$d){var $=u==r;$&&(t.$e=0,2==i&&(a[0]=f,P(e,a,t))),1==i&&P(e,[h||null,this,$,c],t)}s&&n.fire("end",{bag:this,error:h})}}(t,a,e,n.length,i,a.$c),h=0,s=n;h<s.length;h++){var d=s[h];if(d){var l=a.get(d,o),v=l.e,$=v.$b.k,p=c.bind(v,f++),g=void 0;$&&u[$]?u[$].push(p):l.u?($&&((g=[p]).e=v,u[$]=g,p=Bn.bind(u,$)),a.$s(v,p)):p()}}return e};function zn(){var e=this;e.id=k("s"),e.$g=[]}A(zn[m],{all:function(e,n){return Dn(this,e,n,2)},save:function(e,n){return Dn(this,e,n,2,1)},one:function(e,n){return Dn(this,e,n,1)},enqueue:function(e){var n=this;return n.$d||(n.$g.push(e),n.dequeue(n.$h)),n},dequeue:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t,r=this;r.$e||r.$d||(r.$e=1,l(function(){r.$e=0,r.$d||(t=r.$g.shift())&&P(t,r.$h=e)},0))},destroy:function(e){(e=this).$d=1,e.$g=0}});var Fn=function(e,n){return[p(n),p(e)].join(g)},Jn=function(e,n,t,r){(r=e&&e.$b)&&n[r.n]&&t.del(r.k)},Qn=A({add:function(e){var n,t=this.$b;r(e)||(e=[e]);for(var i=0,o=e;i<o.length;i++)if(n=o[i]){var a=n.name,f=n.cache;n.cache=0|f,t[a]=n}},create:function(e){var n=this.meta(e),r=0|e.cache||n.cache,i=new Zn;i.set(n),i.$b={n:n.name,a:n.after,x:n.cleans,k:r&&Fn(n,e)},t(e)&&i.set(e);var o=n.before;return o&&P(o,i,i),this.fire("begin",{bag:i}),i},meta:function(e){return this.$b[e.name||e]||e},get:function(e,n){var t,r;return n||(t=this.cached(e)),t||(t=this.create(e),r=1),{e:t,u:r}},clear:function(e){this.$c.each(Jn,te((e+o).split(",")))},cached:function(e){var n,t,r=this.$c,i=this.meta(e),o=0|e.cache||i.cache;if(o&&(t=Fn(i,e)),t){var a=this.$f[t];a?n=a.e:(n=r.get(t))&&Rn()-n.$b.t>o&&(r.del(t),n=0)}return n}},ae);return zn.extend=function(e,n,t){function r(){zn.call(this)}return r.$s=e,r.$c=new R(n,t),r.$f={},r.$b={},z(r,zn,null,Qn)},oe.Service=zn,A(v[m],ae),v.extend=function e(n,t){var r=this,i=n&&n.ctor;function o(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r.apply(this,e),i&&i.apply(this,e)}return o.extend=e,z(o,r,n,t)},oe.Base=v,oe.default=oe,oe});