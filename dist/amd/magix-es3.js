/*!3.8.11 MIT kooboy_li@163.com*/define("magix",["$"],function(d){var v=d.isPlainObject,I=d.isArray,f=0,k="",p=[],V=",",T=null,a=window,o=void 0,n=document,m=d(n),u=a.setTimeout,r="changed",c="change",s="pageunload",A="value",C="mxs",S="#";function t(){}var g,i=JSON.stringify,y="\x1e",e="object",w="prototype",q="params",N="path",j="mx-view",h=/[#?].*$/,$=/([^=&?\/#]+)=?([^&#?]*)/g,l=/(?!^)=|&/,b=function(t){return(t||"mx_")+f++},x=b(),U={rootId:b(),defaultView:x,error:function(t){u(function(){throw t})}},E=function(t){return typeof t==e?t:n.getElementById(t)},P=function(t){return!t||typeof t!=e},H=function(t,e,n){var r,i,o,f=0;for(o in t)r=t[o],i=e[o],P(r)&&i===r||(f=n[o]=1),e[o]=r;return f},O=function(t,e,n){if(t=E(t),e=E(e),t&&e&&!(n=t==e))try{n=16==(16&e.compareDocumentPosition(t))}catch(t){}return n};function L(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])F(e,i)&&(t[i]=e[i]);return t}var Z,M=function(t,e,n){for(n in e=[],t)F(t,n)&&e.push(n);return e},R=U.hasOwnProperty,_=d("head"),B=function(t,e){e&&!B[t]&&(B[t]=1,_.append("<style>"+e))},D=function(t){return t.id||(t.$a=1,t.id=b())},z=function(t,e,n,r,i){e=e||p,I(t)||(t=[t]),I(e)||(e=[e]);for(var o=0,f=t;o<f.length;o++){i=f[o];try{r=i&&i.apply(n,e)}catch(t){U.error(t)}}return r},F=function(t,e){return t&&R.call(t,e)},J=function(t,e){var n,r;if(P(e))(n=e+k)[0]==y&&F(t,n)&&(e=t[n]);else for(n in e)r=e[n],r=J(t,r),e[n]=r;return e},Q=function(t,e){return e.f-t.f||e.t-t.t};function X(t,e,n,r){(r=this).c=[],r.b=e||5,r.x=r.b+(t||20),r.r=n}L(X[w],{get:function(t){var e=this.c[y+t];return e&&(e.f++,e.t=f++,e=e.v),e},each:function(t,e,n){for(var r=0,i=(n=this).c;r<i.length;r++)t(i[r].v,e,n)},set:function(t,e){var n=this.c,r=y+t,i=n[r],o=this.b;if(!i){if(n.length>=this.x)for(n.sort(Q);o--;)0<(i=n.pop()).f&&this.del(i.o);i={o:t},n.push(i),n[r]=i}i.v=e,i.f=1,i.t=f++},del:function(t){t=y+t;var e=this.c,n=e[t],r=this.r;n&&(n.f=-1,n.v=k,delete e[t],r&&z(r,n.o))},has:function(t){return F(this.c,y+t)}});var G=function(e,n){if(e)if(x==e)Z||(Z=je.extend()),n(Z);else if(I(e))require(e,n);else try{n(require(e))}catch(t){require([e],n)}else n&&n()};function K(){}var W,Y=function(t,e,n,r,i){return K[w]=e[w],L(i=new K,n),L(t,r),(i.constructor=t)[w]=i,t},tt=d.find||d.zepto,et=tt.matchesSelector||tt.matches,nt=function(t,e){e=t.data,t.eventTarget=e.e,z(e.f,t,e.v)},rt=function(t,e,n,r,i){i&&(e+="."+i.i),r?d(t).off(e,n):d(t).on(e,i,n)},it=new X,ot=0,ft=function(t,e,n){try{n=decodeURIComponent(n)}catch(t){}W[e]=n},at=function(t){var e,n=it.get(t);return n||(W={},t==(e=t.replace(h,k))&&l.test(e)&&(e=k),t.replace(e,k).replace($,ft),it.set(t,n={a:e,b:W})),{path:n.a,params:L({},n.b)}},ut=function(t,e,n){var r,i,o,f=[];for(i in e)r=e[i]+k,(!n||r||F(n,i))&&(r=encodeURIComponent(r),f.push(o=i+"="+r));return o&&(t+=(t&&(~t.indexOf("?")?"&":"?"))+f.join("&")),t},ct=function(t,e){var n,r={};if(t)for(var i=0,o=t;i<o.length;i++)n=o[i],r[e&&n?n[e]:n]=e?n:1+(0|r[n]);return r},st=new X,ht=function(t,e,n){return st.has(t)?n=st.get(t):(n=z(Function("return "+t)),-1<t.indexOf(y)?J(e,n):st.set(t,n)),n},dt={config:function(t,e){return e=U,t&&(e=v(t)?L(e,t):e[t]),e},boot:function(e){L(U,e),G(U.ini,function(t){L(U,t,e),G(U.exts,function(){Rt.on(r,Ft),yt.on(r,Ft),ot=1,Ot()})})},toMap:ct,toTry:z,toUrl:ut,parseUrl:at,mix:L,has:F,keys:M,inside:O,node:E,applyStyle:B,guid:b,use:G,Cache:X,nodeId:D},$t={fire:function(t,e,n,r){var i,o,f,a,u=this,c=u[y+t];if(e||(e={}),e.type=t,c)for(o=(i=c.length)-1;i--;)(a=c[f=r?i:o-i]).f?(a.x=1,z(a.f,e,u),a.x=k):a.x||(c.splice(f,1),o--);return(c=u["on"+t])&&z(c,e,u),n&&u.off(t),u},on:function(t,e){var n=y+t;return(this[n]||(this[n]=[])).push({f:e}),this},off:function(t,e){var n,r=y+t,i=this[r];if(e){if(i)for(var o=0,f=i;o<f.length;o++)if((n=f[o]).f==e){n.f=k;break}}else delete this[r],delete this["on"+t];return this}};dt.Event=$t;var vt={},lt={},pt={},gt=0,mt=function(t){for(var e=0,n=t=(t+k).split(",");e<n.length;e++){var r=n[e];F(lt,r)?lt[r]++:lt[r]=1}return t},bt=function(t){for(var e,n=0,r=t;n<r.length;n++)e=r[n],F(lt,e)&&(--lt[e]||(delete lt[e],delete vt[e]))};var yt=L({get:function(t){var e=t?vt[t]:vt;return e},set:function(t){return gt=H(t,vt,pt)||gt,this},digest:function(t){t&&yt.set(t),gt&&(gt=0,this.fire(r,{keys:pt}),pt={})},diff:function(){return pt},clean:function(t){return{ctor:function(){t=mt(t),this.on("destroy",function(){return bt(t)})}}}},$t);dt.State=yt;var wt,xt="view",kt=new X,Vt=new X,At=a.location,It=0,Tt={query:{},params:{},href:k},Ct=/(?:^.*\/\/[^\/]+|#.*$)/gi,St=/^[^#]*#?!?/;function qt(t,e){return this[q][t]||e!==o&&e||k}var Nt,jt,Ut,Et,Pt,Ht=function(t,e){t="#!"+t,e?At.replace(t):At.hash=t},Ot=function(){var r,i,o=Zt().srcHash;rt(a,"hashchange",function(t,e,n){i||(e=Zt(),(r=e.srcHash)!=o&&(n=function(){t.p=1,i=k,Ht(o=r),Mt()},t={reject:function(){t.p=1,i=k,Ht(o)},resolve:n,prevent:function(){i=1}},Rt.fire(c,t),i||t.p||n()))}),rt(a,"beforeunload",function(t,e,n){if(t=t||a.event,e={},Rt.fire(s,e),n=e.msg)return t&&(t.returnValue=n),n}),Mt()},Lt=n.title,Zt=function(t){t=t||At.href;var e,n,r,i,o=kt.get(t);return o||(o={get:qt,href:t,srcQuery:e=t.replace(Ct,k),srcHash:n=t.replace(St,k),query:r=at(e),hash:i=at(n),params:L({},r[q],i[q])},ot&&(!function(t,e){if(Nt||(Nt=U.routes||{},jt=U.unmatchView,Ut=U.defaultView,Et=U.defaultPath||"/",Pt=U.rewrite),!t[xt]){var n=t.hash[N]||Et;Pt&&(n=Pt(n,t[q],Nt)),e=Nt[n]||jt||Ut,t[N]=n,t[xt]=e,v(e)&&L(t,e)}}(o),kt.set(t,o))),o},Mt=function(){var t=Zt(),e=function(t,e){var n=t.href,r=e.href,i=n+y+r,o=Vt.get(i);if(!o){var f,a;o={params:a={},force:!n};for(var u=t[q],c=e[q],s=function(t){var e=u[t],n=c[t];e!=n&&(a[t]={from:e,to:n},f=1)},h=0,d=M(u).concat(M(c));h<d.length;h++)s(d[h]);u=t,c=e,a=o,s(N),s(xt),Vt.set(i,o={a:f,b:o})}return o}(Tt,Tt=t);return!It&&e.a&&((wt=e.b)[N]&&(n.title=t.title||Lt),Rt.fire(r,wt)),It=0,wt},Rt=L({parse:Zt,diff:Mt,to:function(t,e,n,r){!e&&v(t)&&(e=t,t=k);var i,o,f,a,u=at(t),c=u[q],s=u[N],h=Tt[N],d=Tt[q],$=Tt.query[q];if(L(c,e),s)for(h in $)F(c,h)||(c[h]=k);else d&&(s=h,c=L({},d,c));o=Tt,f=n,a=r,(i=ut(i=s,c,$))!=o.srcHash&&(It=a,Ht(i,f))}},$t);dt.Router=Rt;var _t,Bt,Dt=0,zt=function(t,e,n,r,i,o){if(t&&t.$a!=Dt&&(n=t.$v)&&1<n.$a){(e?function(t,e,n){var r,i=t.$os;if(i)for(var o=0,f=i;o<f.length&&(r=f[o],!(n=F(e,r)));o++);return n}(n,e):Ne(n))&&n.$b();for(var f=0,a=t.children();f<a.length;f++)o=a[f],zt(Jt[o],e)}},Ft=function(t,e,n){e=Kt(),(n=t[xt])?e.mountView(n.to):(Dt=f++,zt(e,t.keys))},Jt={},Qt=function(t){if(!t.$b&&!t.$d&&t.$cc==t.$rc){t.$cr||(t.$cr=1,t.$ca=0,t.fire("created"));var e=t.id,n=t.pId,r=Jt[n];r&&!F(r.$e,e)&&(r.$e[e]=1,r.$rc++,Qt(r))}},Xt=function(t,e){if(!t.$ca&&t.$cr){t.$cr=0,t.$ca=1,t.fire("alter",e);var n=t.id,r=t.pId,i=Jt[r];i&&F(i.$e,n)&&(i.$rc--,delete i.$e[n],Xt(i,e))}},Gt=function(t,e,n,r){return r=(r=(r=Jt[t])&&r.$v)?r.$d.$a:{},0<e.indexOf(y)&&J(r,n),r},Kt=function(t){return _t||(g=n.body,t=U.rootId,E(t)||(g.id=t),_t=new te(t)),_t},Wt=function(t,e){F(Jt,t)||(Jt[t]=e,te.fire("add",{vframe:e}),(t=E(t))&&(t.vframe=e))},Yt=[];function te(t,e,n){(n=this).id=t,n.$c={},n.$cc=0,n.$rc=0,n.$g=n.$g||1,n.$e={},n.$f=[],n.pId=e,Wt(t,n)}L(te,{all:function(){return Jt},get:function(t){return Jt[t]}},$t),L(te[w],$t,{mountView:function(t,e){var n,r,i,o,f,a=this,u=a.id,c=a.pId,s=E(u);!a.$h&&s&&(a.$h=1,a.$i=s.innerHTML),a.unmountView(),a.$b=0,n=at(t),i=n[N],s&&i&&(a[N]=t,o=n[q],Gt(c,t,o),a.$j=n[N],L(o,e),r=a.$g,G(i,function(t){if(r==a.$g){if(!t)return U.error(Error("id:"+u+" cannot load:"+i));f=qe(t),i=new t(u,a,o,f),a.$v=i,a.$a=Dt,Ie(i),(o=z(i.init,o,i))||(o={then:function(t){return t()}}),r=++a.$g,o.then(function(){r==a.$g&&(i.$b(),i.tmpl||(a.$h=0,i.$e||i.endUpdate()))})}}))},unmountView:function(){var t,e,n=this,r=n.$v,i=n.id;n.$f=[],r&&(Bt||(e=1,Bt={id:i}),n.$b=1,n.unmountZone(0,1),Xt(n,Bt),(n.$v=0)<r.$a&&(r.$a=0,delete oe[i],delete fe[i],r.fire("destroy",0,1,1),Ve(r,1),Ie(r,1),r.owner=0),r.$a--,(t=E(i))&&n.$h&&d(t).html(n.$i),e&&(Bt=0)),n.$g++},mountVframe:function(t,e,n){var r,i=this,o=i.id,f=i.$c;return Xt(i,{id:t}),(r=Jt[t])||(F(f,t)||(i.$n=0,i.$cc++),f[t]=t,(r=Yt.pop())?te.call(r,t,o):r=new te(t,o)),r.mountView(e,n),r},mountZone:function(t,e){var n,r,i=this,o=[];t=t||i.id;var f,a=d("#"+t+" ["+j+"]");i.$d=1;for(var u=0,c=a;u<c.length;u++)(n=c[u]).$b||(r=D(n),n.$b=1,o.push([r,n.getAttribute(j)]));for(var s=0,h=o;s<h.length;s++)r=(f=h[s])[0],n=f[1],i.mountVframe(r,n);i.$d=0,e||Qt(i)},unmountVframe:function(t,e){var n,r,i,o;if(t=t?this.$c[t]:this.id,n=Jt[t]){var f=n.$cr,a=n.pId;n.unmountView(),i=f,(o=Jt[r=t])&&(delete Jt[r],te.fire("remove",{vframe:o,fcc:i}),(r=E(r))&&(r.$b=0,r.vframe=0,r.$a=0)),n.id=n.pId=n.$c=n.$e=0,n.$h=0,n.off("alter"),n.off("created"),Yt.push(n),(n=Jt[a])&&F(n.$c,t)&&(delete n.$c[t],n.$n=0,n.$cc--,e||Qt(n))}},unmountZone:function(t,e){var n;for(n in this.$c)(!t||n!=t&&O(n,t))&&this.unmountVframe(n,1);e||Qt(this)},parent:function(t,e){for(e=this,t=t>>>0||1;e&&t--;)e=Jt[e.pId];return e},children:function(t){return(t=this).$n||(t.$n=M(t.$c))},invoke:function(t,e){var n,r,i,o,f,a=this.$f;return(r=this.$v)&&r.$e?n=(i=r[t])&&z(i,e,r):((o=a[f=y+t])&&(o.r=e===o.a),o={n:t,a:e,k:f},a.push(o),a[f]=o),n}}),dt.Vframe=te,d.fn.invokeView=function(t,e){for(var n,r=[],i=0;i<this.length;i++)n=this[i].vframe,r.push(n&&n.invoke(t,e));return r};var ee=new X(30,10),ne=/(?:([\w\-]+)\x1e)?([^(]+)\(([\s\S]*)?\)/,re={},ie={},oe={},fe={},ae=0,ue=function(t,e){var n,r,i,o,f,a,u=[],c=t,s=t.getAttribute("mx-"+e),h=[],d=S,$=0;if(s&&((f=ee.get(s))||(f={v:(f=s.match(ne)||p)[1],n:f[2],i:f[3]},ee.set(s,f)),f=L({},f,{r:s})),f&&!f.v||ie[e]){if((i=fe[r=c.$d])&&1==i[c.$e]&&(a=1,d=r),!a){for(h.push(c);c!=g&&(c=c.parentNode);){if(Jt[r=c.id]||(i=fe[r=c.$d])&&1==i[c.$e]){d=r;break}h.push(c)}for(var v=0,l=h;v<l.length;v++)s=l[v],(r=fe[d])||(r=fe[d]={}),r[i=s.$e||(s.$e=++ae)]=1,s.$d=d}c=t.id,Jt[c]&&($=d=c);do{if((n=Jt[d])&&(a=n.$v)){if(o=(i=a.$so)[e])for(c=o.length;c--;)i={r:r=o[c],v:d,n:r},r?!$&&et(t,r)&&u.push(i):$&&u.unshift(i);if(a.tmpl&&!$){f&&!f.v&&(f.v=d);break}$=0}}while(n&&(d=n.pId))}return f&&u.push(f),u},ce=function(t){for(var e,n,r,i,o,f,a,u=t.target,c=t.type,s=[];u!=g;){if((e=ue(u,c)).length){s=[];for(var h=0,d=e;h<d.length;h++){var $=d[h],v=$.v,l=($.r,$.n),p=$.i;if(f!=v){if(f&&t.isPropagationStopped())break;f=v}(i=(r=Jt[v])&&r.$v)?(o=i[l+y+c])&&(t.eventTarget=u,a=p?ht(p,i.$d.$a):{},t[q]=a,z(o,t,i)):t.stopPropagation()}}if((n=oe[o=u.$d])&&(n=n[u.$e])&&n[c]||t.isPropagationStopped()){s.length&&s.push(o);break}f=u.id,Jt[f]&&s.push(f),s.push(u),u=u.parentNode||g}if(o=s.length)for(n=S;o--;)(i=s[o]).nodeType?((e=oe[n])||(e=oe[n]={}),(a=e[f=i.$e||(i.$e=++ae)])||(a=e[f]={}),a[c]=1):n=i},se="http://www.w3.org/2000/svg",he={option:[1,"<select multiple>"],thead:[1,"<table>"],col:[2,"<table><colgroup>"],tr:[2,"<table><tbody>"],td:[3,"<table><tbody><tr>"],area:[1,"<map>"],param:[1,"<object>"],g:[1,'<svg xmlns="'+se+'">'],all:[0,""]},de=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i;he.optgroup=he.option,he.tbody=he.tfoot=he.colgroup=he.caption=he.thead,he.th=he.td;var $e=n.implementation.createHTMLDocument(k),ve=$e.createElement("base");ve.href=n.location.href,$e.head.appendChild(ve);var le=function(t,e){var n=D(e);t.$c[n]?t.unmountVframe(n,1):t.unmountZone(n,1)},pe={INPUT:[A,"checked"],TEXTAREA:[A],OPTION:["selected"]},ge=function(t,e){return 1==t.nodeType&&(t.$f?e=t.$g:((e=t.$a?k:t.id)||(e=t.getAttribute(C)),e||(e=t.getAttribute(j))&&(e=at(e)[N]),t.$f=1,t.$g=e)),e},me=function(t,e,n,r,i){for(var o,f,a,u,c,s=t.lastChild,h=e.firstChild,d=0,$={},v={};s;)d++,(a=ge(s))&&(a=$[a]||($[a]=[])).push(s),s=s.previousSibling;for(;h;)(a=ge(h))&&(v[a]=1),h=h.nextSibling;for(h=e.firstChild,c=e.childNodes.length<d,s=t.firstChild;h;)d--,h=(o=h).nextSibling,(u=$[a=ge(o)])&&(u=u.pop())?(u!=s?c&&s.nextSibling==u?(t.appendChild(s),s=u.nextSibling):t.insertBefore(u,s):s=s.nextSibling,be(u,o,t,n,r,i)):s?(a=ge(f=s))&&$[a]&&v[a]?(d++,n.c=1,t.insertBefore(o,f)):(s=s.nextSibling,be(f,o,t,n,r,i)):(t.appendChild(o),n.c=1);for(;0<d--;)f=t.lastChild,le(r,f),t.removeChild(f),n.c=1},be=function(t,e,n,r,i,o,f){if(function(t,e){var n,r=t.nodeName,i=pe[r],o=0;if(i)for(var f=0,a=i;f<a.length;f++)t[n=a[f]]!=e[n]&&(o=1,t[n]=e[n]);return o}(t,e)||1==t.nodeType&&(f=t.hasAttribute("mxv"))||!t.isEqualNode||!t.isEqualNode(e))if(t.nodeName===e.nodeName)if(1===t.nodeType){var a=e.getAttribute(C);if(a&&a==t.getAttribute(C))return;var u=e.getAttribute(j),c=e.innerHTML,s=e.getAttribute("mxa"),h=!s||s!=t.getAttribute("mxa"),d=void 0,$=void 0,v=Jt[t.id],l=void 0,p=void 0,g=u&&at(u),m=void 0,b=void 0,y=void 0;if(u&&v&&(!e.id||e.id==t.id)&&v.$j==g[N]&&(p=v.$v)){if(b=c!=v.$i,y=u!=v[N],l=t.getAttribute("mxv"),!b&&!y&&l)for(var w=f=0,x=m=l.split(V);w<x.length;w++)if((l=x[w])==S||F(o,l)){y=1;break}y||b||f?(l=p.$e&&p.$f)?(m=g[q],Gt(v.pId,u,m),v.$i=c,v[N]=u,g={node:e,deep:!p.tmpl,mxv:f,inner:b,query:y,keys:o},h=1,z(l,[m,g],p)&&r.v.push(p),d=g.deep):d=$=1:h=1}else d=1,$=v;$&&(r.c=1,v.unmountVframe(0,1)),h&&function(t,e,n,r){var i,o,f,a;delete t.$f;var u=t.attributes,c=e.attributes;for(o=u.length;o--;)i=u[o].name,e.hasAttribute(i)||("id"==i?r||n.d.push([t,k]):(n.c=1,t.removeAttribute(i)));for(o=c.length;o--;)f=(i=c[o]).name,a=i[A],t.getAttribute(f)!=a&&("id"==f?n.d.push([t,a]):(n.c=1,t.setAttribute(f,a)))}(t,e,r,v&&u),d&&me(t,e,r,i,o)}else t.nodeValue!==e.nodeValue&&(r.c=1,t.nodeValue=e.nodeValue);else le(i,t),n.replaceChild(e,t),r.c=1},ye=function(e,n){var t,r,i=e.$k,o=e.$c,f=e.$b,a=Jt[f],u=a&&a.$v,c={d:[],v:[]},s=E(f),h=e.$d,d=e.$a,$=function(t){n.i<n.length?ye(e,n):(c=n.slice(),n.i=n.length=0,t&&u.fire("domready"),z(c))};if(n.i=n.length,e.$c=0,e.$k={},o&&u&&0<u.$a&&(t=u.tmpl)&&u.$d==e){u.fire("dompatch"),delete oe[f],delete fe[f],r=function(t,e){var n=$e.createElement("div"),r=se==e.namespaceURI?"g":(de.exec(t)||[0,""])[1].toLowerCase(),i=he[r]||he.all;n.innerHTML=i[1]+t;for(var o=i[0];o--;)n=n.lastChild;return n}(t(h,f,d),s),me(s,r,c,a,i);for(var v=0,l=c.d;v<l.length;v++)(r=l[v])[0].id=r[1];for(var p=0,g=c.v;p<g.length;p++)(r=g[p]).$b();!c.c&&u.$e||u.endUpdate(f),c.c&&m.trigger({type:"htmlchanged",vId:f}),$(1)}else $()};function we(t){var e,n=this;n.$b=t,n.$c=1,n.$d={vId:t},n.$a=((e={})[y]=1,e),n.$e=[],n.$k={}}L(we[w],{get:function(t,e){return e=this.$d,t&&(e=e[t]),e},set:function(t){var e=this;return e.$c=H(t,e.$d,e.$k)||e.$c,e},digest:function(t,e){var n=this.set(t),r=n.$e;r.push(e),r.i||ye(n,r)},snapshot:function(){return this.$f=i(this.$d),this},altered:function(){if(this.$f)return this.$f!=i(this.$d)},translate:function(t){return J(this.$d,t)},parse:function(t){return ht(t,this.$a)}});var xe=/^(\$?)([^<]*)<([^>]+)>$/,ke=function(t,e,n){return t.a?n=t:((n=function(t){z(n.a,t,this)}).a=[t],n.b=1),n.a=n.a.concat(e.a||e),n},Ve=function(t,e){var n,r,i=t.$r;for(n in i)r=i[n],(e||r.x)&&Ae(i,n,1)},Ae=function(t,e,n,r){var i,o,f=t[e];return f&&f!=r&&((i=(o=f.e).destroy)&&n&&z(i,p,o),delete t[e]),o},Ie=function(t,e){var n,r,i,o,f,a,u=t.$eo,c=t.$so,s=t.$el,h=t.id;for(n in u)i=c[r=n],o=e,void 0,f=0|re[r],a=o?-1:1,f&&o!==f||rt(g,r,ce,o),re[r]=f+a,i&&(ie[r]=(0|ie[r])+a);for(var d=0,$=s;d<$.length;d++)n=$[d],rt(n.e,n.n,nt,e,{i:h,v:t,f:n.f,e:n.e})},Te={win:a,doc:n},Ce=function(t,e,n){for(var r,i,o,f,a={},u=0,c=t;u<c.length;u++)for(r in i=c[u])o=i[r],f=a[r],"ctor"!=r?(xe.test(r)&&(f?o=ke(f,o):o.b=1),a[r]=o):n.push(o);for(r in a)F(e,r)||(e[r]=a[r])};function Se(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._||(this._=[]);return Ce(t,this[w],n),this}var qe=function(t){if(!t[y]){t[y]=[];var e=t[w],n=void 0,r=void 0,i=void 0,o={},f=[],a={},u=void 0,c=void 0,s=void 0,h=void 0,d=void 0;for(s in(r=e.mixins)&&Ce(r,e,t[y]),e)if(n=e[s],r=s.match(xe)){c=r[1],i=r[2];for(var $=0,v=r[3].split(V);$<v.length;$++){if(h=v[$],u=Te[i],d=1,c){if(u){f.push({f:n,e:u,n:h});continue}d=2,(u=a[h])||(u=a[h]=[]),u[i]||(u[i]=1,u.push(i))}o[h]=o[h]|d,(u=e[h=i+y+h])?u.b&&(n.b?e[h]=ke(n,u):F(e,s)&&(e[h]=n)):e[h]=n}}g="$b",m=(l=e)[p="render"],l[p]=l[g]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];0<(b=this).$a&&(b.$a++,b.fire("rendercall"),Ve(b),z(m,t,b))},e.$eo=o,e.$el=f,e.$so=a,e.$f=e.assign}var l,p,g,m,b;return t[y]},Ne=function(t){var e,n,r,i=t.$l;if(i.f&&(i.p&&(e=wt[N]),!e&&i.k)){r=wt[q];for(var o=0,f=i.k;o<f.length&&(n=f[o],!(e=F(r,n)));o++);}return e};function je(t,e,n,r){(r=this).owner=e,r.id=t,r.$l={k:[]},r.$r={},r.$a=1,r.updater=r.$d=new we(r.id),(t=je._)&&z(t,n,r)}L(je,{merge:Se,extend:function t(e,n){var f=this,r=(e=e||{}).ctor,a=[];function u(t,e,n,r,i,o){f.call(o=this,t,e,n),(i=u._)&&z(i,e,o),z(a.concat(r),n,o)}return r&&a.push(r),u.merge=Se,u.extend=t,Y(u,f,e,n)}}),L(je[w],$t,{init:t,beginUpdate:function(t,e){0<(e=this).$a&&e.$e&&e.owner.unmountZone(t,1)},endUpdate:function(t,e,n,r,i){0<(n=this).$a&&(t=t||n.id,e?i=e:(i=n.$e,n.$e=1),(r=n.owner).mountZone(t,e),i||u(n.wrapAsync(function(){!function(t,e,n){for(e=t.$f;e.length;)(n=e.shift()).r||t.invoke(n.n,n.a),delete e[n.k]}(r)}),0))},wrapAsync:function(n,r){var i=this,o=i.$a;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0<o&&o==i.$a)return n.apply(r||i,t)}},observeLocation:function(t,e){var n;(n=this.$l).f=1,v(t)&&(e=t[N],t=t[q]),n.p=e,t&&(n.k=(t+k).split(V))},observeState:function(t){this.$os=(t+k).split(V)},capture:function(t,e,n,r){return r=this.$r,e?(Ae(r,t,1,e),r[t]={e:e,x:n}):e=(r=r[t])&&r.e,e},release:function(t,e){return Ae(this.$r,t,e)},leaveTip:function(r,i){var o=this,f=function(t){var e="a",n="b";t.type!=c&&(e="b",n="a"),f[e]?(t.prevent(),t.reject()):i()&&(t.prevent(),f[n]=1,o.leaveConfirm(function(){f[n]=0,t.resolve()},function(){f[n]=0,t.reject()},r))},t=function(t){i()&&(t.msg=r)};Rt.on(c,f),Rt.on(s,t),o.on("unload",f),o.on("destroy",function(){Rt.off(c,f),Rt.off(s,t)})},render:t}),dt.View=je;var Ue=d.type,Ee=d.now||Date.now;function Pe(){this.id=b("b"),this.$={}}L(Pe[w],{get:function(t,e){var n=this.$;if(t){for(var r=I(t)?t.slice():(t+k).split("."),i=void 0;(i=r.shift())&&n;)n=n[i];i&&(n=o)}return e!==o&&Ue(e)!=Ue(n)&&(n=e),n},set:function(t,e){var n;v(t)||((n={})[t]=e,t=n),L(this.$,t)}});function He(t,e,n){(n=this[t])&&(delete this[t],z(n,e,n.e))}var Oe=function(t,e,n,r,i){if(t.$d)return t;if(t.$e)return t.enqueue(Oe.bind(t,t,e,n,r,i));t.$e=1,I(e)||(e=[e]);for(var u,c,s,h,d,$,v,l,p,o=t.constructor,f=0,a=o.$f,g=(u=n,c=o,s=t,h=e.length,d=r,$=o.$c,v=[],l=T,p=0,function(t,e){p++;var n,r,i=this,o=i.$b,f=o.k;if(v[t+1]=i,e?(l=e,n=1):$.has(f)||(f&&$.set(f,i),o.t=Ee(),(r=o.a)&&z(r,i,i),(r=o.x)&&c.clear(r),n=1),!s.$d){var a=p==h;a&&(s.$e=0,2==d&&(v[0]=l,z(u,v,s))),1==d&&z(u,[e||T,i,a,t],s)}n&&c.fire("end",{bag:i,error:e})}),m=0,b=e;m<b.length;m++){var y=b[m];if(y){var w=o.get(y,i),x=w.e,k=x.$b.k,V=g.bind(x,f++),A=void 0;k&&a[k]?a[k].push(V):w.u?(k&&((A=[V]).e=x,a[k]=A,V=He.bind(a,k)),o.$s(x,V)):V()}}return t};function Le(){var t=this;t.id=b("s"),t.$g=[]}L(Le[w],{all:function(t,e){return Oe(this,t,e,2)},save:function(t,e){return Oe(this,t,e,2,1)},one:function(t,e){return Oe(this,t,e,1)},enqueue:function(t){var e=this;return e.$d||(e.$g.push(t),e.dequeue(e.$h)),e},dequeue:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n,r=this;r.$e||r.$d||(r.$e=1,u(function(){r.$e=0,r.$d||(n=r.$g.shift())&&z(n,r.$h=t)},0))},destroy:function(t){(t=this).$d=1,t.$g=0}});var Ze=function(t,e){return[i(e),i(t)].join(y)},Me=function(t,e,n,r){(r=t&&t.$b)&&e[r.n]&&n.del(r.k)},Re=L({add:function(t){var e,n=this.$b;I(t)||(t=[t]);for(var r=0,i=t;r<i.length;r++)if(e=i[r]){var o=e.name,f=e.cache;e.cache=0|f,n[o]=e}},create:function(t){var e=this.meta(t),n=0|t.cache||e.cache,r=new Pe;r.set(e),r.$b={n:e.name,a:e.after,x:e.cleans,k:n&&Ze(e,t)},v(t)&&r.set(t);var i=e.before;return i&&z(i,r,r),this.fire("begin",{bag:r}),r},meta:function(t){return this.$b[t.name||t]||t},get:function(t,e){var n,r;return e||(n=this.cached(t)),n||(n=this.create(t),r=1),{e:n,u:r}},clear:function(t){this.$c.each(Me,ct((t+k).split(V)))},cached:function(t){var e,n,r=this.$c,i=this.meta(t),o=0|t.cache||i.cache;if(o&&(n=Ze(i,t)),n){var f=this.$f[n];f?e=f.e:(e=r.get(n))&&Ee()-e.$b.t>o&&(r.del(n),e=0)}return e}},$t);return Le.extend=function(t,e,n){function r(){Le.call(this)}return r.$s=t,r.$c=new X(e,n),r.$f={},r.$b={},Y(r,Le,T,Re)},dt.Service=Le,L(t[w],$t),t.extend=function t(e,n){var r=this,i=e&&e.ctor;function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.apply(this,t),i&&i.apply(this,t)}return o.extend=t,Y(o,r,e,n)},dt.Base=t,dt});